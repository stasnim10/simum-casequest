/*! For license information please see main.0ea0322b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!E.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+I(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+I(o=e[c],c);l+=N(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,u=s+I(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(S);else{var t=r(u);null!==t&&j(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&j(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,_=null,T=-1,C=5,I=-1;function N(){return!(t.unstable_now()-I<C)}function A(){if(null!==_){var e=t.unstable_now();I=e;var n=!0;try{n=_(!0,e)}finally{n?k():(E=!1,_=null)}}else E=!1}if("function"===typeof w)k=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,k=function(){R.postMessage(null)}}else k=function(){y(A,0)};function D(e){_=e,E||(E=!0,k())}function j(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,j(x,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var L,O=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case _:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ee=null;function _e(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),Se(e.stateNode,e.type,t))}}function Te(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==ke||null!==Ee)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){De=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){De=!1}function Me(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Oe=null,Fe=!1,Ve=null,Ue={onError:function(e){Le=!0,Oe=e}};function ze(e,t,n,r,i,s,a,o,l){Le=!1,Oe=null,Me.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,kt,Et,_t,Tt=!1,Ct=[],It=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void _t(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Dt.shift()}var $t=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=wt,s=$t.transition;$t.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,$t.transition=s}}function Wt(e,t,n,r){var i=wt,s=$t.transition;$t.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,$t.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Gt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Lt(It,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&Hr(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=O({},cn,{view:0,detail:0}),dn=sn(hn),fn=O({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(O({},fn,{dataTransfer:0})),gn=sn(O({},hn,{relatedTarget:0})),yn=sn(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(O({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function _n(){return En}var Tn=O({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),In=sn(O({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(O({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),An=sn(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=O({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],jn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,On=u&&(!jn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];qn(t,Kn,e,xe(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},Er={};function _r(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=_r("animationend"),Cr=_r("animationiteration"),Ir=_r("animationstart"),Nr=_r("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var jr=Pr[Dr];Rr(jr.toLowerCase(),"on"+(jr[0].toUpperCase()+jr.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Oe;Le=!1,Oe=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Or(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Or(i,o,c),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var i=qt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=s,i=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case Cr:case Ir:l=yn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(qr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:bi(l),f=null==c?o:bi(c),(o=new u(m,p+"leave",l,n,i)).target=h,o.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(a,o,l,u,!1),null!==c&&null!==h&&Gr(a,h,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Yn;else if(Hn(o))if(Xn)g=ar;else{g=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(jn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(On&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),a.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!jn&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Re(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var Si=[],ki=-1;function Ei(e){return{current:e}}function _i(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Ti(e,t){ki++,Si[ki]=e.current,e.current=t}var Ci={},Ii=Ei(Ci),Ni=Ei(!1),Ai=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){_i(Ni),_i(Ii)}function ji(e,t,n){if(Ii.current!==Ci)throw Error(s(168));Ti(Ii,t),Ti(Ni,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return O({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=Ii.current,Ti(Ii,e),Ti(Ni,Ni.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,_i(Ni),_i(Ii),Ti(Ii,e)):_i(Ni),Ti(Ni,n)}var Fi=null,Vi=!1,Ui=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=wt;try{var n=Fi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Bi),i}finally{wt=t,Ui=!1}}return null}var $i=[],Hi=0,qi=null,Wi=0,Ki=[],Gi=0,Qi=null,Yi=1,Xi="";function Ji(e,t){$i[Hi++]=Wi,$i[Hi++]=qi,qi=e,Wi=t}function Zi(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Yi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=$i[--Hi],$i[Hi]=null,Wi=$i[--Hi],$i[Hi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Xi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(i,h),is&&Ji(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,m),c}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),is&&Ji(i,m),c}function g(i,o,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),o=a(w,o,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),is&&Ji(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=Mc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=jc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(M(a))return g(r,s,a,l);ys(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Oc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=ws(!0),xs=ws(!1),Ss=Ei(null),ks=null,Es=null,_s=null;function Ts(){_s=Es=ks=null}function Cs(e){var t=Ss.current;_i(Ss),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ks=e,_s=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===ks)throw Error(s(308));Es=e,ks.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=O({},h,d);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=h}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},qs=Ei(Hs),Ws=Ei(Hs),Ks=Ei(Hs);function Gs(e){if(e===Hs)throw Error(s(174));return e}function Qs(e,t){switch(Ti(Ks,t),Ti(Ws,e),Ti(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(qs),Ti(qs,t)}function Ys(){_i(qs),_i(Ws),_i(Ks)}function Xs(e){Gs(Ks.current);var t=Gs(qs.current),n=le(t,e.type);t!==n&&(Ti(Ws,e),Ti(qs,n))}function Js(e){Ws.current===e&&(_i(qs),_i(Ws))}var Zs=Ei(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,i),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function wa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,aa.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function ka(e,t){var n=aa,r=va(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Ma(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Aa(9,_a.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&sa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&Ia(e)}function Ta(e,t,n){return n(function(){Ca(t)&&Ia(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ia(e){var t=js(e,1);null!==t&&nc(t,e,1,-1)}function Na(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return va().memoizedState}function Ra(e,t,n,r){var i=ya();aa.flags|=e,i.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=va();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Aa(t,n,s,r))}aa.flags|=e,i.memoizedState=Aa(1|t,n,s,r)}function ja(e,t){return Ra(8390656,8,e,t)}function Ma(e,t){return Da(2048,8,e,t)}function La(e,t){return Da(4,2,e,t)}function Oa(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function Ua(){}function za(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Ha(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=n,ia.transition=r}}function qa(){return va().memoizedState}function Wa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Qa(t,n);else if(null!==(n=Ds(e,t,n,r))){nc(n,e,r,ec()),Ya(n,t,r)}}function Ka(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Qa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(nc(n,e,r,i=ec()),Ya(n,t,r))}}function Ga(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Qa(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:As,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:As,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:ja,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Na,useDebugValue:Ua,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Na(!1),t=e[0];return e=Ha.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=ya();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&sa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ja(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:As,useCallback:za,useContext:As,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Ba,useReducer:ba,useRef:Pa,useState:function(){return ba(wa)},useDebugValue:Ua,useDeferredValue:function(e){return $a(va(),oa.memoizedState,e)},useTransition:function(){return[ba(wa)[0],va().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:As,useCallback:za,useContext:As,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:La,useLayoutEffect:Oa,useMemo:Ba,useReducer:xa,useRef:Pa,useState:function(){return xa(wa)},useDebugValue:Ua,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:$a(t,oa.memoizedState,e)},useTransition:function(){return[xa(wa)[0],va().memoizedState]},useMutableSource:Sa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(nc(t,e,r,n),Us(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Ri(t)?Ai:Ii.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Ri(t)?Ai:Ii.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vo=b.ReactCurrentOwner,wo=!1;function bo(e,t,n,r){t.child=null===e?xs(t,null,n,r):bs(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||wo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function So(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return To(e,t,n,r,i)}function Eo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Dl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Rl),Rl|=r;return bo(e,t,i,n),t.child}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,i){var s=Ri(n)?Ai:Ii.current;return s=Pi(t,s),Ns(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||wo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Co(e,t,n,r,i){if(Ri(n)){var s=!0;Li(t)}else s=!1;if(Ns(t,i),null===t.stateNode)$o(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Pi(t,c=Ri(n)?Ai:Ii.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ms=!1;var d=t.memoizedState;a.state=d,Bs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ni.current||Ms?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ms||io(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Os(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Pi(t,l=Ri(n)?Ai:Ii.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,r,l),Ms=!1,d=t.memoizedState,a.state=d,Bs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ni.current||Ms?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Ms||io(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,s,i)}function Io(e,t,n,r,i,s){_o(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Oi(t,n,!1),Ho(e,t,s);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function No(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Qs(e,t.containerInfo)}function Ao(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var Po,Ro,Do,jo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Lo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),e=Mc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Lo(n),t.memoizedState=Mo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Mc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Lo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Nl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,js(e,i),nc(r,e,i,-1))}return mc(),Vo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=Xi,Ki[Gi++]=Qi,Yi=e.id,Xi=e.overflow,Qi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Lo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Dc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $o(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Ri(t.type)&&Di(),Wo(t),null;case 3:return r=t.stateNode,Ys(),_i(Ni),_i(Ii),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Ro(e,t),Wo(t),null;case 5:Js(t);var i=Gs(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wo(t),null}if(e=Gs(qs.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&w(e,a,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)jo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Gs(Ks.current),Gs(qs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Wo(t),null;case 13:if(_i(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Ys(),Ro(e,t),null===e&&Br(t.stateNode.containerInfo),Wo(t),null;case 10:return Cs(t.type._context),Wo(t),null;case 19:if(_i(Zs),null===(a=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Wo(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Ti(Zs,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Go(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),_i(Ni),_i(Ii),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(_i(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(Zs),null;case 4:return Ys(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gs(qs.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Yo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Yo||Zo(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Yo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ec(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Yo=(r=Yo)||null!==n.memoizedState,dl(e,t,n),Yo=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),we(l,o);var u=we(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Yo=(u=Yo)||h,ml(t,e),Yo=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Jo=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(Sp){Ec(e,e.return,Sp)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Jo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Yo;o=Qo;var c=Yo;if(Qo=a,(Yo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,Jo=l):Sl(i);for(;null!==s;)Jo=s,wl(s,t,n),s=s.sibling;Jo=i,Qo=o,Yo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&$s(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Yo||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function Sl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(Sp){Ec(t,n,Sp)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Sp){Ec(t,i,Sp)}}var s=t.return;try{il(t)}catch(Sp){Ec(t,s,Sp)}break;case 5:var a=t.return;try{il(t)}catch(Sp){Ec(t,a,Sp)}}}catch(Sp){Ec(t,t.return,Sp)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,El=Math.ceil,_l=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Il=0,Nl=null,Al=null,Pl=0,Rl=0,Dl=Ei(0),jl=0,Ml=null,Ll=0,Ol=0,Fl=0,Vl=null,Ul=null,zl=0,Bl=1/0,$l=null,Hl=!1,ql=null,Wl=null,Kl=!1,Gl=null,Ql=0,Yl=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(s(185));yt(e,n,r),0!==(2&Il)&&e===Nl||(e===Nl&&(0===(2&Il)&&(Ol|=n),4===jl&&oc(e,Pl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Xe()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai(function(){0===(6&Il)&&Bi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Il;Il|=2;var a=pc();for(Nl===e&&Pl===t||($l=null,Bl=Xe()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ts(),_l.current=a,Il=i,null!==Al?t=0:(Nl=null,Pl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ml,dc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ml,dc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,Ul,$l);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Ul,$l),t);break}xc(e,Ul,$l);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Ul,$l),r);break}xc(e,Ul,$l);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(s(327));Sc();var t=dt(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ml,dc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,$l),rc(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Xe()+500,Vi&&Bi())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&Sc();var t=Il;Il|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Il=t))&&Bi()}}function hc(){Rl=Dl.current,_i(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Ys(),_i(Ni),_i(Ii),na();break;case 5:Js(r);break;case 4:Ys();break;case 13:case 19:_i(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nl=e,Al=e=Dc(e.current,null),Pl=Rl=t,jl=0,Ml=null,Fl=Ol=Ll=0,Ul=Vl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ts(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,ha=0,Tl.current=null,null===n||null===n.return){jl=1,Ml=t,Al=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=go(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==jl&&(jl=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=_l.current;return _l.current=Xa,null===e?Xa:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Nl||0===(268435455&Ll)&&0===(268435455&Ol)||oc(Nl,Pl)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Nl===e&&Pl===t||($l=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ts(),Il=n,_l.current=r,null!==Al)throw Error(s(261));return Nl=null,Pl=0,jl}function yc(){for(;null!==Al;)wc(Al)}function vc(){for(;null!==Al&&!Qe();)wc(Al)}function wc(e){var t=kl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return jl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===jl&&(jl=5)}function xc(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Sc()}while(null!==Gl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Nl&&(Al=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Nc(tt,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cl.transition,Cl.transition=null;var o=wt;wt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch($f){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch($f){Ec(t,t.return,$f)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Il=l,wt=o,Cl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Sc(){if(null!==Gl){var e=bt(Ql),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var f=(h=Jo).sibling,p=h.return;if(sl(h),h===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Jo=v;break e}Jo=a.return}}var w=e.current;for(Jo=w;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=w;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Ec(l,l.return,S)}if(l===o){Jo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Jo=x;break e}Jo=l.return}}if(Il=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Vs(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Vs(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===jl||3===jl&&(130023424&Pl)===Pl&&500>Xe()-zl?dc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=js(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Mc(n.children,i,a,t);case E:o=8,i|=8;break;case _:return(e=Pc(12,n,t,2|i)).elementType=_,e.lanes=a,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=a,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case C:o=9;break e;case I:o=11;break e;case P:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function Bc(e,t,n,r,i,s,a,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function $c(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(nc(e,i,a,s),Us(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:No(t),fs();break;case 5:Xs(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Ti(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Eo(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$o(e,t),e=t.pendingProps;var i=Pi(t,Ii.current);Ns(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Io(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($o(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=to(r,e),i){case 0:t=To(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=So(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(No(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Os(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Ao(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),_o(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Oo(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ti(Ss,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Is(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Is(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=As(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),So(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),$o(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Ns(t,n),so(t,r,i),oo(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return Eo(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}$c(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){$c(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$c(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){$c(null,e,null,null)}),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ot(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Il)&&(Bl=Xe()+500,Bi()))}break;case 13:uc(function(){var t=js(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},St=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=js(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return wt},_t=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,xi,Te,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);const s=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),a=(0,r.createContext)({}),o=(0,r.createContext)(null),l="undefined"!==typeof document,c=l?r.useLayoutEffect:r.useEffect,u=(0,r.createContext)({strict:!1}),h=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d="data-"+h("framerAppearId");function f(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function p(e){return"string"===typeof e||Array.isArray(e)}function m(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const g=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],y=["initial",...g];function v(e){return m(e.animate)||y.some(t=>p(e[t]))}function w(e){return Boolean(v(e)||e.variants)}function b(e){const{initial:t,animate:n}=function(e,t){if(v(e)){const{initial:t,animate:n}=e;return{initial:!1===t||p(t)?t:void 0,animate:p(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(a));return(0,r.useMemo)(()=>({initial:t,animate:n}),[x(t),x(n)])}function x(e){return Array.isArray(e)?e.join(" "):e}const S={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},k={};for(const e_ in S)k[e_]={isEnabled:e=>S[e_].some(t=>!!e[t])};const E=(0,r.createContext)({}),_=(0,r.createContext)({}),T=Symbol.for("motionComponentSymbol");function C(e){let{preloadedFeatures:t,createVisualElement:n,useRender:i,useVisualState:h,Component:p}=e;t&&function(e){for(const t in e)k[t]={...k[t],...e[t]}}(t);const m=(0,r.forwardRef)(function(e,m){let g;const y={...(0,r.useContext)(s),...e,layoutId:I(e)},{isStatic:v}=y,w=b(e),x=h(e,v);if(!v&&l){w.visualElement=function(e,t,n,i){const{visualElement:l}=(0,r.useContext)(a),h=(0,r.useContext)(u),f=(0,r.useContext)(o),p=(0,r.useContext)(s).reducedMotion,m=(0,r.useRef)();i=i||h.renderer,!m.current&&i&&(m.current=i(e,{visualState:t,parent:l,props:n,presenceContext:f,blockInitialAnimation:!!f&&!1===f.initial,reducedMotionConfig:p}));const g=m.current;(0,r.useInsertionEffect)(()=>{g&&g.update(n,f)});const y=(0,r.useRef)(Boolean(n[d]&&!window.HandoffComplete));return c(()=>{g&&(g.render(),y.current&&g.animationState&&g.animationState.animateChanges())}),(0,r.useEffect)(()=>{g&&(g.updateFeatures(),!y.current&&g.animationState&&g.animationState.animateChanges(),y.current&&(y.current=!1,window.HandoffComplete=!0))}),g}(p,x,y,n);const e=(0,r.useContext)(_),i=(0,r.useContext)(u).strict;w.visualElement&&(g=w.visualElement.loadFeatures(y,i,t,e))}return r.createElement(a.Provider,{value:w},g&&w.visualElement?r.createElement(g,{visualElement:w.visualElement,...y}):null,i(p,e,function(e,t,n){return(0,r.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):f(n)&&(n.current=r))},[t])}(x,w.visualElement,m),x,v,w.visualElement))});return m[T]=p,m}function I(e){let{layoutId:t}=e;const n=(0,r.useContext)(E).id;return n&&void 0!==t?n+"-"+t:t}function N(e){function t(t){return C(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const A=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P(e){return"string"===typeof e&&!e.includes("-")&&!!(A.indexOf(e)>-1||/[A-Z]/.test(e))}const R={};const D=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],j=new Set(D);function M(e,t){let{layout:n,layoutId:r}=t;return j.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!R[e]||"opacity"===e)}const L=e=>Boolean(e&&e.getVelocity),O={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F=D.length;const V=e=>t=>"string"===typeof t&&t.startsWith(e),U=V("--"),z=V("var(--"),B=(e,t)=>t&&"number"===typeof e?t.transform(e):e,$=(e,t,n)=>Math.min(Math.max(n,e),t),H={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},q={...H,transform:e=>$(0,1,e)},W={...H,default:1},K=e=>Math.round(1e5*e)/1e5,G=/(-)?([\d]*\.?[\d])+/g,Q=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Y=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function X(e){return"string"===typeof e}const J=e=>({test:t=>X(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Z=J("deg"),ee=J("%"),te=J("px"),ne=J("vh"),re=J("vw"),ie={...ee,parse:e=>ee.parse(e)/100,transform:e=>ee.transform(100*e)},se={...H,transform:Math.round},ae={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,size:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,rotate:Z,rotateX:Z,rotateY:Z,rotateZ:Z,scale:W,scaleX:W,scaleY:W,scaleZ:W,skew:Z,skewX:Z,skewY:Z,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:q,originX:ie,originY:ie,originZ:te,zIndex:se,fillOpacity:q,strokeOpacity:q,numOctaves:se};function oe(e,t,n,r){const{style:i,vars:s,transform:a,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const h in t){const e=t[h];if(U(h)){s[h]=e;continue}const n=ae[h],r=B(e,n);if(j.has(h)){if(l=!0,a[h]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,o[h]=r):i[h]=r}if(t.transform||(l||r?i.transform=function(e,t,n,r){let{enableHardwareAcceleration:i=!0,allowTransformNone:s=!0}=t,a="";for(let o=0;o<F;o++){const t=D[o];void 0!==e[t]&&(a+=`${O[t]||t}(${e[t]}) `)}return i&&!e.z&&(a+="translateZ(0)"),a=a.trim(),r?a=r(e,n?"":a):s&&n&&(a="none"),a}(e.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin=`${e} ${t} ${n}`}}const le=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ce(e,t,n){for(const r in t)L(t[r])||M(r,n)||(e[r]=t[r])}function ue(e,t,n){const i={};return ce(i,e.style||{},e),Object.assign(i,function(e,t,n){let{transformTemplate:i}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return oe(e,t,{enableHardwareAcceleration:!n},i),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(i):i}function he(e,t,n){const r={},i=ue(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const de=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fe(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||de.has(e)}let pe=e=>!fe(e);try{(me=require("@emotion/is-prop-valid").default)&&(pe=e=>e.startsWith("on")?!fe(e):me(e))}catch(ZE){}var me;function ge(e,t,n){return"string"===typeof e?e:te.transform(t+n*e)}const ye={offset:"stroke-dashoffset",array:"stroke-dasharray"},ve={offset:"strokeDashoffset",array:"strokeDasharray"};function we(e,t,n,r,i){let{attrX:s,attrY:a,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:h=1,pathOffset:d=0,...f}=t;if(oe(e,f,n,i),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:g}=e;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(void 0!==l||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){return`${ge(t,e.x,e.width)} ${ge(n,e.y,e.height)}`}(g,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==s&&(p.x=s),void 0!==a&&(p.y=a),void 0!==o&&(p.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=i?ye:ve;e[s.offset]=te.transform(-r);const a=te.transform(t),o=te.transform(n);e[s.array]=`${a} ${o}`}(p,u,h,d,!1)}const be=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),xe=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Se(e,t,n,i){const s=(0,r.useMemo)(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return we(n,t,{enableHardwareAcceleration:!1},xe(i),e.transformTemplate),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};ce(t,e.style,e),s.style={...t,...s.style}}return s}function ke(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,i,s,a)=>{let{latestValues:o}=s;const l=(P(t)?Se:he)(n,o,a,t),c=function(e,t,n){const r={};for(const i in e)"values"===i&&"object"===typeof e.values||(pe(i)||!0===n&&fe(i)||!t&&!fe(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(n,"string"===typeof t,e),u={...c,...l,ref:i},{children:h}=n,d=(0,r.useMemo)(()=>L(h)?h.get():h,[h]);return(0,r.createElement)(t,{...u,children:d})}}function Ee(e,t,n,r){let{style:i,vars:s}=t;Object.assign(e.style,i,r&&r.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}const _e=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Te(e,t,n,r){Ee(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(_e.has(i)?i:h(i),t.attrs[i])}function Ce(e,t){const{style:n}=e,r={};for(const i in n)(L(n[i])||t.style&&L(t.style[i])||M(i,e))&&(r[i]=n[i]);return r}function Ie(e,t){const n=Ce(e,t);for(const r in e)if(L(e[r])||L(t[r])){n[-1!==D.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function Ne(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}function Ae(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Pe=e=>Array.isArray(e),Re=e=>Pe(e)?e[e.length-1]||0:e;function De(e){const t=L(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const je=e=>(t,n)=>{const i=(0,r.useContext)(a),s=(0,r.useContext)(o),l=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:i,createRenderState:s,onMount:a}=e;const o={latestValues:Me(t,n,r,i),renderState:s()};return a&&(o.mount=e=>a(t,e,o)),o}(e,t,i,s);return n?l():Ae(l)};function Me(e,t,n,r){const i={},s=r(e,{});for(const d in s)i[d]=De(s[d]);let{initial:a,animate:o}=e;const l=v(e),c=w(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const h=u?o:a;if(h&&"boolean"!==typeof h&&!m(h)){(Array.isArray(h)?h:[h]).forEach(t=>{const n=Ne(e,t);if(!n)return;const{transitionEnd:r,transition:s,...a}=n;for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[e]=t)}for(const e in r)i[e]=r[e]})}return i}const Le=e=>e;class Oe{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const Fe=["prepare","read","update","preRender","render","postRender"];const{schedule:Ve,cancel:Ue,state:ze,steps:Be}=function(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Fe.reduce((e,t)=>(e[t]=function(e){let t=new Oe,n=new Oe,r=0,i=!1,s=!1;const a=new WeakSet,o={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,o=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),o.add(e)&&s&&i&&(r=t.order.length),e},cancel:e=>{n.remove(e),a.delete(e)},process:l=>{if(i)s=!0;else{if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),a.has(r)&&(o.schedule(r),e())}i=!1,s&&(s=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),a=e=>s[e].process(i),o=()=>{const s=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,Fe.forEach(a),i.isProcessing=!1,n&&t&&(r=!1,e(o))},l=Fe.reduce((t,a)=>{const l=s[a];return t[a]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,i.isProcessing||e(o)),l.schedule(t,s,a)},t},{});return{schedule:l,cancel:e=>Fe.forEach(t=>s[t].cancel(e)),state:i,steps:s}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Le,!0),$e={useVisualState:je({scrapeMotionValuesFromProps:Ie,createRenderState:be,onMount:(e,t,n)=>{let{renderState:r,latestValues:i}=n;Ve.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}}),Ve.render(()=>{we(r,i,{enableHardwareAcceleration:!1},xe(t.tagName),e.transformTemplate),Te(t,r)})}})},He={useVisualState:je({scrapeMotionValuesFromProps:Ce,createRenderState:le})};function qe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const We=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Ge(e,t,n,r){return qe(e,t,(e=>t=>We(t)&&e(t,Ke(t)))(n),r)}const Qe=(e,t)=>n=>t(e(n)),Ye=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Qe)};function Xe(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const Je=Xe("dragHorizontal"),Ze=Xe("dragVertical");function et(e){let t=!1;if("y"===e)t=Ze();else if("x"===e)t=Je();else{const e=Je(),n=Ze();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function tt(){const e=et(!0);return!e||(e(),!1)}class nt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rt(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Ge(e.current,n,(n,i)=>{if("touch"===n.pointerType||tt())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[r]&&Ve.update(()=>s[r](n,i))},{passive:!e.getProps()[r]})}const it=(e,t)=>!!t&&(e===t||it(e,t.parentElement));function st(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ke(n))}const at=new WeakMap,ot=new WeakMap,lt=e=>{const t=at.get(e.target);t&&t(e)},ct=e=>{e.forEach(lt)};function ut(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;ot.has(r)||ot.set(r,{});const i=ot.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(ct,{root:t,...n})),i[s]}(t);return at.set(e,n),r.observe(e),()=>{at.delete(e),r.unobserve(e)}}const ht={some:0,all:1};const dt={inView:{Feature:class extends nt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:ht[r]};return ut(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=t?n:r;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends nt{constructor(){super(...arguments),this.removeStartListeners=Le,this.removeEndListeners=Le,this.removeAccessibleListeners=Le,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Ge(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps();Ve.update(()=>{i||it(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),i=Ge(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ye(r,i),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=qe(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=qe(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&st("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&Ve.update(()=>n(e,t))})}),st("down",(e,t)=>{this.startPress(e,t)})}),t=qe(this.node.current,"blur",()=>{this.isPressing&&st("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Ye(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ve.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tt()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ve.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Ge(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=qe(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ye(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends nt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ye(qe(this.node.current,"focus",()=>this.onFocus()),qe(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends nt{mount(){this.unmount=Ye(rt(this.node,!0),rt(this.node,!1))}unmount(){}}}};function ft(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function pt(e,t,n){const r=e.getProps();return Ne(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}let mt=Le,gt=Le;const yt=e=>1e3*e,vt=e=>e/1e3,wt=!1,bt=e=>Array.isArray(e)&&"number"===typeof e[0];function xt(e){return Boolean(!e||"string"===typeof e&&kt[e]||bt(e)||Array.isArray(e)&&e.every(xt))}const St=e=>{let[t,n,r,i]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${i})`},kt={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:St([0,.65,.55,1]),circOut:St([.55,0,1,.45]),backIn:St([.31,.01,.66,-.59]),backOut:St([.33,1.53,.69,.99])};function Et(e){if(e)return bt(e)?St(e):Array.isArray(e)?e.map(Et):kt[e]}const _t=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Tt(e,t,n,r){if(e===t&&n===r)return Le;const i=t=>function(e,t,n,r,i){let s,a,o=0;do{a=t+(n-t)/2,s=_t(a,r,i)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:_t(i(e),t,r)}const Ct=Tt(.42,0,1,1),It=Tt(0,0,.58,1),Nt=Tt(.42,0,.58,1),At=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Pt=e=>t=>1-e(1-t),Rt=e=>1-Math.sin(Math.acos(e)),Dt=Pt(Rt),jt=At(Rt),Mt=Tt(.33,1.53,.69,.99),Lt=Pt(Mt),Ot=At(Lt),Ft={linear:Le,easeIn:Ct,easeInOut:Nt,easeOut:It,circIn:Rt,circInOut:jt,circOut:Dt,backIn:Lt,backInOut:Ot,backOut:Mt,anticipate:e=>(e*=2)<1?.5*Lt(e):.5*(2-Math.pow(2,-10*(e-1)))},Vt=e=>{if(Array.isArray(e)){gt(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,i]=e;return Tt(t,n,r,i)}return"string"===typeof e?(gt(void 0!==Ft[e],`Invalid easing type '${e}'`),Ft[e]):e},Ut=(e,t)=>n=>Boolean(X(n)&&Y.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),zt=(e,t,n)=>r=>{if(!X(r))return r;const[i,s,a,o]=r.match(G);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},Bt={...H,transform:e=>Math.round((e=>$(0,255,e))(e))},$t={test:Ut("rgb","red"),parse:zt("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+Bt.transform(t)+", "+Bt.transform(n)+", "+Bt.transform(r)+", "+K(q.transform(i))+")"}};const Ht={test:Ut("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:$t.transform},qt={test:Ut("hsl","hue"),parse:zt("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+ee.transform(K(n))+", "+ee.transform(K(r))+", "+K(q.transform(i))+")"}},Wt={test:e=>$t.test(e)||Ht.test(e)||qt.test(e),parse:e=>$t.test(e)?$t.parse(e):qt.test(e)?qt.parse(e):Ht.parse(e),transform:e=>X(e)?e:e.hasOwnProperty("red")?$t.transform(e):qt.transform(e)},Kt=(e,t,n)=>-n*e+n*t+e;function Gt(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Qt=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Yt=[Ht,$t,qt];function Xt(e){const t=(n=e,Yt.find(e=>e.test(n)));var n;gt(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let r=t.parse(e);return t===qt&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,a=0,o=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=Gt(i,e,t+1/3),a=Gt(i,e,t),o=Gt(i,e,t-1/3)}else s=a=o=r;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*o),alpha:i}}(r)),r}const Jt=(e,t)=>{const n=Xt(e),r=Xt(t),i={...n};return e=>(i.red=Qt(n.red,r.red,e),i.green=Qt(n.green,r.green,e),i.blue=Qt(n.blue,r.blue,e),i.alpha=Kt(n.alpha,r.alpha,e),$t.transform(i))};const Zt={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Le},en={regex:Q,countKey:"Colors",token:"${c}",parse:Wt.parse},tn={regex:G,countKey:"Numbers",token:"${n}",parse:H.parse};function nn(e,t){let{regex:n,countKey:r,token:i,parse:s}=t;const a=e.tokenised.match(n);a&&(e["num"+r]=a.length,e.tokenised=e.tokenised.replace(n,i),e.values.push(...a.map(s)))}function rn(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&nn(n,Zt),nn(n,en),nn(n,tn),n}function sn(e){return rn(e).values}function an(e){const{values:t,numColors:n,numVars:r,tokenised:i}=rn(e),s=t.length;return e=>{let t=i;for(let i=0;i<s;i++)t=i<r?t.replace(Zt.token,e[i]):i<r+n?t.replace(en.token,Wt.transform(e[i])):t.replace(tn.token,K(e[i]));return t}}const on=e=>"number"===typeof e?0:e;const ln={test:function(e){var t,n;return isNaN(e)&&X(e)&&((null===(t=e.match(G))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Q))||void 0===n?void 0:n.length)||0)>0},parse:sn,createTransformer:an,getAnimatableNone:function(e){const t=sn(e);return an(e)(t.map(on))}},cn=(e,t)=>n=>`${n>0?t:e}`;function un(e,t){return"number"===typeof e?n=>Kt(e,t,n):Wt.test(e)?Jt(e,t):e.startsWith("var(")?cn(e,t):fn(e,t)}const hn=(e,t)=>{const n=[...e],r=n.length,i=e.map((e,n)=>un(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},dn=(e,t)=>{const n={...e,...t},r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=un(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}},fn=(e,t)=>{const n=ln.createTransformer(t),r=rn(e),i=rn(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Ye(hn(r.values,i.values),n):(mt(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),cn(e,t))},pn=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},mn=(e,t)=>n=>Kt(e,t,n);function gn(e,t,n){const r=[],i=n||("number"===typeof(s=e[0])?mn:"string"===typeof s?Wt.test(s)?Jt:fn:Array.isArray(s)?hn:"object"===typeof s?dn:mn);var s;const a=e.length-1;for(let o=0;o<a;o++){let n=i(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||Le:t;n=Ye(e,n)}r.push(n)}return r}function yn(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(gt(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=gn(t,r,i),o=a.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=pn(e[n],e[n+1],t);return a[n](r)};return n?t=>l($(e[0],e[s-1],t)):l}function vn(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=pn(0,t,r);e.push(Kt(n,1,i))}}(t,e.length-1),t}function wn(e){let{duration:t=300,keyframes:n,times:r,ease:i="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(i)?i.map(Vt):Vt(i),a={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:vn(n),t),l=yn(o,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||Nt).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}function bn(e,t){return t?e*(1e3/t):0}function xn(e,t,n){const r=Math.max(t-5,0);return bn(n-e(r),t-r)}const Sn=.001;function kn(e){let t,n,{duration:r=800,bounce:i=.25,velocity:s=0,mass:a=1}=e;mt(r<=yt(10),"Spring duration must be 10 seconds or less");let o=1-i;o=$(.05,1,o),r=$(.01,10,vt(r)),o<1?(t=e=>{const t=e*o,n=t*r,i=t-s,a=_n(e,o),l=Math.exp(-n);return Sn-i/a*l},n=e=>{const n=e*o*r,i=n*s+s,a=Math.pow(o,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=_n(Math.pow(e,2),o);return(-t(e)+Sn>0?-1:1)*((i-a)*l)/c}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const l=function(e,t,n){let r=n;for(let i=1;i<En;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=yt(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:r}}}const En=12;function _n(e,t){return e*Math.sqrt(1-t*t)}const Tn=["duration","bounce"],Cn=["stiffness","damping","mass"];function In(e,t){return t.some(t=>void 0!==e[t])}function Nn(e){let{keyframes:t,restDelta:n,restSpeed:r,...i}=e;const s=t[0],a=t[t.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!In(e,Cn)&&In(e,Tn)){const n=kn(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}({...i,velocity:-vt(i.velocity||0)}),p=d||0,m=c/(2*Math.sqrt(l*u)),g=a-s,y=vt(Math.sqrt(l/u)),v=Math.abs(g)<5;let w;if(r||(r=v?.01:2),n||(n=v?.005:.5),m<1){const e=_n(y,m);w=t=>{const n=Math.exp(-m*y*t);return a-n*((p+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)w=e=>a-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(m*m-1);w=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return a-n*((p+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:f&&h||null,next:e=>{const t=w(e);if(f)o.done=e>=h;else{let i=p;0!==e&&(i=m<1?xn(w,e,t):0);const s=Math.abs(i)<=r,l=Math.abs(a-t)<=n;o.done=s&&l}return o.value=o.done?a:t,o}}}function An(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}=e;const d=t[0],f={done:!1,value:d},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=d+m,y=void 0===o?g:o(g);y!==g&&(m=y-d);const v=e=>-m*Math.exp(-e/i),w=e=>y+v(e),b=e=>{const t=v(e),n=w(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let x,S;const k=e=>{var t;(t=f.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(x=e,S=Nn({keyframes:[f.value,p(f.value)],velocity:xn(w,e,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:h}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==x||(t=!0,b(e),k(e)),void 0!==x&&e>x?S.next(e-x):(!t&&b(e),f)}}}const Pn=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>Ve.update(t,!0),stop:()=>Ue(t),now:()=>ze.isProcessing?ze.timestamp:performance.now()}};function Rn(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const Dn={decay:An,inertia:An,tween:wn,keyframes:wn,spring:Nn};function jn(e){let t,n,{autoplay:r=!0,delay:i=0,driver:s=Pn,keyframes:a,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:h,onStop:d,onComplete:f,onUpdate:p,...m}=e,g=1,y=!1;const v=()=>{n=new Promise(e=>{t=e})};let w;v();const b=Dn[o]||wn;let x;b!==wn&&"number"!==typeof a[0]&&(x=yn([0,100],a,{clamp:!1}),a=[0,100]);const S=b({...m,keyframes:a});let k;"mirror"===u&&(k=b({...m,keyframes:[...a].reverse(),velocity:-(m.velocity||0)}));let E="idle",_=null,T=null,C=null;null===S.calculatedDuration&&l&&(S.calculatedDuration=Rn(S));const{calculatedDuration:I}=S;let N=1/0,A=1/0;null!==I&&(N=I+c,A=N*(l+1)-c);let P=0;const R=e=>{if(null===T)return;g>0&&(T=Math.min(T,e)),g<0&&(T=Math.min(e-A/g,T)),P=null!==_?_:Math.round(e-T)*g;const t=P-i*(g>=0?1:-1),n=g>=0?t<0:t>A;P=Math.max(t,0),"finished"===E&&null===_&&(P=A);let r=P,s=S;if(l){const e=Math.min(P,A)/N;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===u?(n=1-n,c&&(n-=c/N)):"mirror"===u&&(s=k)),r=$(0,1,n)*N}const o=n?{done:!1,value:a[0]}:s.next(r);x&&(o.value=x(o.value));let{done:h}=o;n||null===I||(h=g>=0?P>=A:P<=0);const d=null===_&&("finished"===E||"running"===E&&h);return p&&p(o.value),d&&M(),o},D=()=>{w&&w.stop(),w=void 0},j=()=>{E="idle",D(),t(),v(),T=C=null},M=()=>{E="finished",f&&f(),D(),t()},L=()=>{if(y)return;w||(w=s(R));const e=w.now();h&&h(),null!==_?T=e-_:T&&"finished"!==E||(T=e),"finished"===E&&v(),C=T,_=null,E="running",w.start()};r&&L();const O={then:(e,t)=>n.then(e,t),get time(){return vt(P)},set time(e){e=yt(e),P=e,null===_&&w&&0!==g?T=w.now()-e/g:_=e},get duration(){const e=null===S.calculatedDuration?Rn(S):S.calculatedDuration;return vt(e)},get speed(){return g},set speed(e){e!==g&&w&&(g=e,O.time=vt(P))},get state(){return E},play:L,pause:()=>{E="paused",_=P},stop:()=>{y=!0,"idle"!==E&&(E="idle",d&&d(),j())},cancel:()=>{null!==C&&R(C),j()},complete:()=>{E="finished"},sample:e=>(T=0,R(e))};return O}const Mn=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ln=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function On(e,t,n){let{onUpdate:r,onComplete:i,...s}=n;if(!(Mn()&&Ln.has(t)&&!s.repeatDelay&&"mirror"!==s.repeatType&&0!==s.damping&&"inertia"!==s.type))return!1;let a,o,l=!1,c=!1;const u=()=>{o=new Promise(e=>{a=e})};u();let{keyframes:h,duration:d=300,ease:f,times:p}=s;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!xt(t.ease))(t,s)){const e=jn({...s,repeat:0,delay:0});let t={done:!1,value:h[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;p=void 0,h=n,d=r-10,f="linear"}const m=function(e,t,n){let{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=Et(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}(e.owner.current,t,h,{...s,duration:d,ease:f,times:p}),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,Ve.update(g),a(),u()};m.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(h,s)),i&&i(),y())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(m.timeline=e,m.onfinish=null,Le),get time(){return vt(m.currentTime||0)},set time(e){m.currentTime=yt(e)},get speed(){return m.playbackRate},set speed(e){m.playbackRate=e},get duration(){return vt(d)},play:()=>{l||(m.play(),Ue(g))},pause:()=>m.pause(),stop:()=>{if(l=!0,"idle"===m.playState)return;const{currentTime:t}=m;if(t){const n=jn({...s,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}y()},complete:()=>{c||m.finish()},cancel:y}}const Fn={type:"spring",stiffness:500,damping:25,restSpeed:10},Vn={type:"keyframes",duration:.8},Un={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zn=(e,t)=>{let{keyframes:n}=t;return n.length>2?Vn:j.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Fn:Un},Bn=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!ln.test(t)&&"0"!==t||t.startsWith("url("))),$n=new Set(["brightness","contrast","saturate","opacity"]);function Hn(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(G)||[];if(!r)return e;const i=n.replace(r,"");let s=$n.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const qn=/([a-z-]*)\(.*?\)/g,Wn={...ln,getAnimatableNone:e=>{const t=e.match(qn);return t?t.map(Hn).join(" "):e}},Kn={...ae,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:Wn,WebkitFilter:Wn},Gn=e=>Kn[e];function Qn(e,t){let n=Gn(e);return n!==Wn&&(n=ln),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Yn=e=>/^0[^.\s]+$/.test(e);function Xn(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Yn(e):void 0}function Jn(e,t){return e[t]||e.default||e}const Zn=!1,er=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{const s=Jn(r,e)||{},a=s.delay||r.delay||0;let{elapsed:o=0}=r;o-=yt(a);const l=function(e,t,n,r){const i=Bn(t,n);let s;s=Array.isArray(n)?[...n]:[null,n];const a=void 0!==r.from?r.from:e.get();let o;const l=[];for(let c=0;c<s.length;c++)null===s[c]&&(s[c]=0===c?a:s[c-1]),Xn(s[c])&&l.push(c),"string"===typeof s[c]&&"none"!==s[c]&&"0"!==s[c]&&(o=s[c]);if(i&&l.length&&o)for(let c=0;c<l.length;c++)s[l[c]]=Qn(t,o);return s}(t,e,n,s),c=l[0],u=l[l.length-1],h=Bn(e,c),d=Bn(e,u);mt(h===d,`You are trying to animate ${e} from "${c}" to "${u}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${u} via the \`style\` property.`);let f={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}=e;return!!Object.keys(h).length}(s)||(f={...f,...zn(e,f)}),f.duration&&(f.duration=yt(f.duration)),f.repeatDelay&&(f.repeatDelay=yt(f.repeatDelay)),!h||!d||wt||!1===s.type||Zn)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:i}=e;const s=()=>(r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Le,pause:Le,stop:Le,then:e=>(e(),Promise.resolve()),cancel:Le,complete:Le});return n?jn({keyframes:[0,1],duration:0,delay:n,onComplete:s}):s()}(wt?{...f,delay:0}:f);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=On(t,e,f);if(n)return n}return jn(f)}};function tr(e){return Boolean(L(e)&&e.add)}const nr=e=>/^\-?\d*\.?\d+$/.test(e);function rr(e,t){-1===e.indexOf(t)&&e.push(t)}function ir(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class sr{constructor(){this.subscriptions=[]}add(e){return rr(this.subscriptions,e),()=>ir(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ar={current:void 0};class or{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:i}=ze;t.lastUpdated!==i&&(t.timeDelta=r,t.lastUpdated=i,Ve.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>Ve.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sr);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ve.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return ar.current&&ar.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?bn(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lr(e,t){return new or(e,t)}const cr=e=>t=>t.test(e),ur=[H,te,ee,Z,re,ne,{test:e=>"auto"===e,parse:e=>e}],hr=e=>ur.find(cr(e)),dr=[...ur,Wt,ln],fr=e=>dr.find(cr(e));function pr(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,lr(n))}function mr(e,t){const n=pt(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const a in s){pr(e,a,Re(s[a]))}}function gr(e,t){if(!t)return;return(t[e]||t.default||t).from}function yr(e,t){let{protectedKeys:n,needsAnimating:r}=e;const i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}function vr(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function wr(e,t){let{delay:n=0,transitionOverride:r,type:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(s=r);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const h in o){const t=e.getValue(h),r=o[h];if(!t||void 0===r||u&&yr(u,h))continue;const i={delay:n,elapsed:0,...Jn(s||{},h)};if(window.HandoffAppearAnimations){const n=e.getProps()[d];if(n){const e=window.HandoffAppearAnimations(n,h,t,Ve);null!==e&&(i.elapsed=e,i.isHandoff=!0)}}let a=!i.isHandoff&&!vr(t,r);if("spring"===i.type&&(t.getVelocity()||i.velocity)&&(a=!1),t.animation&&(a=!1),a)continue;t.start(er(h,t,r,e.shouldReduceMotion&&j.has(h)?{type:!1}:i));const f=t.animation;tr(l)&&(l.add(h),f.then(()=>l.remove(h))),c.push(f)}return a&&Promise.all(c).then(()=>{a&&mr(e,a)}),c}function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=pt(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(wr(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const a=[],o=(e.variantChildren.size-1)*r,l=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(xr).forEach((e,r)=>{e.notify("AnimationStart",t),a.push(br(e,t,{...s,delay:n+l(r)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,s+r,a,o,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then(()=>t())}return Promise.all([s(),a(n.delay)])}function xr(e,t){return e.sortNodePosition(t)}const Sr=[...g].reverse(),kr=g.length;function Er(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>br(e,t,r));n=Promise.all(i)}else if("string"===typeof t)n=br(e,t,r);else{const i="function"===typeof t?pt(e,t,r.custom):t;n=Promise.all(wr(e,i,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function _r(e){let t=Er(e);const n={animate:Cr(!0),whileInView:Cr(),whileHover:Cr(),whileTap:Cr(),whileDrag:Cr(),whileFocus:Cr(),exit:Cr()};let r=!0;const i=(t,n)=>{const r=pt(e,n);if(r){const{transition:e,transitionEnd:n,...i}=r;t={...t,...i,...n}}return t};function s(s,a){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let h={},d=1/0;for(let t=0;t<kr;t++){const f=Sr[t],g=n[f],y=void 0!==o[f]?o[f]:l[f],v=p(y),w=f===a?g.isActive:null;!1===w&&(d=t);let b=y===l[f]&&y!==o[f]&&v;if(b&&r&&e.manuallyAnimateOnMount&&(b=!1),g.protectedKeys={...h},!g.isActive&&null===w||!y&&!g.prevProp||m(y)||"boolean"===typeof y)continue;let x=Tr(g.prevProp,y)||f===a&&g.isActive&&!b&&v||t>d&&v,S=!1;const k=Array.isArray(y)?y:[y];let E=k.reduce(i,{});!1===w&&(E={});const{prevResolvedValues:_={}}=g,T={..._,...E},C=e=>{x=!0,u.has(e)&&(S=!0,u.delete(e)),g.needsAnimating[e]=!0};for(const e in T){const t=E[e],n=_[e];if(h.hasOwnProperty(e))continue;let r=!1;r=Pe(t)&&Pe(n)?!ft(t,n):t!==n,r?void 0!==t?C(e):u.add(e):void 0!==t&&u.has(e)?C(e):g.protectedKeys[e]=!0}g.prevProp=y,g.prevResolvedValues=E,g.isActive&&(h={...h,...E}),r&&e.blockInitialAnimation&&(x=!1),!x||b&&!S||c.push(...k.map(e=>({animation:e,options:{type:f,...s}})))}if(u.size){const t={};u.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),c.push({animation:t})}let f=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(c):Promise.resolve()}return{animateChanges:s,setActive:function(t,r,i){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const o=s(i,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Tr(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!ft(t,e)}function Cr(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Ir=0;const Nr={animation:{Feature:class extends nt{constructor(e){super(e),e.animationState||(e.animationState=_r(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),m(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends nt{constructor(){super(...arguments),this.id=Ir++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},Ar=(e,t)=>Math.abs(e-t);class Pr{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=jr(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Ar(e.x,t.x),r=Ar(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:i}=ze;this.history.push({...r,timestamp:i});const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Rr(t,this.transformPagePoint),Ve.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=jr("pointercancel"===e.type?this.lastMoveEventInfo:Rr(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),r&&r(e,s)},!We(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const s=Rr(Ke(e),this.transformPagePoint),{point:a}=s,{timestamp:o}=ze;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,jr(s,this.history)),this.removeListeners=Ye(Ge(this.contextWindow,"pointermove",this.handlePointerMove),Ge(this.contextWindow,"pointerup",this.handlePointerUp),Ge(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ue(this.updatePoint)}}function Rr(e,t){return t?{point:t(e.point)}:e}function Dr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function jr(e,t){let{point:n}=e;return{point:n,delta:Dr(n,Lr(t)),offset:Dr(n,Mr(t)),velocity:Or(t,.1)}}function Mr(e){return e[0]}function Lr(e){return e[e.length-1]}function Or(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Lr(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>yt(t)));)n--;if(!r)return{x:0,y:0};const s=vt(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Fr(e){return e.max-e.min}function Vr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Ur(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Kt(t.min,t.max,e.origin),e.scale=Fr(n)/Fr(t),(Vr(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Kt(n.min,n.max,e.origin)-e.originPoint,(Vr(e.translate)||isNaN(e.translate))&&(e.translate=0)}function zr(e,t,n,r){Ur(e.x,t.x,n.x,r?r.originX:void 0),Ur(e.y,t.y,n.y,r?r.originY:void 0)}function Br(e,t,n){e.min=n.min+t.min,e.max=e.min+Fr(t)}function $r(e,t,n){e.min=t.min-n.min,e.max=e.min+Fr(t)}function Hr(e,t,n){$r(e.x,t.x,n.x),$r(e.y,t.y,n.y)}function qr(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Wr(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Kr=.35;function Gr(e,t,n){return{min:Qr(e,t),max:Qr(e,n)}}function Qr(e,t){return"number"===typeof e?e:e[t]||0}const Yr=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Xr(e){return[e("x"),e("y")]}function Jr(e){let{top:t,left:n,right:r,bottom:i}=e;return{x:{min:n,max:r},y:{min:t,max:i}}}function Zr(e){return void 0===e||1===e}function ei(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Zr(t)||!Zr(n)||!Zr(r)}function ti(e){return ei(e)||ni(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ni(e){return ri(e.x)||ri(e.y)}function ri(e){return e&&"0%"!==e}function ii(e,t,n){return n+t*(e-n)}function si(e,t,n,r,i){return void 0!==i&&(e=ii(e,i,r)),ii(e,n,r)+t}function ai(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=si(e.min,t,n,r,i),e.max=si(e.max,t,n,r,i)}function oi(e,t){let{x:n,y:r}=t;ai(e.x,n.translate,n.scale,n.originPoint),ai(e.y,r.translate,r.scale,r.originPoint)}function li(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ci(e,t){e.min=e.min+t,e.max=e.max+t}function ui(e,t,n){let[r,i,s]=n;const a=void 0!==t[s]?t[s]:.5,o=Kt(e.min,e.max,a);ai(e,t[r],t[i],o,t.scale)}const hi=["x","scaleX","originX"],di=["y","scaleY","originY"];function fi(e,t){ui(e.x,t,hi),ui(e.y,t,di)}function pi(e,t){return Jr(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const mi=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},gi=new WeakMap;class yi{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Pr(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Ke(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=et(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xr(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ee.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Fr(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&Ve.update(()=>i(e,t),!1,!0);const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Xr(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:mi(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Ve.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!vi(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:r,max:i}=t;return void 0!==r&&e<r?e=n?Kt(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Kt(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,i=this.constraints;t&&f(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:i,right:s}=t;return{x:qr(e.x,r,s),y:qr(e.y,n,i)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return!1===e?e=0:!0===e&&(e=Kr),{x:Gr(e,"left","right"),y:Gr(e,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Xr(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!f(e))return!1;const n=e.current;gt(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(e,t,n){const r=pi(e,n),{scroll:i}=t;return i&&(ci(r.x,i.offset.x),ci(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:Wr(e.x,t.x),y:Wr(e.y,t.y)}}(r.layout.layoutBox,i);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=Jr(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=Xr(a=>{if(!vi(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,h)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(er(e,n,0,t))}stopAnimation(){Xr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xr(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Xr(t=>{const{drag:n}=this.getProps();if(!vi(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[t];i.set(e[t]-Kt(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!f(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Xr(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=Fr(e),i=Fr(t);return i>r?n=pn(t.min,t.max-r,e.min):r>i&&(n=pn(e.min,e.max-i,t.min)),$(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xr(t=>{if(!vi(t,e,null))return;const n=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];n.set(Kt(i,s,r[t]))})}addListeners(){if(!this.visualElement.current)return;gi.set(this.visualElement,this);const e=Ge(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();f(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const i=qe(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Xr(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),e(),r(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=Kr,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function vi(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const wi=e=>(t,n)=>{e&&Ve.update(()=>e(t,n))};const bi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xi(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Si={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!te.test(e))return e;e=parseFloat(e)}return`${xi(e,t.target.x)}% ${xi(e,t.target.y)}%`}},ki={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const i=e,s=ln.parse(e);if(s.length>5)return i;const a=ln.createTransformer(e),o="number"!==typeof s[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const u=Kt(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=u),"number"===typeof s[3+o]&&(s[3+o]/=u),a(s)}};class Ei extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;var s;s=Ti,Object.assign(R,s),i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||Ve.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _i(e){const[t,n]=function(){const e=(0,r.useContext)(o);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=(0,r.useId)();return(0,r.useEffect)(()=>i(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}(),i=(0,r.useContext)(E);return r.createElement(Ei,{...e,layoutGroup:i,switchLayoutGroup:(0,r.useContext)(_),isPresent:t,safeToRemove:n})}const Ti={borderRadius:{...Si,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Si,borderTopRightRadius:Si,borderBottomLeftRadius:Si,borderBottomRightRadius:Si,boxShadow:ki},Ci=["TopLeft","TopRight","BottomLeft","BottomRight"],Ii=Ci.length,Ni=e=>"string"===typeof e?parseFloat(e):e,Ai=e=>"number"===typeof e||te.test(e);function Pi(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Ri=ji(0,.5,Dt),Di=ji(.5,.95,Le);function ji(e,t,n){return r=>r<e?0:r>t?1:n(pn(e,t,r))}function Mi(e,t){e.min=t.min,e.max=t.max}function Li(e,t){Mi(e.x,t.x),Mi(e.y,t.y)}function Oi(e,t,n,r,i){return e=ii(e-=t,1/n,r),void 0!==i&&(e=ii(e,1/i,r)),e}function Fi(e,t,n,r,i){let[s,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;ee.test(t)&&(t=parseFloat(t),t=Kt(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=Kt(s.min,s.max,r);e===s&&(o-=t),e.min=Oi(e.min,t,n,o,i),e.max=Oi(e.max,t,n,o,i)}(e,t[s],t[a],t[o],t.scale,r,i)}const Vi=["x","scaleX","originX"],Ui=["y","scaleY","originY"];function zi(e,t,n,r){Fi(e.x,t,Vi,n?n.x:void 0,r?r.x:void 0),Fi(e.y,t,Ui,n?n.y:void 0,r?r.y:void 0)}function Bi(e){return 0===e.translate&&1===e.scale}function $i(e){return Bi(e.x)&&Bi(e.y)}function Hi(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function qi(e){return Fr(e.x)/Fr(e.y)}class Wi{constructor(){this.members=[]}add(e){rr(this.members,e),e.scheduleRender()}remove(e){if(ir(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ki(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:e,rotateX:t,rotateY:i}=n;e&&(r+=`rotate(${e}deg) `),t&&(r+=`rotateX(${t}deg) `),i&&(r+=`rotateY(${i}deg) `)}const a=e.x.scale*t.x,o=e.y.scale*t.y;return 1===a&&1===o||(r+=`scale(${a}, ${o})`),r||"none"}const Gi=(e,t)=>e.depth-t.depth;class Qi{constructor(){this.children=[],this.isDirty=!1}add(e){rr(this.children,e),this.isDirty=!0}remove(e){ir(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Gi),this.isDirty=!1,this.children.forEach(e)}}const Yi=["","X","Y","Z"],Xi={visibility:"hidden"};let Ji=0;const Zi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function es(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Ji++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,Zi.totalNodes=Zi.resolvedTargetDeltas=Zi.recalculatedProjection=0,this.nodes.forEach(rs),this.nodes.forEach(us),this.nodes.forEach(hs),this.nodes.forEach(is),e=Zi,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qi)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new sr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=i=>{let{timestamp:s}=i;const a=s-n;a>=t&&(Ue(r),e(a-t))};return Ve.read(r,!0),()=>Ue(r)}(r,250),bi.hasAnimatedSinceResize&&(bi.hasAnimatedSinceResize=!1,this.nodes.forEach(cs))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&a&&(i||s)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:i}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||ys,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!Hi(this.targetLayout,i)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...Jn(s,"layout"),onPlay:o,onComplete:l};(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||cs(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ue(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ds),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(as);this.isUpdating||this.nodes.forEach(os),this.isUpdating=!1,this.nodes.forEach(ls),this.nodes.forEach(ts),this.nodes.forEach(ns),this.clearAllSnapshots();const e=performance.now();ze.delta=$(0,1e3/60,e-ze.timestamp),ze.timestamp=e,ze.isProcessing=!0,Be.update.process(ze),Be.preRender.process(ze),Be.render.process(ze),ze.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ss),this.sharedNodes.forEach(fs)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!$i(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||ti(this.latestValues)||i)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),bs((r=n).x),bs(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(ci(t.x,n.offset.x),ci(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Li(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:i,options:s}=r;if(r!==this.root&&i&&s.layoutScroll){if(i.isRoot){Li(t,e);const{scroll:n}=this.root;n&&(ci(t.x,-n.offset.x),ci(t.y,-n.offset.y))}ci(t.x,i.offset.x),ci(t.y,i.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Li(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&fi(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),ti(e.latestValues)&&fi(n,e.latestValues)}return ti(this.latestValues)&&fi(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Li(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!ti(e.latestValues))continue;ei(e.latestValues)&&e.updateSnapshot();const r=Yr();Li(r,e.measurePageBox()),zi(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return ti(this.latestValues)&&zi(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ze.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=ze.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Hr(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,Br(a.x,o.x,l.x),Br(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Li(this.target,this.layout.layoutBox),oi(this.target,this.targetDelta)):Li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Hr(this.relativeTargetOrigin,this.target,e.target),Li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!ei(this.parent.latestValues)&&!ni(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===ze.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;Li(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=n.length;if(!i)return;let s,a;t.x=t.y=1;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const i=s.instance;i&&i.style&&"contents"===i.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&fi(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,oi(e,a)),r&&ti(s.latestValues)&&fi(e,s.latestValues))}t.x=li(t.x),t.y=li(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;zr(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Ki(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Zi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(gs));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,d,f,p,m,g;ps(s.x,e.x,n),ps(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hr(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,p=this.relativeTargetOrigin,m=a,g=n,ms(f.x,p.x,m.x,g),ms(f.y,p.y,m.y,g),h&&(l=this.relativeTarget,d=h,l.x.min===d.x.min&&l.x.max===d.x.max&&l.y.min===d.y.min&&l.y.max===d.y.max)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),Li(h,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,n,r,i,s){i?(e.opacity=Kt(0,void 0!==n.opacity?n.opacity:1,Ri(r)),e.opacityExit=Kt(void 0!==t.opacity?t.opacity:1,0,Di(r))):s&&(e.opacity=Kt(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let a=0;a<Ii;a++){const i=`border${Ci[a]}Radius`;let s=Pi(t,i),o=Pi(n,i);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||Ai(s)===Ai(o)?(e[i]=Math.max(Kt(Ni(s),Ni(o),r),0),(ee.test(o)||ee.test(s))&&(e[i]+="%")):e[i]=o)}(t.rotate||n.rotate)&&(e.rotate=Kt(t.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ue(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ve.update(()=>{bi.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=L(e)?e:lr(e);return r.start(er("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&xs(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Fr(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Fr(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Li(t,n),fi(t,i),zr(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Wi);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let i=0;i<Yi.length;i++){const t="rotate"+Yi[i];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const i in r)e.setStaticValue(i,r[i]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Xi;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=De(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=De(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!ti(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}const a=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=Ki(this.projectionDeltaWithTransform,this.treeScale,a),i&&(r.transform=i(a,r.transform));const{x:o,y:l}=this.projectionDelta;r.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:r.opacity=s===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in R){if(void 0===a[c])continue;const{correct:e,applyTo:t}=R[c],n="none"===r.transform?a[c]:e(a[c],s);if(t){const e=t.length;for(let i=0;i<e;i++)r[t[i]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=s===this?De(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(as),this.root.sharedNodes.clear()}}}function ts(e){e.updateLayout()}function ns(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:i}=e.options,s=n.source!==e.layout.source;"size"===i?Xr(e=>{const r=s?n.measuredBox[e]:n.layoutBox[e],i=Fr(r);r.min=t[e].min,r.max=r.min+i}):xs(i,n.layoutBox,t)&&Xr(r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],a=Fr(t[r]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};zr(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?zr(o,e.applyTransform(r,!0),n.measuredBox):zr(o,t,n.layoutBox);const l=!$i(a);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};Hr(a,n.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Hr(o,t,s.layoutBox),Hi(a,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function rs(e){Zi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function is(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ss(e){e.clearSnapshot()}function as(e){e.clearMeasurements()}function os(e){e.isLayoutDirty=!1}function ls(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function cs(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function us(e){e.resolveTargetDelta()}function hs(e){e.calcProjection()}function ds(e){e.resetRotation()}function fs(e){e.removeLeadSnapshot()}function ps(e,t,n){e.translate=Kt(t.translate,0,n),e.scale=Kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ms(e,t,n,r){e.min=Kt(t.min,n.min,r),e.max=Kt(t.max,n.max,r)}function gs(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const ys={duration:.45,ease:[.4,0,.1,1]},vs=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),ws=vs("applewebkit/")&&!vs("chrome/")?Math.round:Le;function bs(e){e.min=ws(e.min),e.max=ws(e.max)}function xs(e,t,n){return"position"===e||"preserve-aspect"===e&&!Vr(qi(t),qi(n),.2)}const Ss=es({attachResizeListener:(e,t)=>qe(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ks={current:void 0},Es=es({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ks.current){const e=new Ss({});e.mount(window),e.setOptions({layoutScroll:!0}),ks.current=e}return ks.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),_s={pan:{Feature:class extends nt{constructor(){super(...arguments),this.removePointerDownListener=Le}onPointerDown(e){this.session=new Pr(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mi(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:wi(e),onStart:wi(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Ve.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=Ge(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends nt{constructor(e){super(e),this.removeGroupControls=Le,this.removeListeners=Le,this.controls=new yi(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Le}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Es,MeasureLayout:_i}},Ts=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;gt(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,i]=function(e){const t=Ts.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const e=s.trim();return nr(e)?parseFloat(e):e}return z(i)?Cs(i,t,n+1):i}const Is=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ns=e=>Is.has(e),As=e=>e===H||e===te,Ps=(e,t)=>parseFloat(e.split(", ")[t]),Rs=(e,t)=>(n,r)=>{let{transform:i}=r;if("none"===i||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/);if(s)return Ps(s[1],t);{const t=i.match(/^matrix\((.+)\)$/);return t?Ps(t[1],e):0}},Ds=new Set(["x","y","z"]),js=D.filter(e=>!Ds.has(e));const Ms={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:i="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(i)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:Rs(4,13),y:Rs(5,14)};Ms.translateX=Ms.x,Ms.translateY=Ms.y;const Ls=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},r={...r};const i=Object.keys(t).filter(Ns);let s=[],a=!1;const o=[];if(i.forEach(i=>{const l=e.getValue(i);if(!e.hasValue(i))return;let c=n[i],u=hr(c);const h=t[i];let d;if(Pe(h)){const e=h.length,t=null===h[0]?1:0;c=h[t],u=hr(c);for(let n=t;n<e&&null!==h[n];n++)d?gt(hr(h[n])===d,"All keyframes must be of the same type"):(d=hr(h[n]),gt(d===u||As(u)&&As(d),"Keyframes must be of the same dimension as the current value"))}else d=hr(h);if(u!==d)if(As(u)&&As(d)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&d===te&&(t[i]=h.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===d||void 0===d?void 0:d.transform)&&(0===c||0===h)?0===c?l.set(d.transform(c)):t[i]=u.transform(h):(a||(s=function(e){const t=[];return js.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),a=!0),o.push(i),r[i]=void 0!==r[i]?r[i]:t[i],l.jump(h))}),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,i=((e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:a}=s,o={};"none"===a&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{o[e]=Ms[e](r,s)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(o[n]),e[n]=Ms[n](l,s)}),e})(t,e,o);return s.length&&s.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),l&&null!==n&&window.scrollTo({top:n}),{target:i,transitionEnd:r}}return{target:t,transitionEnd:r}};function Os(e,t,n,r){return(e=>Object.keys(e).some(Ns))(t)?Ls(e,t,n,r):{target:t,transitionEnd:r}}const Fs=(e,t,n,r)=>{const i=function(e,t,n){let{...r}=t;const i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),e.values.forEach(e=>{const t=e.get();if(!z(t))return;const n=Cs(t,i);n&&e.set(n)});for(const s in r){const e=r[s];if(!z(e))continue;const t=Cs(e,i);t&&(r[s]=t,n||(n={}),void 0===n[s]&&(n[s]=e))}return{target:r,transitionEnd:n}}(e,t,r);return Os(e,t=i.target,n,r=i.transitionEnd)},Vs={current:null},Us={current:!1};const zs=new WeakMap,Bs=Object.keys(k),$s=Bs.length,Hs=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],qs=y.length;class Ws{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ve.render(this.render,!1,!0);const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=n.initial?{...o}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=v(n),this.isVariantNode=w(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const e=u[h];void 0!==o[h]&&L(e)&&(e.set(o[h],!1),tr(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,zs.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Us.current||function(){if(Us.current=!0,l)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Vs.current=e.matches;e.addListener(t),t()}else Vs.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Vs.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){zs.delete(this.current),this.projection&&this.projection.unmount(),Ue(this.notifyUpdate),Ue(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=j.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ve.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),i()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let i,s,{children:a,...o}=e;for(let l=0;l<$s;l++){const e=Bs[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:a}=k[e];r&&(i=r),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),a&&(s=a))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:s,layoutScroll:a,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||s&&f(s),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:a,layoutRoot:l})}return s}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Hs.length;n++){const t=Hs[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],a=n[i];if(L(s))e.addValue(i,s),tr(r)&&r.add(i);else if(L(a))e.addValue(i,lr(s,{owner:e})),tr(r)&&r.remove(i);else if(a!==s)if(e.hasValue(i)){const t=e.getValue(i);!t.hasAnimated&&t.set(s)}else{const t=e.getStaticValue(i);e.addValue(i,lr(void 0!==t?t:s,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<qs;t++){const n=y[t],r=this.props[n];(p(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=lr(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=Ne(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,e);return void 0===i||L(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new sr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class Ks extends Ws{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:i,...s}=e,{transformValues:a}=t,o=function(e,t,n){const r={};for(const i in e){const e=gr(i,t);if(void 0!==e)r[i]=e;else{const e=n.getValue(i);e&&(r[i]=e.get())}}return r}(s,r||{},this);if(a&&(i&&(i=a(i)),s&&(s=a(s)),o&&(o=a(o))),n){!function(e,t,n){var r,i;const s=Object.keys(t).filter(t=>!e.hasValue(t)),a=s.length;if(a)for(let o=0;o<a;o++){const a=s[o],l=t[a];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(i=null!==(r=n[a])&&void 0!==r?r:e.readValue(a))&&void 0!==i?i:t[a]),void 0!==c&&null!==c&&("string"===typeof c&&(nr(c)||Yn(c))?c=parseFloat(c):!fr(c)&&ln.test(l)&&(c=Qn(a,l)),e.addValue(a,lr(c,{owner:e})),void 0===n[a]&&(n[a]=c),null!==c&&e.setBaseTarget(a,c))}}(this,s,o);const e=Fs(this,s,o,i);i=e.transitionEnd,s=e.target}return{transition:r,transitionEnd:i,...s}}}class Gs extends Ks{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(j.has(t)){const e=Gn(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),i=(U(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof i?i.trim():i}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return pi(e,n)}build(e,t,n,r){oe(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Ce(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;L(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(e,t,n,r){Ee(e,t,n,r)}}class Qs extends Ks{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(j.has(t)){const e=Gn(t);return e&&e.default||0}return t=_e.has(t)?t:h(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return Ie(e,t)}build(e,t,n,r){we(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){Te(e,t,0,r)}mount(e){this.isSVGTag=xe(e.tagName),super.mount(e)}}const Ys=(e,t)=>P(e)?new Qs(t,{enableHardwareAcceleration:!1}):new Gs(t,{enableHardwareAcceleration:!0}),Xs={...Nr,...dt,..._s,...{layout:{ProjectionNode:Es,MeasureLayout:_i}}},Js=N((e,t)=>function(e,t,n,r){let{forwardMotionProps:i=!1}=t;return{...P(e)?$e:He,preloadedFeatures:n,useRender:ke(i),createVisualElement:r,Component:e}}(e,t,Xs,Ys));function Zs(){const e=(0,r.useRef)(!1);return c(()=>(e.current=!0,()=>{e.current=!1}),[]),e}class ea extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ta(e){let{children:t,isPresent:n}=e;const i=(0,r.useId)(),s=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:o}=a.current;if(n||!s.current||!e||!t)return;s.current.dataset.motionPopId=i;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${i}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${r}px !important;\n            left: ${o}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}},[n]),r.createElement(ea,{isPresent:n,childRef:s,sizeRef:a},r.cloneElement(t,{ref:s}))}const na=e=>{let{children:t,initial:n,isPresent:i,onExitComplete:s,custom:a,presenceAffectsLayout:l,mode:c}=e;const u=Ae(ra),h=(0,r.useId)(),d=(0,r.useMemo)(()=>({id:h,initial:n,isPresent:i,custom:a,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;s&&s()},register:e=>(u.set(e,!1),()=>u.delete(e))}),l?void 0:[i]);return(0,r.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[i]),r.useEffect(()=>{!i&&!u.size&&s&&s()},[i]),"popLayout"===c&&(t=r.createElement(ta,{isPresent:i},t)),r.createElement(o.Provider,{value:d},t)};function ra(){return new Map}const ia=e=>e.key||"";const sa=e=>{let{children:t,custom:n,initial:i=!0,onExitComplete:s,exitBeforeEnter:a,presenceAffectsLayout:o=!0,mode:l="sync"}=e;gt(!a,"Replace exitBeforeEnter with mode='wait'");const u=(0,r.useContext)(E).forceRender||function(){const e=Zs(),[t,n]=(0,r.useState)(0),i=(0,r.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,r.useCallback)(()=>Ve.postRender(i),[i]),t]}()[0],h=Zs(),d=function(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(t);let f=d;const p=(0,r.useRef)(new Map).current,m=(0,r.useRef)(f),g=(0,r.useRef)(new Map).current,y=(0,r.useRef)(!0);var v;if(c(()=>{y.current=!1,function(e,t){e.forEach(e=>{const n=ia(e);t.set(n,e)})}(d,g),m.current=f}),v=()=>{y.current=!0,g.clear(),p.clear()},(0,r.useEffect)(()=>()=>v(),[]),y.current)return r.createElement(r.Fragment,null,f.map(e=>r.createElement(na,{key:ia(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:o,mode:l},e)));f=[...f];const w=m.current.map(ia),b=d.map(ia),x=w.length;for(let r=0;r<x;r++){const e=w[r];-1!==b.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(f=[]),p.forEach((e,t)=>{if(-1!==b.indexOf(t))return;const i=g.get(t);if(!i)return;const a=w.indexOf(t);let c=e;if(!c){const e=()=>{p.delete(t);const e=Array.from(g.keys()).filter(e=>!b.includes(e));if(e.forEach(e=>g.delete(e)),m.current=d.filter(n=>{const r=ia(n);return r===t||e.includes(r)}),!p.size){if(!1===h.current)return;u(),s&&s()}};c=r.createElement(na,{key:ia(i),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:o,mode:l},i),p.set(t,c)}f.splice(a,0,c)}),f=f.map(e=>{const t=e.key;return p.has(t)?e:r.createElement(na,{key:ia(e),isPresent:!0,presenceAffectsLayout:o,mode:l},e)}),r.createElement(r.Fragment,null,p.size?f:f.map(e=>(0,r.cloneElement)(e)))};var aa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var oa=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:s="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c,...u}=n;return(0,r.createElement)("svg",{ref:i,...aa,width:a,height:a,stroke:s,strokeWidth:l?24*Number(o)/Number(a):o,className:`lucide lucide-${h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...u},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var h});return n.displayName=`${e}`,n};const la=oa("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ca=oa("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ua=oa("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),ha=oa("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),da=oa("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),fa=oa("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),pa=oa("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ma=oa("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ga=oa("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ya=oa("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),va=oa("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),wa=oa("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);var ba=n(579);const xa=oa("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Sa=oa("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ka=oa("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ea=e=>{let{text:t,children:n}=e;const[i,s]=(0,r.useState)(!1);return(0,ba.jsxs)("div",{className:"relative inline-block",children:[(0,ba.jsx)("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onClick:()=>s(!i),children:n||(0,ba.jsx)(ka,{className:"w-4 h-4 text-gray-400 cursor-help"})}),i&&(0,ba.jsxs)("div",{className:"absolute z-50 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg whitespace-nowrap",children:[t,(0,ba.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})},_a=e=>{let{mood:t="happy",message:n,size:i="md"}=e;const[s,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),c={sm:60,md:80,lg:120}[i];(0,r.useEffect)(()=>{const e=setInterval(()=>{a(!0),setTimeout(()=>a(!1),200)},3e3+2e3*Math.random()),t=setInterval(()=>{l(!0),setTimeout(()=>l(!1),500)},5e3+3e3*Math.random());return()=>{clearInterval(e),clearInterval(t)}},[]);const u={happy:{color:"#10B981",eyeY:0,mouthPath:"M 30 45 Q 40 55 50 45",bounce:!0},excited:{color:"#F59E0B",eyeY:-2,mouthPath:"M 25 40 Q 40 60 55 40",bounce:!0},thinking:{color:"#3B82F6",eyeY:-5,mouthPath:"M 35 50 L 45 50",bounce:!1},sad:{color:"#6B7280",eyeY:2,mouthPath:"M 30 55 Q 40 45 50 55",bounce:!1},celebrating:{color:"#8B5CF6",eyeY:-3,mouthPath:"M 25 40 Q 40 65 55 40",bounce:!0}},h=u[t]||u.happy;return(0,ba.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ba.jsx)(Js.div,{animate:h.bounce?{y:[0,-10,0],rotate:[0,5,-5,0]}:o?{rotate:[0,-3,3,0]}:{},transition:{duration:h.bounce?.6:2,repeat:h.bounce?1/0:0,repeatDelay:h.bounce?2:0},children:(0,ba.jsxs)("svg",{width:c,height:c,viewBox:"0 0 80 80",children:[(0,ba.jsx)(Js.circle,{cx:"40",cy:"40",r:"35",fill:h.color,animate:{scale:h.bounce?[1,1.05,1]:1},transition:{duration:.6,repeat:h.bounce?1/0:0}}),(0,ba.jsx)(Js.ellipse,{cx:"30",cy:25+h.eyeY,rx:"4",ry:s?1:6,fill:"white",animate:{scaleY:s?.1:1}}),(0,ba.jsx)(Js.ellipse,{cx:"50",cy:25+h.eyeY,rx:"4",ry:s?1:6,fill:"white",animate:{scaleY:s?.1:1}}),!s&&(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)("circle",{cx:"30",cy:27+h.eyeY,r:"2",fill:"#1F2937"}),(0,ba.jsx)("circle",{cx:"50",cy:27+h.eyeY,r:"2",fill:"#1F2937"})]}),(0,ba.jsx)(Js.path,{d:h.mouthPath,stroke:"white",strokeWidth:"3",fill:"none",strokeLinecap:"round",animate:"celebrating"===t?{scale:[1,1.1,1]}:{},transition:{duration:.3,repeat:"celebrating"===t?1/0:0}}),"celebrating"===t&&(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)(Js.circle,{cx:"15",cy:"15",r:"2",fill:"#FCD34D",animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:1,repeat:1/0}}),(0,ba.jsx)(Js.circle,{cx:"65",cy:"20",r:"2",fill:"#FCD34D",animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:1,repeat:1/0,delay:.3}}),(0,ba.jsx)(Js.circle,{cx:"70",cy:"50",r:"2",fill:"#FCD34D",animate:{opacity:[0,1,0],scale:[0,1,0]},transition:{duration:1,repeat:1/0,delay:.6}})]})]})}),(0,ba.jsx)(sa,{children:n&&(0,ba.jsx)(Js.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-2 bg-white px-4 py-2 rounded-full shadow-md text-sm font-medium text-gray-700",children:n})})]})},Ta=oa("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ca=oa("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ia="${JSCORE_VERSION}",Na=function(e,t){if(!e)throw Aa(t)},Aa=function(e){return new Error("Firebase Database ("+Ia+") INTERNAL ASSERT FAILED: "+e)},Pa=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ra={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Pa(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Da;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Da extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ja=function(e){return function(e){const t=Pa(e);return Ra.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ma=function(e){try{return Ra.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function La(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Oa=()=>{try{return La().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/simum-casequest",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPENAI_API_KEY:"your_openai_api_key_here"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Ma(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Fa=e=>Oa()?.emulatorHosts?.[e],Va=()=>Oa()?.config,Ua=e=>Oa()?.[`_${e}`];class za{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ba(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $a(e){return(await fetch(e,{credentials:"include"})).ok}const Ha={};let qa=!1;function Wa(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ba(window.location.host)||Ha[e]===t||Ha[e]||qa)return;function n(e){return`__firebase__banner__${e}`}Ha[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ha))Ha[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{qa=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Ka(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ga(){const e=Oa()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function Qa(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ya(){return!Ga()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xa(){try{return"object"===typeof indexedDB}catch(e){return!1}}function Ja(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}class Za extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eo.prototype.create)}}class eo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(to,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Za(n,s,t)}}const to=/\{\$([^}]+)}/g;function no(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ro(n)&&ro(s)){if(!no(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ro(e){return null!==e&&"object"===typeof e}function io(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function so(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function ao(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class oo{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=lo),void 0===r.error&&(r.error=lo),void 0===r.complete&&(r.complete=lo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lo(){}function co(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function uo(e){return e&&e._delegate?e._delegate:e}class ho{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fo="[DEFAULT]";class po{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new za;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===fo?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fo;return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class mo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new po(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const go=[];var yo;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(yo||(yo={}));const vo={debug:yo.DEBUG,verbose:yo.VERBOSE,info:yo.INFO,warn:yo.WARN,error:yo.ERROR,silent:yo.SILENT},wo=yo.INFO,bo={[yo.DEBUG]:"log",[yo.VERBOSE]:"log",[yo.INFO]:"info",[yo.WARN]:"warn",[yo.ERROR]:"error"},xo=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=bo[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class So{constructor(e){this.name=e,this._logLevel=wo,this._logHandler=xo,this._userLogHandler=null,go.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yo))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?vo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yo.DEBUG,...t),this._logHandler(this,yo.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yo.VERBOSE,...t),this._logHandler(this,yo.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yo.INFO,...t),this._logHandler(this,yo.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yo.WARN,...t),this._logHandler(this,yo.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yo.ERROR,...t),this._logHandler(this,yo.ERROR,...t)}}let ko,Eo;const _o=new WeakMap,To=new WeakMap,Co=new WeakMap,Io=new WeakMap,No=new WeakMap;let Ao={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return To.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Co.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Do(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Po(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Eo||(Eo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(jo(this),n),Do(_o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Do(e.apply(jo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(jo(this),t,...r);return Co.set(s,t.sort?t.sort():[t]),Do(s)}}function Ro(e){return"function"===typeof e?Po(e):(e instanceof IDBTransaction&&function(e){if(To.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});To.set(e,t)}(e),t=e,(ko||(ko=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ao):e);var t}function Do(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Do(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&_o.set(t,e)}).catch(()=>{}),No.set(t,e),t}(e);if(Io.has(e))return Io.get(e);const t=Ro(e);return t!==e&&(Io.set(e,t),No.set(t,e)),t}const jo=e=>No.get(e);function Mo(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Do(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Do(a.result),e.oldVersion,e.newVersion,Do(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const Lo=["get","getKey","getAll","getAllKeys","count"],Oo=["put","add","delete","clear"],Fo=new Map;function Vo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Fo.get(t))return Fo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Oo.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Lo.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Fo.set(t,s),s}Ao=(e=>({...e,get:(t,n,r)=>Vo(t,n)||e.get(t,n,r),has:(t,n)=>!!Vo(t,n)||e.has(t,n)}))(Ao);class Uo{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const zo="@firebase/app",Bo="0.14.3",$o=new So("@firebase/app"),Ho="@firebase/app-compat",qo="@firebase/analytics-compat",Wo="@firebase/analytics",Ko="@firebase/app-check-compat",Go="@firebase/app-check",Qo="@firebase/auth",Yo="@firebase/auth-compat",Xo="@firebase/database",Jo="@firebase/data-connect",Zo="@firebase/database-compat",el="@firebase/functions",tl="@firebase/functions-compat",nl="@firebase/installations",rl="@firebase/installations-compat",il="@firebase/messaging",sl="@firebase/messaging-compat",al="@firebase/performance",ol="@firebase/performance-compat",ll="@firebase/remote-config",cl="@firebase/remote-config-compat",ul="@firebase/storage",hl="@firebase/storage-compat",dl="@firebase/firestore",fl="@firebase/ai",pl="@firebase/firestore-compat",ml="firebase",gl="[DEFAULT]",yl={[zo]:"fire-core",[Ho]:"fire-core-compat",[Wo]:"fire-analytics",[qo]:"fire-analytics-compat",[Go]:"fire-app-check",[Ko]:"fire-app-check-compat",[Qo]:"fire-auth",[Yo]:"fire-auth-compat",[Xo]:"fire-rtdb",[Jo]:"fire-data-connect",[Zo]:"fire-rtdb-compat",[el]:"fire-fn",[tl]:"fire-fn-compat",[nl]:"fire-iid",[rl]:"fire-iid-compat",[il]:"fire-fcm",[sl]:"fire-fcm-compat",[al]:"fire-perf",[ol]:"fire-perf-compat",[ll]:"fire-rc",[cl]:"fire-rc-compat",[ul]:"fire-gcs",[hl]:"fire-gcs-compat",[dl]:"fire-fst",[pl]:"fire-fst-compat",[fl]:"fire-vertex","fire-js":"fire-js",[ml]:"fire-js-all"},vl=new Map,wl=new Map,bl=new Map;function xl(e,t){try{e.container.addComponent(t)}catch(n){$o.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Sl(e){const t=e.name;if(bl.has(t))return $o.debug(`There were multiple attempts to register component ${t}.`),!1;bl.set(t,e);for(const n of vl.values())xl(n,e);for(const n of wl.values())xl(n,e);return!0}function kl(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function El(e){return null!==e&&void 0!==e&&void 0!==e.settings}const _l=new eo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Tl{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _l.create("app-deleted",{appName:this._name})}}const Cl="12.3.0";function Il(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r={name:gl,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!==typeof i||!i)throw _l.create("bad-app-name",{appName:String(i)});if(n||(n=Va()),!n)throw _l.create("no-options");const s=vl.get(i);if(s){if(no(n,s.options)&&no(r,s.config))return s;throw _l.create("duplicate-app",{appName:i})}const a=new mo(i);for(const l of bl.values())a.addComponent(l);const o=new Tl(n,r,a);return vl.set(i,o),o}function Nl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gl;const t=vl.get(e);if(!t&&e===gl&&Va())return Il();if(!t)throw _l.create("no-app",{appName:e});return t}function Al(e,t,n){let r=yl[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void $o.warn(e.join(" "))}Sl(new ho(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Pl="firebase-heartbeat-store";let Rl=null;function Dl(){return Rl||(Rl=Mo("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Pl)}catch(n){console.warn(n)}}}).catch(e=>{throw _l.create("idb-open",{originalErrorMessage:e.message})})),Rl}async function jl(e,t){try{const n=(await Dl()).transaction(Pl,"readwrite"),r=n.objectStore(Pl);await r.put(t,Ml(e)),await n.done}catch(n){if(n instanceof Za)$o.warn(n.message);else{const e=_l.create("idb-set",{originalErrorMessage:n?.message});$o.warn(e.message)}}}function Ml(e){return`${e.name}!${e.options.appId}`}class Ll{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fl(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Ol();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$o.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ol(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Vl(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vl(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ja(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return $o.warn(e),""}}}function Ol(){return(new Date).toISOString().substring(0,10)}class Fl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Xa()&&Ja().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Dl()).transaction(Pl),n=await t.objectStore(Pl).get(Ml(e));return await t.done,n}catch(t){if(t instanceof Za)$o.warn(t.message);else{const e=_l.create("idb-get",{originalErrorMessage:t?.message});$o.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return jl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return jl(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function Vl(e){return ja(JSON.stringify({version:2,heartbeats:e})).length}var Ul;Ul="",Sl(new ho("platform-logger",e=>new Uo(e),"PRIVATE")),Sl(new ho("heartbeat",e=>new Ll(e),"PRIVATE")),Al(zo,Bo,Ul),Al(zo,Bo,"esm2020"),Al("fire-js","");const zl="@firebase/installations",Bl="0.6.19",$l=1e4,Hl=`w:${Bl}`,ql="FIS_v2",Wl=36e5,Kl=new eo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Gl(e){return e instanceof Za&&e.code.includes("request-failed")}function Ql(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Yl(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Xl(e,t){const n=(await t.json()).error;return Kl.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Jl(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Zl(e,t){let{refreshToken:n}=t;const r=Jl(e);return r.append("Authorization",function(e){return`${ql} ${e}`}(n)),r}async function ec(e){const t=await e();return t.status>=500&&t.status<600?e():t}function tc(e){return new Promise(t=>{setTimeout(t,e)})}const nc=/^[cdef][\w-]{21}$/;function rc(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return nc.test(t)?t:""}catch{return""}}function ic(e){return`${e.appName}!${e.appId}`}const sc=new Map;function ac(e,t){const n=ic(e);oc(n,t),function(e,t){const n=cc();n&&n.postMessage({key:e,fid:t});uc()}(n,t)}function oc(e,t){const n=sc.get(e);if(n)for(const r of n)r(t)}let lc=null;function cc(){return!lc&&"BroadcastChannel"in self&&(lc=new BroadcastChannel("[Firebase] FID Change"),lc.onmessage=e=>{oc(e.data.key,e.data.fid)}),lc}function uc(){0===sc.size&&lc&&(lc.close(),lc=null)}const hc="firebase-installations-store";let dc=null;function fc(){return dc||(dc=Mo("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(hc)}})),dc}async function pc(e,t){const n=ic(e),r=(await fc()).transaction(hc,"readwrite"),i=r.objectStore(hc),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||ac(e,t.fid),t}async function mc(e){const t=ic(e),n=(await fc()).transaction(hc,"readwrite");await n.objectStore(hc).delete(t),await n.done}async function gc(e,t){const n=ic(e),r=(await fc()).transaction(hc,"readwrite"),i=r.objectStore(hc),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||ac(e,a.fid),a}async function yc(e){let t;const n=await gc(e.appConfig,n=>{const r=function(e){const t=e||{fid:rc(),registrationStatus:0};return bc(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Kl.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Ql(n),a=Jl(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:ql,appId:n.appId,sdkVersion:Hl},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await ec(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Yl(e.authToken)}}throw await Xl("Create Installation",u)}(e,t);return pc(e.appConfig,n)}catch(n){throw Gl(n)&&409===n.customData.serverCode?await mc(e.appConfig):await pc(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:vc(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function vc(e){let t=await wc(e.appConfig);for(;1===t.registrationStatus;)await tc(100),t=await wc(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await yc(e);return n||t}return t}function wc(e){return gc(e,e=>{if(!e)throw Kl.create("installation-not-found");return bc(e)})}function bc(e){return 1===(t=e).registrationStatus&&t.registrationTime+$l<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function xc(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Ql(e)}/${n}/authTokens:generate`}(n,t),s=Zl(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Hl,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await ec(()=>fetch(i,l));if(c.ok){return Yl(await c.json())}throw await Xl("Generate Auth Token",c)}async function Sc(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await gc(e.appConfig,r=>{if(!Ec(r))throw Kl.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Wl}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await kc(e.appConfig);for(;1===n.authToken.requestStatus;)await tc(100),n=await kc(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Sc(e,t):r}(e,n),r;{if(!navigator.onLine)throw Kl.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}(r);return t=async function(e,t){try{const n=await xc(e,t),r={...t,authToken:n};return await pc(e.appConfig,r),n}catch(n){if(!Gl(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n={...t,authToken:{requestStatus:0}};await pc(e.appConfig,n)}else await mc(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function kc(e){return gc(e,e=>{if(!Ec(e))throw Kl.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+$l<Date.now()?{...e,authToken:{requestStatus:0}}:e;var n})}function Ec(e){return void 0!==e&&2===e.registrationStatus}async function _c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await yc(e);t&&await t}(n);return(await Sc(n,t)).token}function Tc(e){return Kl.create("missing-app-config-values",{valueName:e})}const Cc="installations",Ic=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Tc("App Configuration");if(!e.name)throw Tc("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Tc(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:kl(t,"heartbeat"),_delete:()=>Promise.resolve()}},Nc=e=>{const t=kl(e.getProvider("app").getImmediate(),Cc).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await yc(t);return r?r.catch(console.error):Sc(t).catch(console.error),n.fid}(t),getToken:e=>_c(t,e)}};Sl(new ho(Cc,Ic,"PUBLIC")),Sl(new ho("installations-internal",Nc,"PRIVATE")),Al(zl,Bl),Al(zl,Bl,"esm2020");const Ac="@firebase/remote-config",Pc="0.7.0";class Rc{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}const Dc="remote-config",jc=new eo("remoteconfig","Remote Config",{"already-initialized":"Remote Config already initialized","registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported.","stream-error":"The stream was not able to connect to the backend: {$originalErrorMessage}.","realtime-unavailable":"The Realtime service is unavailable: {$originalErrorMessage}","update-message-invalid":"The stream invalidation message was unparsable: {$originalErrorMessage}","update-not-fetched":"Unable to fetch the latest config: {$originalErrorMessage}"});const Mc=["1","true","t","yes","y","on"];class Lc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._source=e,this._value=t}asString(){return this._value}asBoolean(){return"static"!==this._source&&Mc.indexOf(this._value.toLowerCase())>=0}asNumber(){if("static"===this._source)return 0;let e=Number(this._value);return isNaN(e)&&(e=0),e}getSource(){return this._source}}async function Oc(e){const t=uo(e),n=new Rc;setTimeout(async()=>{n.abort()},t.settings.fetchTimeoutMillis);const r=t._storageCache.getCustomSignals();r&&t._logger.debug(`Fetching config with custom signals: ${JSON.stringify(r)}`);try{await t._client.fetch({cacheMaxAgeMillis:t.settings.minimumFetchIntervalMillis,signal:n,customSignals:r}),await t._storageCache.setLastFetchStatus("success")}catch(i){const e=function(e,t){return e instanceof Za&&-1!==e.code.indexOf(t)}(i,"fetch-throttle")?"throttle":"failure";throw await t._storageCache.setLastFetchStatus(e),i}}function Fc(e,t){const n=uo(e);n._isInitializationComplete||n._logger.debug(`A value was requested for key "${t}" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.`);const r=n._storageCache.getActiveConfig();return r&&void 0!==r[t]?new Lc("remote",r[t]):n.defaultConfig&&void 0!==n.defaultConfig[t]?new Lc("default",String(n.defaultConfig[t])):(n._logger.debug(`Returning static value for key "${t}". Define a default or remote value if this is unintentional.`),new Lc("static"))}class Vc{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}async fetch(e){const[t,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;const r=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}}function Uc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}class zc{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}async fetch(e){const[t,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,i={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:Uc(),custom_signals:e.customSignals},a={method:"POST",headers:i,body:JSON.stringify(s)},o=fetch(r,a),l=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let c;try{await Promise.race([o,l]),c=await o}catch(m){let e="fetch-client-network";throw"AbortError"===m?.name&&(e="fetch-timeout"),jc.create(e,{originalErrorMessage:m?.message})}let u=c.status;const h=c.headers.get("ETag")||void 0;let d,f,p;if(200===c.status){let e;try{e=await c.json()}catch(m){throw jc.create("fetch-client-parse",{originalErrorMessage:m?.message})}d=e.entries,f=e.state,p=e.templateVersion}if("INSTANCE_STATE_UNSPECIFIED"===f?u=500:"NO_CHANGE"===f?u=304:"NO_TEMPLATE"!==f&&"EMPTY_CONFIG"!==f||(d={}),304!==u&&200!==u)throw jc.create("fetch-status",{httpStatus:u});return{status:u,eTag:h,config:d,templateVersion:p}}}class Bc{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,t){let{throttleEndTimeMillis:n,backoffCount:r}=t;await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(jc.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch(i){if(!function(e){if(!(e instanceof Za)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i))throw i;const t={throttleEndTimeMillis:Date.now()+co(r),backoffCount:r+1};return await this.storage.setThrottleMetadata(t),this.attemptFetch(e,t)}}}class $c{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,n,r,i,s){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._realtimeHandler=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}}function Hc(e,t){const n=e.target.error||void 0;return jc.create(t,{originalErrorMessage:n&&n?.message})}const qc="app_namespace_store";class Wc{getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}getRealtimeBackoffMetadata(){return this.get("realtime_backoff_metadata")}setRealtimeBackoffMetadata(e){return this.set("realtime_backoff_metadata",e)}getActiveConfigTemplateVersion(){return this.get("last_known_template_version")}setActiveConfigTemplateVersion(e){return this.set("last_known_template_version",e)}}class Kc extends Wc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(Hc(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(qc,{keyPath:"compositeKey"})}}catch(n){t(jc.create("storage-open",{originalErrorMessage:n?.message}))}});super(),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}async setCustomSignals(e){const t=(await this.openDbPromise).transaction([qc],"readwrite"),n=Qc(e,await this.getWithTransaction("custom_signals",t)||{});return await this.setWithTransaction("custom_signals",n,t),n}async getWithTransaction(e,t){return new Promise((n,r)=>{const i=t.objectStore(qc),s=this.createCompositeKey(e);try{const e=i.get(s);e.onerror=e=>{r(Hc(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;n(t?t.value:void 0)}}catch(a){r(jc.create("storage-get",{originalErrorMessage:a?.message}))}})}async setWithTransaction(e,t,n){return new Promise((r,i)=>{const s=n.objectStore(qc),a=this.createCompositeKey(e);try{const e=s.put({compositeKey:a,value:t});e.onerror=e=>{i(Hc(e,"storage-set"))},e.onsuccess=()=>{r()}}catch(o){i(jc.create("storage-set",{originalErrorMessage:o?.message}))}})}async get(e){const t=(await this.openDbPromise).transaction([qc],"readonly");return this.getWithTransaction(e,t)}async set(e,t){const n=(await this.openDbPromise).transaction([qc],"readwrite");return this.setWithTransaction(e,t,n)}async delete(e){const t=await this.openDbPromise;return new Promise((n,r)=>{const i=t.transaction([qc],"readwrite").objectStore(qc),s=this.createCompositeKey(e);try{const e=i.delete(s);e.onerror=e=>{r(Hc(e,"storage-delete"))},e.onsuccess=()=>{n()}}catch(a){r(jc.create("storage-delete",{originalErrorMessage:a?.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Gc extends Wc{constructor(){super(...arguments),this.storage={}}async get(e){return Promise.resolve(this.storage[e])}async set(e,t){return this.storage[e]=t,Promise.resolve(void 0)}async delete(e){return this.storage[e]=void 0,Promise.resolve()}async setCustomSignals(e){const t=this.storage.custom_signals||{};return this.storage.custom_signals=Qc(e,t),Promise.resolve(this.storage.custom_signals)}}function Qc(e,t){const n={...t,...e},r=Object.fromEntries(Object.entries(n).filter(e=>{let[t,n]=e;return null!==n}).map(e=>{let[t,n]=e;return"number"===typeof n?[t,n.toString()]:[t,n]}));if(Object.keys(r).length>100)throw jc.create("custom-signal-max-allowed-signals",{maxSignals:100});return r}class Yc{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=this.storage.getCustomSignals(),i=await e;i&&(this.lastFetchStatus=i);const s=await t;s&&(this.lastSuccessfulFetchTimestampMillis=s);const a=await n;a&&(this.activeConfig=a);const o=await r;o&&(this.customSignals=o)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}async setCustomSignals(e){this.customSignals=await this.storage.setCustomSignals(e)}}class Xc{constructor(e){this.allowedEvents_=e,this.listeners_={},Na(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Na(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Jc extends Xc{static getInstance(){return new Jc}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Na("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zc="X-Goog-Api-Key",eu="X-Goog-Firebase-Installations-Auth",tu="featureDisabled",nu="retryIntervalSeconds",ru="latestTemplateVersionNumber";class iu{constructor(e,t,n,r,i,s,a,o,l,c){this.firebaseInstallations=e,this.storage=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a,this.logger=o,this.storageCache=l,this.cachingClient=c,this.observers=new Set,this.isConnectionActive=!1,this.isRealtimeDisabled=!1,this.httpRetriesRemaining=8,this.isInBackground=!1,this.decoder=new TextDecoder("utf-8"),this.isClosingConnection=!1,this.propagateError=e=>this.observers.forEach(t=>t.error?.(e)),this.isStatusCodeRetryable=e=>!e||[408,429,502,503,504].includes(e),this.setRetriesRemaining(),Jc.getInstance().on("visible",this.onVisibilityChange,this)}async setRetriesRemaining(){const e=await this.storage.getRealtimeBackoffMetadata(),t=e?.numFailedStreams||0;this.httpRetriesRemaining=Math.max(8-t,1)}async updateBackoffMetadataWithLastFailedStreamConnectionTime(e){const t=((await this.storage.getRealtimeBackoffMetadata())?.numFailedStreams||0)+1,n=co(t,6e4,2);await this.storage.setRealtimeBackoffMetadata({backoffEndTimeMillis:new Date(e.getTime()+n),numFailedStreams:t})}async updateBackoffMetadataWithRetryInterval(e){const t=Date.now(),n=new Date(t+1e3*e);await this.storage.setRealtimeBackoffMetadata({backoffEndTimeMillis:n,numFailedStreams:0}),await this.retryHttpConnectionWhenBackoffEnds()}async closeRealtimeHttpConnection(){if(!this.isClosingConnection){this.isClosingConnection=!0;try{this.reader&&await this.reader.cancel()}catch(e){this.logger.debug("Failed to cancel the reader, connection was lost.")}finally{this.reader=void 0}this.controller&&(await this.controller.abort(),this.controller=void 0),this.isClosingConnection=!1}}async resetRealtimeBackoff(){await this.storage.setRealtimeBackoffMetadata({backoffEndTimeMillis:new Date(-1),numFailedStreams:0})}resetRetryCount(){this.httpRetriesRemaining=8}async establishRealtimeConnection(e,t,n,r){const i=await this.storage.getActiveConfigEtag(),s=await this.storage.getActiveConfigTemplateVersion(),a={[Zc]:this.apiKey,[eu]:n,"Content-Type":"application/json",Accept:"application/json","If-None-Match":i||"*","Content-Encoding":"gzip"},o={project:this.projectId,namespace:this.namespace,lastKnownVersionNumber:s,appId:this.appId,sdkVersion:this.sdkVersion,appInstanceId:t};return await fetch(e,{method:"POST",headers:a,body:JSON.stringify(o),signal:r})}getRealtimeUrl(){const e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfigrealtime.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:streamFetchInvalidations?key=${this.apiKey}`;return new URL(e)}async createRealtimeConnection(){const[e,t]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken(!1)]);this.controller=new AbortController;const n=this.getRealtimeUrl();return await this.establishRealtimeConnection(n,e,t,this.controller.signal)}async retryHttpConnectionWhenBackoffEnds(){let e=await this.storage.getRealtimeBackoffMetadata();e||(e={backoffEndTimeMillis:new Date(-1),numFailedStreams:0});const t=new Date(e.backoffEndTimeMillis).getTime(),n=Date.now(),r=Math.max(0,t-n);await this.makeRealtimeHttpConnection(r)}setIsHttpConnectionRunning(e){this.isConnectionActive=e}checkAndSetHttpConnectionFlagIfNotRunning(){const e=this.canEstablishStreamConnection();return e&&this.setIsHttpConnectionRunning(!0),e}fetchResponseIsUpToDate(e,t){return null!=e.config&&e.templateVersion?e.templateVersion>=t:"success"===this.storageCache.getLastFetchStatus()}parseAndValidateConfigUpdateMessage(e){const t=e.indexOf("{"),n=e.indexOf("}",t);return t<0||n<0||t>=n?"":e.substring(t,n+1)}isEventListenersEmpty(){return 0===this.observers.size}getRandomInt(e){return Math.floor(Math.random()*e)}executeAllListenerCallbacks(e){this.observers.forEach(t=>t.next(e))}getChangedParams(e,t){const n=new Set,r=new Set(Object.keys(e||{})),i=new Set(Object.keys(t||{}));for(const s of r)i.has(s)&&e[s]===t[s]||n.add(s);for(const s of i)r.has(s)||n.add(s);return n}async fetchLatestConfig(e,t){const n=e-1,r=3-n,i=this.storageCache.getCustomSignals();i&&this.logger.debug(`Fetching config with custom signals: ${JSON.stringify(i)}`);const s=new Rc;try{const e={cacheMaxAgeMillis:0,signal:s,customSignals:i,fetchType:"REALTIME",fetchAttempt:r},a=await this.cachingClient.fetch(e);let o=await this.storage.getActiveConfig();if(!this.fetchResponseIsUpToDate(a,t))return this.logger.debug("Fetched template version is the same as SDK's current version. Retrying fetch."),void await this.autoFetch(n,t);if(null==a.config)return void this.logger.debug("The fetch succeeded, but the backend had no updates.");null==o&&(o={});const l=this.getChangedParams(a.config,o);if(0===l.size)return void this.logger.debug("Config was fetched, but no params changed.");const c={getUpdatedKeys:()=>new Set(l)};this.executeAllListenerCallbacks(c)}catch(a){const e=a instanceof Error?a.message:String(a),t=jc.create("update-not-fetched",{originalErrorMessage:`Failed to auto-fetch config update: ${e}`});this.propagateError(t)}}async autoFetch(e,t){if(0===e){const e=jc.create("update-not-fetched",{originalErrorMessage:"Unable to fetch the latest version of the template."});return void this.propagateError(e)}const n=1e3*this.getRandomInt(4);await new Promise(e=>setTimeout(e,n)),await this.fetchLatestConfig(e,t)}async handleNotifications(e){let t,n="";for(;;){const{done:i,value:s}=await e.read();if(i)break;if(t=this.decoder.decode(s,{stream:!0}),n+=t,t.includes("}")){if(n=this.parseAndValidateConfigUpdateMessage(n),0===n.length)continue;try{const e=JSON.parse(n);if(this.isEventListenersEmpty())break;if(tu in e&&!0===e[tu]){const e=jc.create("realtime-unavailable",{originalErrorMessage:"The server is temporarily unavailable. Try again in a few minutes."});this.propagateError(e);break}if(ru in e){const t=await this.storage.getActiveConfigTemplateVersion(),n=Number(e[ru]);t&&n>t&&await this.autoFetch(3,n)}if(nu in e){const t=Number(e[nu]);await this.updateBackoffMetadataWithRetryInterval(t)}}catch(r){this.logger.debug("Unable to parse latest config update message.",r);const e=r instanceof Error?r.message:String(r);this.propagateError(jc.create("update-message-invalid",{originalErrorMessage:e}))}n=""}}}async listenForNotifications(e){try{await this.handleNotifications(e)}catch(t){this.isInBackground||this.logger.debug("Real-time connection was closed due to an exception.")}}async prepareAndBeginRealtimeHttpStream(){if(!this.checkAndSetHttpConnectionFlagIfNotRunning())return;let e=await this.storage.getRealtimeBackoffMetadata();e||(e={backoffEndTimeMillis:new Date(-1),numFailedStreams:0});const t=e.backoffEndTimeMillis.getTime();if(Date.now()<t)return void await this.retryHttpConnectionWhenBackoffEnds();let n,r;try{if(n=await this.createRealtimeConnection(),r=n.status,n.ok&&n.body){this.resetRetryCount(),await this.resetRealtimeBackoff();const e=n.body.getReader();this.reader=e,await this.listenForNotifications(e)}}catch(i){this.isInBackground?this.resetRetryCount():this.logger.debug("Exception connecting to real-time RC backend. Retrying the connection...:",i)}finally{await this.closeRealtimeHttpConnection(),this.setIsHttpConnectionRunning(!1);const e=!this.isInBackground&&(void 0===r||this.isStatusCodeRetryable(r));if(e&&await this.updateBackoffMetadataWithLastFailedStreamConnectionTime(new Date),e||n?.ok)await this.retryHttpConnectionWhenBackoffEnds();else{const e=`Unable to connect to the server. HTTP status code: ${r}`,t=jc.create("stream-error",{originalErrorMessage:e});this.propagateError(t)}}}canEstablishStreamConnection(){const e=this.observers.size>0,t=!this.isRealtimeDisabled,n=!this.isConnectionActive,r=!this.isInBackground;return e&&t&&n&&r}async makeRealtimeHttpConnection(e){if(this.canEstablishStreamConnection())if(this.httpRetriesRemaining>0)this.httpRetriesRemaining--,await new Promise(t=>setTimeout(t,e)),this.prepareAndBeginRealtimeHttpStream();else if(!this.isInBackground){const e=jc.create("stream-error",{originalErrorMessage:"Unable to connect to the server. Check your connection and try again."});this.propagateError(e)}}async beginRealtime(){this.observers.size>0&&await this.makeRealtimeHttpConnection(0)}addObserver(e){this.observers.add(e),this.beginRealtime()}removeObserver(e){this.observers.has(e)&&this.observers.delete(e)}async onVisibilityChange(e){this.isInBackground=!e,e?e&&await this.beginRealtime():await this.closeRealtimeHttpConnection()}}async function su(e){return e=uo(e),await Oc(e),async function(e){const t=uo(e),[n,r]=await Promise.all([t._storage.getLastSuccessfulFetchResponse(),t._storage.getActiveConfigEtag()]);return!!(n&&n.config&&n.eTag&&n.templateVersion&&n.eTag!==r)&&(await Promise.all([t._storageCache.setActiveConfig(n.config),t._storage.setActiveConfigEtag(n.eTag),t._storage.setActiveConfigTemplateVersion(n.templateVersion)]),!0)}(e)}Sl(new ho(Dc,function(e,t){let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate(),{projectId:s,apiKey:a,appId:o}=r.options;if(!s)throw jc.create("registration-project-id");if(!a)throw jc.create("registration-api-key");if(!o)throw jc.create("registration-app-id");const l=n?.templateId||"firebase",c=Xa()?new Kc(o,r.name,l):new Gc,u=new Yc(c),h=new So(Ac);h.logLevel=yo.ERROR;const d=new zc(i,Cl,l,s,a,o),f=new Bc(d,c),p=new Vc(f,c,u,h),m=new iu(i,c,Cl,l,s,a,o,h,u,p),g=new $c(r,p,u,c,h,m);return function(e){const t=uo(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}(g),g},"PUBLIC").setMultipleInstances(!0)),Al(Ac,Pc),Al(Ac,Pc,"esm2020");Al("firebase","12.3.0","app");function au(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ou=au,lu=new eo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cu=new So("@firebase/auth");function uu(e){if(cu.logLevel<=yo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cu.error(`Auth (${Cl}): ${e}`,...n)}}function hu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw mu(e,...n)}function du(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return mu(e,...n)}function fu(e,t,n){const r={...ou(),[t]:n};return new eo("auth","Firebase",r).create(t,{appName:e.name})}function pu(e){return fu(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return lu.create(e,...n)}function gu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw mu(t,...r)}}function yu(e){const t="INTERNAL ASSERTION FAILED: "+e;throw uu(t),new Error(t)}function vu(e,t){e||yu(t)}function wu(){return"undefined"!==typeof self&&self.location?.href||""}function bu(){return"http:"===xu()||"https:"===xu()}function xu(){return"undefined"!==typeof self&&self.location?.protocol||null}class Su{constructor(e,t){this.shortDelay=e,this.longDelay=t,vu(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ka())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(bu()||Qa()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ku(e,t){vu(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Eu{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void yu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void yu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void yu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _u={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Tu=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cu=new Su(3e4,6e4);function Iu(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Nu(e,t,n,r){return Au(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=io({key:e.config.apiKey,...s}).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:o,...i};return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ba(e.emulatorConfig.host)&&(l.credentials="include"),Eu.fetch()(await Ru(e,e.config.apiHost,n,a),l)})}async function Au(e,t,n){e._canInitEmulator=!1;const r={..._u,...t};try{const t=new ju(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Mu(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mu(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Mu(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Mu(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw fu(e,o,a);hu(e,o)}}catch(i){if(i instanceof Za)throw i;hu(e,"network-request-failed",{message:String(i)})}}async function Pu(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Nu(e,t,n,r,i);return"mfaPendingCredential"in s&&hu(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Ru(e,t,n,r){const i=`${t}${n}?${r}`,s=e,a=s.config.emulator?ku(e.config,i):`${e.config.apiScheme}://${i}`;if(Tu.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function Du(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ju{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(du(this.auth,"network-request-failed")),Cu.get())})}}function Mu(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=du(e,t,r);return i.customData._tokenResponse=n,i}function Lu(e){return void 0!==e&&void 0!==e.enterprise}class Ou{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Du(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Fu(e,t){return Nu(e,"GET","/v2/recaptchaConfig",Iu(e,t))}async function Vu(e,t){return Nu(e,"POST","/v1/accounts:lookup",t)}function Uu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function zu(e){return 1e3*Number(e)}function Bu(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ma(n);return e?JSON.parse(e):(uu("Failed to decode base64 JWT payload"),null)}catch(i){return uu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $u(e){const t=Bu(e);return gu(t,"internal-error"),gu("undefined"!==typeof t.exp,"internal-error"),gu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Hu(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Za&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class qu{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class Wu{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ku(e){const t=e.auth,n=await e.getIdToken(),r=await Hu(e,Vu(t,{idToken:n}));gu(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?Gu(i.providerUserInfo):[],a=(o=e.providerData,l=s,[...o.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var o,l;const c=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!a?.length,h=!!c&&u,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Wu(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,d)}function Gu(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Qu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gu(e.idToken,"internal-error"),gu("undefined"!==typeof e.idToken,"internal-error"),gu("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):$u(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){gu(0!==e.length,"internal-error");const t=$u(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(gu(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Au(e,{},async()=>{const n=io({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Ru(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Ba(e.emulatorConfig.host)&&(o.credentials="include"),Eu.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Qu;return n&&(gu("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(gu("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(gu("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qu,this.toJSON())}_performRefresh(){return yu("not implemented")}}function Yu(e,t){gu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Xu{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...i}=e;this.providerId="firebase",this.proactiveRefresh=new qu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Wu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return gu(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=uo(e),r=await n.getIdToken(t),i=Bu(r);gu(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Uu(zu(i.auth_time)),issuedAtTime:Uu(zu(i.iat)),expirationTime:Uu(zu(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=uo(e);await Ku(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(gu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){gu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ku(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(El(this.auth.app))return Promise.reject(pu(this.auth));const e=await this.getIdToken();return await Hu(this,async function(e,t){return Nu(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,o=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:p}=t;gu(u&&p,e,"internal-error");const m=Qu.fromJSON(this.name,p);gu("string"===typeof u,e,"internal-error"),Yu(n,e.name),Yu(r,e.name),gu("boolean"===typeof h,e,"internal-error"),gu("boolean"===typeof d,e,"internal-error"),Yu(i,e.name),Yu(s,e.name),Yu(a,e.name),Yu(o,e.name),Yu(l,e.name),Yu(c,e.name);const g=new Xu({uid:u,auth:e,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:i,tenantId:a,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),o&&(g._redirectEventId=o),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qu;r.updateFromServerResponse(t);const i=new Xu({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ku(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];gu(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Gu(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!i?.length,a=new Qu;a.updateFromIdToken(n);const o=new Xu({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Wu(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(o,l),o}}const Ju=new Map;function Zu(e){vu(e instanceof Function,"Expected a class definition");let t=Ju.get(e);return t?(vu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ju.set(e,t),t)}class eh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eh.type="NONE";const th=eh;function nh(e,t,n){return`firebase:${e}:${t}:${n}`}class rh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=nh(this.userKey,r.apiKey,i),this.fullPersistenceKey=nh("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Vu(this.auth,{idToken:e}).catch(()=>{});return t?Xu._fromGetAccountInfoResponse(this.auth,t,e):null}return Xu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new rh(Zu(th),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Zu(th);const s=nh(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await Vu(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Xu._fromGetAccountInfoResponse(e,r,t)}else n=Xu._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch{}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new rh(i,e,n)):new rh(i,e,n)}}function ih(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(sh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(uh(t))return"Blackberry";if(hh(t))return"Webos";if(ah(t))return"Safari";if((t.includes("chrome/")||oh(t))&&!t.includes("edge/"))return"Chrome";if(ch(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function sh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/firefox\//i.test(e)}function ah(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/crios\//i.test(e)}function lh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/iemobile/i.test(e)}function ch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/android/i.test(e)}function uh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/blackberry/i.test(e)}function hh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/webos/i.test(e)}function dh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fh(){return function(){const e=Ka();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return dh(e)||ch(e)||hh(e)||uh(e)||/windows phone/i.test(e)||lh(e)}function mh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ih(Ka());break;case"Worker":t=`${ih(Ka())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cl}/${r}`}class gh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class yh{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class vh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bh(this),this.idTokenSubscription=new bh(this),this.beforeStateQueue=new gh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zu(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await rh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Vu(this,{idToken:e}),n=await Xu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(El(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==i||!s?.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return gu(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ku(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(El(this.app))return Promise.reject(pu(this));const t=e?uo(e):null;return t&&gu(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&gu(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return El(this.app)?Promise.reject(pu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return El(this.app)?Promise.reject(pu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zu(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Nu(e,"GET","/v2/passwordPolicy",Iu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new yh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Nu(e,"POST","/v2/accounts:revokeToken",Iu(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zu(e)||this._popupRedirectResolver;gu(t,this,"argument-error"),this.redirectPersistenceManager=await rh.create(this,[Zu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(gu(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gu(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(El(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(cu.logLevel<=yo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];cu.warn(`Auth (${Cl}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wh(e){return uo(e)}class bh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new oo(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return gu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sh(e){return xh.loadJS(e)}function kh(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Eh{constructor(){this.enterprise=new _h}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _h{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Th="NO_RECAPTCHA";class Ch{constructor(e){this.type="recaptcha-enterprise",this.auth=wh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Lu(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Th)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Eh).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Fu(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ou(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Lu(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Sh(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ih(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Ch(e);let a;if(i)a=Th;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Nh(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ih(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Ih(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Ih(e,t,n);return r(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Ih(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ih(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ah(e){const t=wh(e),n=await Fu(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ou(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ch(t).verify()}}function Ph(e,t,n){const r=wh(e);gu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=Rh(t),{host:a,port:o}=function(e){const t=Rh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Dh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Dh(t)}}}(t),l=null===o?"":`:${o}`,c={url:`${s}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return gu(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void gu(no(c,r.config.emulator)&&no(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ba(a)?($a(`${s}//${a}${l}`),Wa("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Rh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Dh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class jh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return yu("not implemented")}_getIdTokenResponse(e){return yu("not implemented")}_linkToIdToken(e,t){return yu("not implemented")}_getReauthenticationResolver(e){return yu("not implemented")}}async function Mh(e,t){return Nu(e,"POST","/v1/accounts:signUp",t)}async function Lh(e,t){return Pu(e,"POST","/v1/accounts:signInWithPassword",Iu(e,t))}class Oh extends jh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Oh(e,t,"password")}static _fromEmailAndCode(e,t){return new Oh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Nh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Lh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Pu(e,"POST","/v1/accounts:signInWithEmailLink",Iu(e,t))}(e,{email:this._email,oobCode:this._password});default:hu(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Nh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Pu(e,"POST","/v1/accounts:signInWithEmailLink",Iu(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hu(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fh(e,t){return Pu(e,"POST","/v1/accounts:signInWithIdp",Iu(e,t))}class Vh extends jh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hu("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Vh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Fh(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Fh(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=io(t)}return e}}async function Uh(e,t){return Nu(e,"POST","/v1/accounts:sendVerificationCode",Iu(e,t))}const zh={USER_NOT_FOUND:"user-not-found"};class Bh extends jh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Bh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Bh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pu(e,"POST","/v1/accounts:signInWithPhoneNumber",Iu(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pu(e,"POST","/v1/accounts:signInWithPhoneNumber",Iu(e,t));if(n.temporaryProof)throw Mu(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return Pu(e,"POST","/v1/accounts:signInWithPhoneNumber",Iu(e,{...t,operation:"REAUTH"}),zh)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Bh({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class $h{constructor(e){const t=so(ao(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);gu(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=so(ao(e)).link,n=t?so(ao(t)).deep_link_id:null,r=so(ao(e)).deep_link_id;return(r?so(ao(r)).link:null)||r||n||t||e}(e);try{return new $h(t)}catch{return null}}}class Hh{constructor(){this.providerId=Hh.PROVIDER_ID}static credential(e,t){return Oh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$h.parseLink(t);return gu(n,"argument-error"),Oh._fromEmailAndCode(e,n.code,n.tenantId)}}Hh.PROVIDER_ID="password",Hh.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Hh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Wh extends qh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kh extends Wh{constructor(){super("facebook.com")}static credential(e){return Vh._fromParams({providerId:Kh.PROVIDER_ID,signInMethod:Kh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kh.credentialFromTaggedObject(e)}static credentialFromError(e){return Kh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Kh.credential(t.oauthAccessToken)}catch{return null}}}Kh.FACEBOOK_SIGN_IN_METHOD="facebook.com",Kh.PROVIDER_ID="facebook.com";class Gh extends Wh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vh._fromParams({providerId:Gh.PROVIDER_ID,signInMethod:Gh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gh.credentialFromTaggedObject(e)}static credentialFromError(e){return Gh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Gh.credential(n,r)}catch{return null}}}Gh.GOOGLE_SIGN_IN_METHOD="google.com",Gh.PROVIDER_ID="google.com";class Qh extends Wh{constructor(){super("github.com")}static credential(e){return Vh._fromParams({providerId:Qh.PROVIDER_ID,signInMethod:Qh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qh.credentialFromTaggedObject(e)}static credentialFromError(e){return Qh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qh.credential(t.oauthAccessToken)}catch{return null}}}Qh.GITHUB_SIGN_IN_METHOD="github.com",Qh.PROVIDER_ID="github.com";class Yh extends Wh{constructor(){super("twitter.com")}static credential(e,t){return Vh._fromParams({providerId:Yh.PROVIDER_ID,signInMethod:Yh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yh.credentialFromTaggedObject(e)}static credentialFromError(e){return Yh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Yh.credential(n,r)}catch{return null}}}async function Xh(e,t){return Pu(e,"POST","/v1/accounts:signUp",Iu(e,t))}Yh.TWITTER_SIGN_IN_METHOD="twitter.com",Yh.PROVIDER_ID="twitter.com";class Jh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Xu._fromIdTokenResponse(e,n,r),s=Zh(n);return new Jh({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Zh(n);return new Jh({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Zh(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ed extends Za{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ed(e,t,n,r)}}function td(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw ed._fromErrorAndOperation(e,n,t,r);throw n})}async function nd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Hu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Jh._forOperation(e,"link",r)}async function rd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(El(r.app))return Promise.reject(pu(r));const i="reauthenticate";try{const s=await Hu(e,td(r,i,t,e),n);gu(s.idToken,r,"internal-error");const a=Bu(s.idToken);gu(a,r,"internal-error");const{sub:o}=a;return gu(e.uid===o,r,"user-mismatch"),Jh._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&hu(r,"user-mismatch"),s}}async function id(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(El(e.app))return Promise.reject(pu(e));const r="signIn",i=await td(e,r,t),s=await Jh._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function sd(e,t){return id(wh(e),t)}async function ad(e){const t=wh(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function od(e,t){return Nu(e,"POST","/v2/accounts/mfaEnrollment:start",Iu(e,t))}new WeakMap;const ld="__sak";class cd{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ud extends cd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ph(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);fh()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ud.type="LOCAL";const hd=ud;function dd(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function fd(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class pd{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=fd(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return dd(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=fd(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=fd(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=dd(n);const i=setInterval(()=>{const e=dd(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}pd.type="COOKIE";class md extends cd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}md.type="SESSION";const gd=md;class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new yd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function vd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yd.receivers=[];class wd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=vd("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function bd(){return window}function xd(){return"undefined"!==typeof bd().WorkerGlobalScope&&"function"===typeof bd().importScripts}const Sd="firebaseLocalStorageDb",kd="firebaseLocalStorage",Ed="fbase_key";class _d{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Td(e,t){return e.transaction([kd],t?"readwrite":"readonly").objectStore(kd)}function Cd(){const e=indexedDB.open(Sd,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(kd,{keyPath:Ed})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(kd)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Sd);return new _d(e).toPromise()}(),t(await Cd()))})})}async function Id(e,t,n){const r=Td(e,!0).put({[Ed]:t,value:n});return new _d(r).toPromise()}function Nd(e,t){const n=Td(e,!0).delete(t);return new _d(n).toPromise()}class Ad{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Cd()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(xd()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new wd(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cd();return await Id(e,ld,"1"),await Nd(e,ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Id(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Td(e,!1).get(t),r=await new _d(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nd(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Td(e,!1).getAll();return new _d(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ad.type="LOCAL";const Pd=Ad;function Rd(e,t){return Nu(e,"POST","/v2/accounts/mfaSignIn:start",Iu(e,t))}kh("rcb"),new Su(3e4,6e4);const Dd="recaptcha";async function jd(e,t,n){if(!e._getRecaptchaConfig())try{await Ah(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){gu("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Nh(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Th){gu(n?.type===Dd,e,"argument-error");return od(e,await Md(e,t,n))}return od(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{gu("signin"===t.type,e,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;gu(i,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Nh(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Th){gu(n?.type===Dd,e,"argument-error");return Rd(e,await Md(e,t,n))}return Rd(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Nh(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Th){gu(n?.type===Dd,e,"argument-error");return Uh(e,await Md(e,t,n))}return Uh(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Md(e,t,n){gu(n.type===Dd,e,"argument-error");const r=await n.verify();gu("string"===typeof r,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ld{constructor(e){this.providerId=Ld.PROVIDER_ID,this.auth=wh(e)}verifyPhoneNumber(e,t){return jd(this.auth,e,uo(t))}static credential(e,t){return Bh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ld.credentialFromTaggedObject(t)}static credentialFromError(e){return Ld.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Bh._fromTokenResponse(n,r):null}}function Od(e,t){return t?Zu(t):(gu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ld.PROVIDER_ID="phone",Ld.PHONE_SIGN_IN_METHOD="phone";class Fd extends jh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vd(e){return id(e.auth,new Fd(e),e.bypassAuthState)}function Ud(e){const{auth:t,user:n}=e;return gu(n,t,"internal-error"),rd(n,new Fd(e),e.bypassAuthState)}async function zd(e){const{auth:t,user:n}=e;return gu(n,t,"internal-error"),nd(n,new Fd(e),e.bypassAuthState)}class Bd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vd;case"linkViaPopup":case"linkViaRedirect":return zd;case"reauthViaPopup":case"reauthViaRedirect":return Ud;default:hu(this.auth,"internal-error")}}resolve(e){vu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $d=new Su(2e3,1e4);class Hd extends Bd{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Hd.currentPopupAction&&Hd.currentPopupAction.cancel(),Hd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gu(e,this.auth,"internal-error"),e}async onExecution(){vu(1===this.filter.length,"Popup operations only handle one event");const e=vd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(du(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(du(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hd.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(du(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,$d.get())};e()}}Hd.currentPopupAction=null;const qd=new Map;class Wd extends Bd{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Qd(t),r=Gd(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Kd(e,t){qd.set(e._key(),t)}function Gd(e){return Zu(e._redirectPersistence)}function Qd(e){return nh("pendingRedirect",e.config.apiKey,e.name)}async function Yd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(El(e.app))return Promise.reject(pu(e));const r=wh(e),i=Od(r,t),s=new Wd(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Xd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zd(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zd(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(du(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jd(e))}saveEventToCache(e){this.cachedEventUids.add(Jd(e)),this.lastProcessedEventTime=Date.now()}}function Jd(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Zd(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const ef=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tf=/^https?/;async function nf(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Nu(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(rf(n))return}catch{}hu(e,"unauthorized-domain")}function rf(e){const t=wu(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!tf.test(n))return!1;if(ef.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const sf=new Su(3e4,6e4);function af(){const e=bd().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function of(e){return new Promise((t,n)=>{function r(){af(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{af(),n(du(e,"network-request-failed"))},timeout:sf.get()})}if(bd().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!bd().gapi?.load){const t=kh("iframefcb");return bd()[t]=()=>{gapi.load?r():n(du(e,"network-request-failed"))},Sh(`${xh.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw lf=null,e})}let lf=null;const cf=new Su(5e3,15e3),uf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function df(e){const t=e.config;gu(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ku(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Cl},i=hf.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${io(r).slice(1)}`}async function ff(e){const t=await function(e){return lf=lf||of(e),lf}(e),n=bd().gapi;return gu(n,e,"internal-error"),t.open({where:document.body,url:df(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uf,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=du(e,"network-request-failed"),s=bd().setTimeout(()=>{r(i)},cf.get());function a(){bd().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const pf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function gf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...pf,width:r.toString(),height:i.toString(),top:s,left:a},c=Ka().toLowerCase();n&&(o=oh(c)?"_blank":n),sh(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return dh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka())&&!!window.navigator?.standalone}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new mf(null);const h=window.open(t||"",o,u);gu(h,e,"popup-blocked");try{h.focus()}catch(d){}return new mf(h)}const yf="__/auth/handler",vf="emulator/auth/handler",wf=encodeURIComponent("fac");async function bf(e,t,n,r,i,s){gu(e.config.authDomain,e,"auth-domain-config-required"),gu(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Cl,eventId:i};if(t instanceof qh){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Wh){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${wf}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${yf}`;return ku(t,vf)}(e)}?${io(o).slice(1)}${c}`}const xf="webStorageSupport";const Sf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gd,this._completeRedirectFn=Yd,this._overrideRedirectResult=Kd}async _openPopup(e,t,n,r){vu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return gf(e,await bf(e,t,n,wu(),r),vd())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){bd().location.href=e}(await bf(e,t,n,wu(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(vu(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ff(e),n=new Xd(e);return t.register("authEvent",t=>{gu(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xf,{type:xf},n=>{const r=n?.[0]?.[xf];void 0!==r&&t(!!r),hu(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nf(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ph()||ah()||dh()}};var kf="@firebase/auth",Ef="1.11.0";class _f{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){gu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Tf=Ua("authIdTokenMaxAge")||300;let Cf=null;var If;xh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=du("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},If="Browser",Sl(new ho("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;gu(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:If,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mh(If)},c=new vh(r,i,s,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zu);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Sl(new ho("auth-internal",e=>(e=>new _f(e))(wh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Al(kf,Ef,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(If)),Al(kf,Ef,"esm2020");var Nf,Af,Pf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Rf={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return d(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=a(n)).j(t);h(c)||c.l(e)>0;)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Af=Rf.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},Nf=Rf.Integer=r}).apply("undefined"!==typeof Pf?Pf:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Df,jf,Mf,Lf,Of,Ff,Vf,Uf,zf="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bf={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof zf&&zf];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,w=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}w=!1}function k(){this.u=this.u,this.C=this.C}function E(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},E.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){E.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,E),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),N=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++N,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<j.length;t++)n=j[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function O(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=F(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),U={};function z(e,t,n,r,i){if(r&&r.once)return $(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=Y(n),e&&e[I]?e.J(t,n,a(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=G(e);if(l||(e[V]=l=new L(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)$(e,t[s],n,r,i);return null}return n=Y(n),e&&e[I]?e.K(t,n,a(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=Y(n),e&&e[I]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=G(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])O(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=G(t))?(O(n,e),0==n.h&&(n.src=null,t[V]=null)):P(e)}}}function W(e){return e in U?U[e]:U[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function G(e){return(e=e[V])instanceof L?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function X(){k.call(this),this.i=new L(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new E(t,e);else if(t instanceof E)t.target=t.target||e;else{var i=t;M(t=new E(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&O(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,k),X.prototype[I]=!0,X.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends k{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){k.call(this),this.h=e,this.g={}}u(ne,k);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){E.call(this,"d")}function de(){E.call(this,"c")}u(he,E),u(de,E);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){E.call(this,fe.Ia,e)}function ye(e){const t=me();J(t,new ge(t))}function ve(e,t){E.call(this,fe.STAT_EVENT,e),this.stat=t}function we(e){const t=me();J(t,new ve(t,e))}function be(e,t){E.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Se(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,E),fe.STAT_EVENT="statevent",u(ve,E),fe.Ja="timingevent",u(be,E),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ee,_e={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ie(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},Ee=new Ce;var Re={},De={};function je(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),wt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Oe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ve(e,e.H)}function Ve(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ue(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function $e(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ge(n.h,e)))if(!e.L&&Ge(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),$t(n)}Yt(n),we(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qe(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Ye(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ue(o),Fe(o)),r.g=a}else Qt(r);n.i.length>0&&qt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Vt(this.g)))){this.K||4!=l||7==c||ye(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Vt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,we(12),Be(this),ze(this);break e}ke(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$e(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Oe(this,n),t==De){4==l&&(this.m=4,we(14),e=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,we(15),ke(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}ke(this.i,this.l,t,null),$e(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,we(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(o),o.P=!0,we(11))}}else ke(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else ke(this.i,this.l,n,null),$e(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ne(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),Be(this),ze(this)}}}catch(Sp){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),we(17)),Be(this),this.m=2,ze(this)):Ve(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Ge(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Ye(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}qe.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),wt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function wt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function kt(){this.g=new oe}function Et(e){this.i=e.Sb||null,this.h=e.ab||!1}function _t(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Tt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ct(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Nt(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Nt(n),"string"===typeof e?null!=n&&Ie(n):it(e,t,n))}function Pt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(Et,le),Et.prototype.g=function(){return new _t(this.i,this.h)},u(_t,X),(e=_t.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ct(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ct(this):It(this),3==this.readyState&&Tt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ct(this))},e.Na=function(e){this.g&&(this.response=e,Ct(this))},e.ga=function(){this.g&&Ct(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_t.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Pt,X);var Rt=/^https?$/i,Dt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Mt(e),Ot(e)}function Mt(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Je)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Mt(e)}}finally{Ot(e)}}}function Ot(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||J(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Vt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new kt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Kt(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function $t(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Ht(e){$t(e),e.v&&(s.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function qt(e){if(!We(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),w||(v(),w=!0),b.add(t,e),e.D=0}}function Wt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Kt(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Gt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),je(n,r,t)}function Kt(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function Gt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Hf){throw e.push(s+"type="+encodeURIComponent("_badmap")),Hf}}catch(Hf){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),w||(v(),w=!0),b.add(t,e),e.A=0}}function Yt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Kt(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,Me(n,e)}function Zt(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Ge(e.h,t))return;n=t.G,Ye(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;J(r=me(),new be(r,n)),qt(e)}else Qt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Yt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Se;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else we(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Kt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new Et({ab:n})):new Pt(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){X.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function un(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=Pt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ee.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),Ot(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ot(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){we(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),qt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),M(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Gt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Kt(this,n),s&&(this.R?t="headers="+Ie(Nt(s))+"&"+t:this.u&&At(n,this.u,s)),Qe(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,je(i,n,null)):je(i,n,t),this.I=2}}else 3==this.I&&(e?Wt(this,e):0==this.i.length||We(this.h)||Wt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),$t(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,$t(this),Yt(this),we(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&qt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,he),u(hn,de),u(dn,on),dn.prototype.ra=function(){J(this.g,"a")},dn.prototype.qa=function(e){J(this.g,new un(e))},dn.prototype.pa=function(e){J(this.g,new hn)},dn.prototype.oa=function(){J(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Uf=Bf.createWebChannelTransport=function(){return new ln},Vf=Bf.getStatEventTarget=function(){return me()},Ff=Bf.Event=fe,Of=Bf.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,Lf=Bf.ErrorCode=_e,Te.COMPLETE="complete",Mf=Bf.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,jf=Bf.WebChannel=ce,Bf.FetchXmlHttpFactory=Et,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,Df=Bf.XhrIo=Pt}).apply("undefined"!==typeof zf?zf:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const $f="@firebase/firestore",Hf="4.9.2";class qf{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qf.UNAUTHENTICATED=new qf(null),qf.GOOGLE_CREDENTIALS=new qf("google-credentials-uid"),qf.FIRST_PARTY=new qf("first-party-uid"),qf.MOCK_USER=new qf("mock-user");let Wf="12.3.0";const Kf=new So("@firebase/firestore");function Gf(){return Kf.logLevel}function Qf(e){if(Kf.logLevel<=yo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Jf);Kf.debug(`Firestore (${Wf}): ${e}`,...i)}}function Yf(e){if(Kf.logLevel<=yo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Jf);Kf.error(`Firestore (${Wf}): ${e}`,...i)}}function Xf(e){if(Kf.logLevel<=yo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Jf);Kf.warn(`Firestore (${Wf}): ${e}`,...i)}}function Jf(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Zf(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ep(e,r,n)}function ep(e,t,n){let r=`FIRESTORE (${Wf}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Yf(r),new Error(r)}function tp(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||ep(t,i,r)}function np(e,t){return e}const rp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ip extends Za{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sp{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ap{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class op{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qf.UNAUTHENTICATED))}shutdown(){}}class lp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cp{constructor(e){this.t=e,this.currentUser=qf.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tp(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new sp;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sp,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Qf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Qf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sp)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Qf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tp("string"==typeof t.accessToken,31837,{l:t}),new ap(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tp(null===e||"string"==typeof e,2055,{h:e}),new qf(e)}}class up{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=qf.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hp{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new up(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(qf.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fp{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,El(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tp(void 0===this.o,3512);const n=e=>{null!=e.error&&Qf("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Qf("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Qf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Qf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(tp("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new dp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pp(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class mp{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=pp(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function gp(e,t){return e<t?-1:e>t?1:0}function yp(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return bp(n)===bp(i)?gp(n,i):bp(n)?1:-1}return gp(e.length,t.length)}const vp=55296,wp=57343;function bp(e){const t=e.charCodeAt(0);return t>=vp&&t<=wp}function xp(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Sp="__name__";class kp{constructor(e,t,n){void 0===t?t=0:t>e.length&&Zf(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Zf(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===kp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kp?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=kp.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return gp(e.length,t.length)}static compareSegments(e,t){const n=kp.isNumericId(e),r=kp.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?kp.extractNumericId(e).compare(kp.extractNumericId(t)):yp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nf.fromString(e.substring(4,e.length-2))}}class Ep extends kp{construct(e,t,n){return new Ep(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ip(rp.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Ep(e)}static emptyPath(){return new Ep([])}}const _p=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tp extends kp{construct(e,t,n){return new Tp(e,t,n)}static isValidIdentifier(e){return _p.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tp.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Sp}static keyField(){return new Tp([Sp])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ip(rp.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ip(rp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ip(rp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ip(rp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tp(t)}static emptyPath(){return new Tp([])}}class Cp{constructor(e){this.path=e}static fromPath(e){return new Cp(Ep.fromString(e))}static fromName(e){return new Cp(Ep.fromString(e).popFirst(5))}static empty(){return new Cp(Ep.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ep.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ep.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Cp(new Ep(e.slice()))}}function Ip(e,t,n){if(!n)throw new ip(rp.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Np(e){if(!Cp.isDocumentKey(e))throw new ip(rp.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ap(e){if(Cp.isDocumentKey(e))throw new ip(rp.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Pp(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Rp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Zf(12329,{type:typeof e})}function Dp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ip(rp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rp(e);throw new ip(rp.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function jp(e,t){const n={typeString:e};return t&&(n.value=t),n}function Mp(e,t){if(!Pp(e))throw new ip(rp.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ip(rp.INVALID_ARGUMENT,n);return!0}const Lp=-62135596800,Op=1e6;class Fp{static now(){return Fp.fromMillis(Date.now())}static fromDate(e){return Fp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Op);return new Fp(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ip(rp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ip(rp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Lp)throw new ip(rp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ip(rp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Op}_compareTo(e){return this.seconds===e.seconds?gp(this.nanoseconds,e.nanoseconds):gp(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mp(e,Fp._jsonSchema))return new Fp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fp._jsonSchemaVersion="firestore/timestamp/1.0",Fp._jsonSchema={type:jp("string",Fp._jsonSchemaVersion),seconds:jp("number"),nanoseconds:jp("number")};class Vp{static fromTimestamp(e){return new Vp(e)}static min(){return new Vp(new Fp(0,0))}static max(){return new Vp(new Fp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Up=-1;class zp{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}zp.UNKNOWN_ID=-1;function Bp(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Vp.fromTimestamp(1e9===r?new Fp(n+1,0):new Fp(n,r));return new Hp(i,Cp.empty(),t)}function $p(e){return new Hp(e.readTime,e.key,Up)}class Hp{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Hp(Vp.min(),Cp.empty(),Up)}static max(){return new Hp(Vp.max(),Cp.empty(),Up)}}function qp(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Cp.comparator(e.documentKey,t.documentKey),0!==n?n:gp(e.largestBatchId,t.largestBatchId))}const Wp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Gp(e){if(e.code!==rp.FAILED_PRECONDITION||e.message!==Wp)throw e;Qf("LocalStore","Unexpectedly lost primary lease")}class Qp{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zf(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qp((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Qp?t:Qp.resolve(t)}catch(e){return Qp.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Qp.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Qp.reject(t)}static resolve(e){return new Qp((t,n)=>{t(e)})}static reject(e){return new Qp((t,n)=>{n(e)})}static waitFor(e){return new Qp((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Qp.resolve(!1);for(const n of e)t=t.next(e=>e?Qp.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Qp((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Qp((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Yp(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xp(e){return"IndexedDbTransactionError"===e.name}class Jp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jp.ce=-1;const Zp=-1;function em(e){return null==e}function tm(e){return 0===e&&1/e==-1/0}function nm(e){return"number"==typeof e&&Number.isInteger(e)&&!tm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const rm="\x01";function im(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=am(t)),t=sm(e.get(n),t);return am(t)}function sm(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case rm:n+="\x01\x11";break;default:n+=t}}return n}function am(e){return e+rm+"\x01"}const om="remoteDocuments",lm="owner",cm="mutationQueues",um="mutations";const hm="documentMutations",dm="remoteDocumentsV14",fm="remoteDocumentGlobal",pm="targets",mm="targetDocuments",gm="targetGlobal",ym="collectionParents",vm="clientMetadata",wm="bundles",bm="namedQueries",xm="indexConfiguration",Sm="indexState",km="indexEntries",Em="documentOverlays",_m="globals",Tm=[cm,um,hm,om,pm,lm,gm,mm,vm,fm,ym,wm,bm],Cm=[cm,um,hm,dm,pm,lm,gm,mm,vm,fm,ym,wm,bm,Em],Im=Cm,Nm=[...Im,xm,Sm,km];function Am(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Dm{constructor(e,t){this.comparator=e,this.root=t||Mm.EMPTY}insert(e,t){return new Dm(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mm.BLACK,null,null))}remove(e){return new Dm(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mm.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jm(this.root,e,this.comparator,!0)}}class jm{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mm{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Mm.RED,this.left=null!=r?r:Mm.EMPTY,this.right=null!=i?i:Mm.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Mm(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Mm.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Mm.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mm.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Zf(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Zf(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Zf(27949);return e+(this.isRed()?0:1)}}Mm.EMPTY=null,Mm.RED=!0,Mm.BLACK=!1,Mm.EMPTY=new class{constructor(){this.size=0}get key(){throw Zf(57766)}get value(){throw Zf(16141)}get color(){throw Zf(16727)}get left(){throw Zf(29726)}get right(){throw Zf(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Mm(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lm{constructor(e){this.comparator=e,this.data=new Dm(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Om(this.data.getIterator())}getIteratorFrom(e){return new Om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Lm))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lm(this.comparator);return t.data=e,t}}class Om{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fm{constructor(e){this.fields=e,e.sort(Tp.comparator)}static empty(){return new Fm([])}unionWith(e){let t=new Lm(Tp.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fm(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xp(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Vm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Um{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vm("Invalid base64 string: "+e):e}}(e);return new Um(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Um(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gp(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Um.EMPTY_BYTE_STRING=new Um("");const zm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bm(e){if(tp(!!e,39018),"string"==typeof e){let t=0;const n=zm.exec(e);if(tp(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$m(e.seconds),nanos:$m(e.nanos)}}function $m(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hm(e){return"string"==typeof e?Um.fromBase64String(e):Um.fromUint8Array(e)}const qm="server_timestamp",Wm="__type__",Km="__previous_value__",Gm="__local_write_time__";function Qm(e){const t=(e?.mapValue?.fields||{})[Wm]?.stringValue;return t===qm}function Ym(e){const t=e.mapValue.fields[Km];return Qm(t)?Ym(t):t}function Xm(e){const t=Bm(e.mapValue.fields[Gm].timestampValue);return new Fp(t.seconds,t.nanos)}class Jm{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Zm="(default)";class eg{constructor(e,t){this.projectId=e,this.database=t||Zm}static empty(){return new eg("","")}get isDefaultDatabase(){return this.database===Zm}isEqual(e){return e instanceof eg&&e.projectId===this.projectId&&e.database===this.database}}const tg="__type__",ng="__max__",rg={mapValue:{fields:{__type__:{stringValue:ng}}}},ig="__vector__",sg="value";function ag(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qm(e)?4:Sg(e)?9007199254740991:bg(e)?10:11:Zf(28295,{value:e})}function og(e,t){if(e===t)return!0;const n=ag(e);if(n!==ag(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Xm(e).isEqual(Xm(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Bm(e.timestampValue),r=Bm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hm(e.bytesValue).isEqual(Hm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $m(e.geoPointValue.latitude)===$m(t.geoPointValue.latitude)&&$m(e.geoPointValue.longitude)===$m(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $m(e.integerValue)===$m(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$m(e.doubleValue),r=$m(t.doubleValue);return n===r?tm(n)===tm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xp(e.arrayValue.values||[],t.arrayValue.values||[],og);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Am(n)!==Am(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!og(n[i],r[i])))return!1;return!0}(e,t);default:return Zf(52216,{left:e})}}function lg(e,t){return void 0!==(e.values||[]).find(e=>og(e,t))}function cg(e,t){if(e===t)return 0;const n=ag(e),r=ag(t);if(n!==r)return gp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gp(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$m(e.integerValue||e.doubleValue),r=$m(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ug(e.timestampValue,t.timestampValue);case 4:return ug(Xm(e),Xm(t));case 5:return yp(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hm(e),r=Hm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=gp(n[i],r[i]);if(0!==e)return e}return gp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=gp($m(e.latitude),$m(t.latitude));return 0!==n?n:gp($m(e.longitude),$m(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return hg(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[sg]?.arrayValue,s=r[sg]?.arrayValue,a=gp(i?.values?.length||0,s?.values?.length||0);return 0!==a?a:hg(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===rg.mapValue&&t===rg.mapValue)return 0;if(e===rg.mapValue)return 1;if(t===rg.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=yp(r[a],s[a]);if(0!==e)return e;const t=cg(n[r[a]],i[s[a]]);if(0!==t)return t}return gp(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Zf(23264,{he:n})}}function ug(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return gp(e,t);const n=Bm(e),r=Bm(t),i=gp(n.seconds,r.seconds);return 0!==i?i:gp(n.nanos,r.nanos)}function hg(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cg(n[i],r[i]);if(e)return e}return gp(n.length,r.length)}function dg(e){return fg(e)}function fg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Bm(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Hm(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Cp.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=fg(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${fg(e.fields[i])}`;return n+"}"}(e.mapValue):Zf(61005,{value:e})}function pg(e){switch(ag(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ym(e);return t?16+pg(t):16;case 5:return 2*e.stringValue.length;case 6:return Hm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+pg(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Pm(e.fields,(e,n)=>{t+=e.length+pg(n)}),t}(e.mapValue);default:throw Zf(13486,{value:e})}}function mg(e){return!!e&&"integerValue"in e}function gg(e){return!!e&&"arrayValue"in e}function yg(e){return!!e&&"nullValue"in e}function vg(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wg(e){return!!e&&"mapValue"in e}function bg(e){const t=(e?.mapValue?.fields||{})[tg]?.stringValue;return t===ig}function xg(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Pm(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=xg(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xg(e.arrayValue.values[n]);return t}return{...e}}function Sg(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ng}class kg{constructor(e){this.value=e}static empty(){return new kg({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!wg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xg(t)}setAll(e){let t=Tp.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=xg(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());wg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return og(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];wg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Pm(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new kg(xg(this.value))}}function Eg(e){const t=[];return Pm(e.fields,(e,n)=>{const r=new Tp([e]);if(wg(n)){const e=Eg(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Fm(t)}class _g{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new _g(e,0,Vp.min(),Vp.min(),Vp.min(),kg.empty(),0)}static newFoundDocument(e,t,n,r){return new _g(e,1,t,Vp.min(),n,r,0)}static newNoDocument(e,t){return new _g(e,2,t,Vp.min(),Vp.min(),kg.empty(),0)}static newUnknownDocument(e,t){return new _g(e,3,t,Vp.min(),Vp.min(),kg.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Vp.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kg.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kg.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vp.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _g&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _g(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Tg{constructor(e,t){this.position=e,this.inclusive=t}}function Cg(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Cp.comparator(Cp.fromName(a.referenceValue),n.key):cg(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ig(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!og(e.position[n],t.position[n]))return!1;return!0}class Ng{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ag(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pg{}class Rg extends Pg{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ug(e,t,n):"array-contains"===t?new Hg(e,n):"in"===t?new qg(e,n):"not-in"===t?new Wg(e,n):"array-contains-any"===t?new Kg(e,n):new Rg(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new zg(e,n):new Bg(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(cg(t,this.value)):null!==t&&ag(this.value)===ag(t)&&this.matchesComparison(cg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zf(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dg extends Pg{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Dg(e,t)}matches(e){return jg(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jg(e){return"and"===e.op}function Mg(e){return Lg(e)&&jg(e)}function Lg(e){for(const t of e.filters)if(t instanceof Dg)return!1;return!0}function Og(e){if(e instanceof Rg)return e.field.canonicalString()+e.op.toString()+dg(e.value);if(Mg(e))return e.filters.map(e=>Og(e)).join(",");{const t=e.filters.map(e=>Og(e)).join(",");return`${e.op}(${t})`}}function Fg(e,t){return e instanceof Rg?function(e,t){return t instanceof Rg&&e.op===t.op&&e.field.isEqual(t.field)&&og(e.value,t.value)}(e,t):e instanceof Dg?function(e,t){return t instanceof Dg&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Fg(n,t.filters[r]),!0)}(e,t):void Zf(19439)}function Vg(e){return e instanceof Rg?function(e){return`${e.field.canonicalString()} ${e.op} ${dg(e.value)}`}(e):e instanceof Dg?function(e){return e.op.toString()+" {"+e.getFilters().map(Vg).join(" ,")+"}"}(e):"Filter"}class Ug extends Rg{constructor(e,t,n){super(e,t,n),this.key=Cp.fromName(n.referenceValue)}matches(e){const t=Cp.comparator(e.key,this.key);return this.matchesComparison(t)}}class zg extends Rg{constructor(e,t){super(e,"in",t),this.keys=$g("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bg extends Rg{constructor(e,t){super(e,"not-in",t),this.keys=$g("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $g(e,t){return(t.arrayValue?.values||[]).map(e=>Cp.fromName(e.referenceValue))}class Hg extends Rg{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gg(t)&&lg(t.arrayValue,this.value)}}class qg extends Rg{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lg(this.value.arrayValue,t)}}class Wg extends Rg{constructor(e,t){super(e,"not-in",t)}matches(e){if(lg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!lg(this.value.arrayValue,t)}}class Kg extends Rg{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>lg(this.value.arrayValue,e))}}class Gg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Qg(e){return new Gg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Yg(e){const t=np(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Og(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),em(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>dg(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>dg(e)).join(",")),t.Te=e}return t.Te}function Xg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ag(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Fg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ig(e.startAt,t.startAt)&&Ig(e.endAt,t.endAt)}function Jg(e){return Cp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Zg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ey(e,t,n,r,i,s,a,o){return new Zg(e,t,n,r,i,s,a,o)}function ty(e){return new Zg(e)}function ny(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ry(e){return null!==e.collectionGroup}function iy(e){const t=np(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Lm(Tp.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ng(r,n))}),e.has(Tp.keyField().canonicalString())||t.Ie.push(new Ng(Tp.keyField(),n))}return t.Ie}function sy(e){const t=np(e);return t.Ee||(t.Ee=ay(t,iy(e))),t.Ee}function ay(e,t){if("F"===e.limitType)return Qg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ng(e.field,t)});const n=e.endAt?new Tg(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Tg(e.startAt.position,e.startAt.inclusive):null;return Qg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function oy(e,t,n){return new Zg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ly(e,t){return Xg(sy(e),sy(t))&&e.limitType===t.limitType}function cy(e){return`${Yg(sy(e))}|lt:${e.limitType}`}function uy(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Vg(e)).join(", ")}]`),em(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>dg(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>dg(e)).join(",")),`Target(${t})`}(sy(e))}; limitType=${e.limitType})`}function hy(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Cp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of iy(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Cg(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,iy(e),t))&&!(e.endAt&&!function(e,t,n){const r=Cg(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,iy(e),t))}(e,t)}function dy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fy(e){return(t,n)=>{let r=!1;for(const i of iy(e)){const e=py(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function py(e,t,n){const r=e.field.isKeyField()?Cp.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cg(r,i):Zf(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Zf(19790,{direction:e.dir})}}class my{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Pm(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Rm(this.inner)}size(){return this.innerSize}}const gy=new Dm(Cp.comparator);function yy(){return gy}const vy=new Dm(Cp.comparator);function wy(){let e=vy;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function by(e){let t=vy;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function xy(){return ky()}function Sy(){return ky()}function ky(){return new my(e=>e.toString(),(e,t)=>e.isEqual(t))}const Ey=new Dm(Cp.comparator),_y=new Lm(Cp.comparator);function Ty(){let e=_y;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Cy=new Lm(gp);function Iy(){return Cy}function Ny(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tm(t)?"-0":t}}function Ay(e){return{integerValue:""+e}}function Py(e,t){return nm(t)?Ay(t):Ny(e,t)}class Ry{constructor(){this._=void 0}}function Dy(e,t,n){return e instanceof Ly?function(e,t){const n={fields:{[Wm]:{stringValue:qm},[Gm]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Qm(t)&&(t=Ym(t)),t&&(n.fields[Km]=t),{mapValue:n}}(n,t):e instanceof Oy?Fy(e,t):e instanceof Vy?Uy(e,t):function(e,t){const n=My(e,t),r=By(n)+By(e.Ae);return mg(n)&&mg(e.Ae)?Ay(r):Ny(e.serializer,r)}(e,t)}function jy(e,t,n){return e instanceof Oy?Fy(e,t):e instanceof Vy?Uy(e,t):n}function My(e,t){return e instanceof zy?function(e){return mg(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ly extends Ry{}class Oy extends Ry{constructor(e){super(),this.elements=e}}function Fy(e,t){const n=$y(t);for(const r of e.elements)n.some(e=>og(e,r))||n.push(r);return{arrayValue:{values:n}}}class Vy extends Ry{constructor(e){super(),this.elements=e}}function Uy(e,t){let n=$y(t);for(const r of e.elements)n=n.filter(e=>!og(e,r));return{arrayValue:{values:n}}}class zy extends Ry{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function By(e){return $m(e.integerValue||e.doubleValue)}function $y(e){return gg(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Hy{constructor(e,t){this.field=e,this.transform=t}}class qy{constructor(e,t){this.version=e,this.transformResults=t}}class Wy{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wy}static exists(e){return new Wy(void 0,e)}static updateTime(e){return new Wy(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ky(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Gy{}function Qy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sv(e.key,Wy.none()):new ev(e.key,e.data,Wy.none());{const n=e.data,r=kg.empty();let i=new Lm(Tp.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new tv(e.key,r,new Fm(i.toArray()),Wy.none())}}function Yy(e,t,n){e instanceof ev?function(e,t,n){const r=e.value.clone(),i=rv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof tv?function(e,t,n){if(!Ky(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(nv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xy(e,t,n,r){return e instanceof ev?function(e,t,n,r){if(!Ky(e.precondition,t))return n;const i=e.value.clone(),s=iv(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof tv?function(e,t,n,r){if(!Ky(e.precondition,t))return n;const i=iv(e.fieldTransforms,r,t),s=t.data;return s.setAll(nv(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ky(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jy(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=My(r.transform,e||null);null!=i&&(null===n&&(n=kg.empty()),n.set(r.field,i))}return n||null}function Zy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xp(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Oy&&t instanceof Oy||e instanceof Vy&&t instanceof Vy?xp(e.elements,t.elements,og):e instanceof zy&&t instanceof zy?og(e.Ae,t.Ae):e instanceof Ly&&t instanceof Ly}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ev extends Gy{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tv extends Gy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nv(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function rv(e,t,n){const r=new Map;tp(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,jy(a,o,n[i]))}return r}function iv(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Dy(e,s,t))}return r}class sv extends Gy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class av extends Gy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ov{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Yy(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xy(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xy(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Sy();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Qy(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Vp.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ty())}isEqual(e){return this.batchId===e.batchId&&xp(this.mutations,e.mutations,(e,t)=>Zy(e,t))&&xp(this.baseMutations,e.baseMutations,(e,t)=>Zy(e,t))}}class lv{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){tp(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Ey;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new lv(e,t,n,r)}}class cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uv{constructor(e,t){this.count=e,this.unchangedNames=t}}var hv,dv;function fv(e){switch(e){case rp.OK:return Zf(64938);case rp.CANCELLED:case rp.UNKNOWN:case rp.DEADLINE_EXCEEDED:case rp.RESOURCE_EXHAUSTED:case rp.INTERNAL:case rp.UNAVAILABLE:case rp.UNAUTHENTICATED:return!1;case rp.INVALID_ARGUMENT:case rp.NOT_FOUND:case rp.ALREADY_EXISTS:case rp.PERMISSION_DENIED:case rp.FAILED_PRECONDITION:case rp.ABORTED:case rp.OUT_OF_RANGE:case rp.UNIMPLEMENTED:case rp.DATA_LOSS:return!0;default:return Zf(15467,{code:e})}}function pv(e){if(void 0===e)return Yf("GRPC error has no .code"),rp.UNKNOWN;switch(e){case hv.OK:return rp.OK;case hv.CANCELLED:return rp.CANCELLED;case hv.UNKNOWN:return rp.UNKNOWN;case hv.DEADLINE_EXCEEDED:return rp.DEADLINE_EXCEEDED;case hv.RESOURCE_EXHAUSTED:return rp.RESOURCE_EXHAUSTED;case hv.INTERNAL:return rp.INTERNAL;case hv.UNAVAILABLE:return rp.UNAVAILABLE;case hv.UNAUTHENTICATED:return rp.UNAUTHENTICATED;case hv.INVALID_ARGUMENT:return rp.INVALID_ARGUMENT;case hv.NOT_FOUND:return rp.NOT_FOUND;case hv.ALREADY_EXISTS:return rp.ALREADY_EXISTS;case hv.PERMISSION_DENIED:return rp.PERMISSION_DENIED;case hv.FAILED_PRECONDITION:return rp.FAILED_PRECONDITION;case hv.ABORTED:return rp.ABORTED;case hv.OUT_OF_RANGE:return rp.OUT_OF_RANGE;case hv.UNIMPLEMENTED:return rp.UNIMPLEMENTED;case hv.DATA_LOSS:return rp.DATA_LOSS;default:return Zf(39323,{code:e})}}(dv=hv||(hv={}))[dv.OK=0]="OK",dv[dv.CANCELLED=1]="CANCELLED",dv[dv.UNKNOWN=2]="UNKNOWN",dv[dv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dv[dv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dv[dv.NOT_FOUND=5]="NOT_FOUND",dv[dv.ALREADY_EXISTS=6]="ALREADY_EXISTS",dv[dv.PERMISSION_DENIED=7]="PERMISSION_DENIED",dv[dv.UNAUTHENTICATED=16]="UNAUTHENTICATED",dv[dv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dv[dv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dv[dv.ABORTED=10]="ABORTED",dv[dv.OUT_OF_RANGE=11]="OUT_OF_RANGE",dv[dv.UNIMPLEMENTED=12]="UNIMPLEMENTED",dv[dv.INTERNAL=13]="INTERNAL",dv[dv.UNAVAILABLE=14]="UNAVAILABLE",dv[dv.DATA_LOSS=15]="DATA_LOSS";let mv=null;function gv(){return new TextEncoder}const yv=new Nf([4294967295,4294967295],0);function vv(e){const t=gv().encode(e),n=new Af;return n.update(t),new Uint8Array(n.digest())}function wv(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Nf([n,r],0),new Nf([i,s],0)]}class bv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xv(`Invalid padding: ${t}`);if(n<0)throw new xv(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new xv(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new xv(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Nf.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Nf.fromNumber(n)));return 1===r.compare(yv)&&(r=new Nf([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=vv(e),[n,r]=wv(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new bv(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=vv(e),[n,r]=wv(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sv{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,kv.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Sv(Vp.min(),r,new Dm(gp),yy(),Ty())}}class kv{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new kv(n,t,Ty(),Ty(),Ty())}}class Ev{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class _v{constructor(e,t){this.targetId=e,this.Ce=t}}class Tv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Um.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Cv{constructor(){this.ve=0,this.Fe=Av(),this.Me=Um.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ty(),t=Ty(),n=Ty();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Zf(38017,{changeType:i})}}),new kv(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Av()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tp(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Iv{constructor(e){this.Ge=e,this.ze=new Map,this.je=yy(),this.Je=Nv(),this.He=Nv(),this.Ye=new Dm(gp)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Zf(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Jg(i))if(0===n){const e=new Cp(i.path);this.et(t,e,_g.newNoDocument(e,Vp.min()))}else tp(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}mv?.lt(function(e,t,n,r,i){const s={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},a=t.unchangedNames;return a&&(s.bloomFilter={applied:0===i,hashCount:a?.hashCount??0,bitmapLength:a?.bits?.bitmap?.length??0,padding:a?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),s}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Hm(n).toUint8Array()}catch(e){if(e instanceof Vm)return Xf("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new bv(s,r,i)}catch(e){return Xf(e instanceof xv?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Jg(i.target)){const t=new Cp(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,_g.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Ty();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Sv(e,t,this.Ye,this.je,n);return this.je=yy(),this.Je=Nv(),this.He=Nv(),this.Ye=new Dm(gp),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Cv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Lm(gp),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Lm(gp),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Qf("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Cv),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nv(){return new Dm(Cp.comparator)}function Av(){return new Dm(Cp.comparator)}const Pv={asc:"ASCENDING",desc:"DESCENDING"},Rv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dv={and:"AND",or:"OR"};class jv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mv(e,t){return e.useProto3Json||em(t)?t:{value:t}}function Lv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ov(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fv(e,t){return Lv(e,t.toTimestamp())}function Vv(e){return tp(!!e,49232),Vp.fromTimestamp(function(e){const t=Bm(e);return new Fp(t.seconds,t.nanos)}(e))}function Uv(e,t){return zv(e,t).canonicalString()}function zv(e,t){const n=function(e){return new Ep(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Bv(e){const t=Ep.fromString(e);return tp(lw(t),10190,{key:t.toString()}),t}function $v(e,t){return Uv(e.databaseId,t.path)}function Hv(e,t){const n=Bv(t);if(n.get(1)!==e.databaseId.projectId)throw new ip(rp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ip(rp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Cp(Gv(n))}function qv(e,t){return Uv(e.databaseId,t)}function Wv(e){const t=Bv(e);return 4===t.length?Ep.emptyPath():Gv(t)}function Kv(e){return new Ep(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gv(e){return tp(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Qv(e,t,n){return{name:$v(e,t),fields:n.value.mapValue.fields}}function Yv(e,t){let n;if(t instanceof ev)n={update:Qv(e,t.key,t.value)};else if(t instanceof sv)n={delete:$v(e,t.key)};else if(t instanceof tv)n={update:Qv(e,t.key,t.data),updateMask:ow(t.fieldMask)};else{if(!(t instanceof av))return Zf(16599,{Vt:t.type});n={verify:$v(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ly)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Oy)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vy)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zy)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Zf(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fv(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Zf(27497)}(e,t.precondition)),n}function Xv(e,t){return{documents:[qv(e,t.path)]}}function Jv(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qv(e,i);const s=function(e){if(0!==e.length)return aw(Dg.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:iw(e.field),direction:tw(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Mv(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Zv(e){let t=Wv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tp(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ew(e);return t instanceof Dg&&Mg(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Ng(sw(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,em(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Tg(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Tg(n,t)}(n.endAt)),ey(t,i,a,s,o,"F",l,c)}function ew(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=sw(e.unaryFilter.field);return Rg.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=sw(e.unaryFilter.field);return Rg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=sw(e.unaryFilter.field);return Rg.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=sw(e.unaryFilter.field);return Rg.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Zf(61313);default:return Zf(60726)}}(e):void 0!==e.fieldFilter?function(e){return Rg.create(sw(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Zf(58110);default:return Zf(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Dg.create(e.compositeFilter.filters.map(e=>ew(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Zf(1026)}}(e.compositeFilter.op))}(e):Zf(30097,{filter:e})}function tw(e){return Pv[e]}function nw(e){return Rv[e]}function rw(e){return Dv[e]}function iw(e){return{fieldPath:e.canonicalString()}}function sw(e){return Tp.fromServerFormat(e.fieldPath)}function aw(e){return e instanceof Rg?function(e){if("=="===e.op){if(vg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NAN"}};if(yg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NOT_NAN"}};if(yg(e.value))return{unaryFilter:{field:iw(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iw(e.field),op:nw(e.op),value:e.value}}}(e):e instanceof Dg?function(e){const t=e.getFilters().map(e=>aw(e));return 1===t.length?t[0]:{compositeFilter:{op:rw(e.op),filters:t}}}(e):Zf(54877,{filter:e})}function ow(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function lw(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class cw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vp.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vp.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Um.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new cw(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cw(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uw{constructor(e){this.yt=e}}function hw(e){const t=Zv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?oy(t,t.limit,"L"):t}class dw{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt($m(e.integerValue));else if("doubleValue"in e){const n=$m(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),tm(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Bm(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Hm(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Sg(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):bg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Zf(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=sg,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt($m(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Cp.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}dw.Kt=new dw;class fw{constructor(){this.Cn=new pw}addToCollectionParentIndex(e,t){return this.Cn.add(t),Qp.resolve()}getCollectionParents(e,t){return Qp.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Qp.resolve()}deleteFieldIndex(e,t){return Qp.resolve()}deleteAllFieldIndexes(e){return Qp.resolve()}createTargetIndexes(e,t){return Qp.resolve()}getDocumentsMatchingTarget(e,t){return Qp.resolve(null)}getIndexType(e,t){return Qp.resolve(0)}getFieldIndexes(e,t){return Qp.resolve([])}getNextCollectionGroupToUpdate(e){return Qp.resolve(null)}getMinOffset(e,t){return Qp.resolve(Hp.min())}getMinOffsetFromCollectionGroup(e,t){return Qp.resolve(Hp.min())}updateCollectionGroup(e,t,n){return Qp.resolve()}updateIndexEntries(e,t){return Qp.resolve()}}class pw{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lm(Ep.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Lm(Ep.comparator)).toArray()}}new Uint8Array(0);const mw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gw=41943040;class yw{static withCacheSize(e){return new yw(e,yw.DEFAULT_COLLECTION_PERCENTILE,yw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}yw.DEFAULT_COLLECTION_PERCENTILE=10,yw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yw.DEFAULT=new yw(gw,yw.DEFAULT_COLLECTION_PERCENTILE,yw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yw.DISABLED=new yw(-1,0,0);class vw{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vw(0)}static cr(){return new vw(-1)}}const ww="LruGarbageCollector",bw=1048576;function xw(e,t){let[n,r]=e,[i,s]=t;const a=gp(n,i);return 0===a?gp(r,s):a}class Sw{constructor(e){this.Ir=e,this.buffer=new Lm(xw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();xw(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kw{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Qf(ww,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Xp(e)?Qf(ww,"Ignoring IndexedDB error during garbage collection: ",e):await Gp(e)}await this.Vr(3e5)})}}class Ew{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Qp.resolve(Jp.ce);const n=new Sw(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qf("LruGarbageCollector","Garbage collection skipped; disabled"),Qp.resolve(mw)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Qf("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Qf("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Gf()<=yo.DEBUG&&Qf("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),Qp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function _w(e,t){return new Ew(e,t)}class Tw{constructor(){this.changes=new my(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_g.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Qp.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Iw{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Xy(n.mutation,e,Fm.empty(),Fp.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ty()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ty();const r=xy();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=wy();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=xy();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ty()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=yy();const s=ky(),a=ky();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof tv)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Xy(a.mutation,t,a.mutation.getFieldMask(),Fp.now())):s.set(t.key,Fm.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>a.set(e,new Cw(t,s.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const n=ky();let r=new Dm((e,t)=>e-t),i=Ty();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Fm.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||Ty()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Sy();l.forEach(e=>{if(!i.has(e)){const r=Qy(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Qp.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Cp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ry(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Qp.resolve(xy());let a=Up,o=i;return s.next(t=>Qp.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Qp.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,Ty())).next(e=>({batchId:a,changes:by(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Cp(t)).next(e=>{let t=wy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=wy();return this.indexManager.getCollectionParents(e,i).next(a=>Qp.forEach(a,a=>{const o=function(e,t){return new Zg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,_g.newInvalidDocument(r)))});let n=wy();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Xy(s.mutation,r,Fm.empty(),Fp.now()),hy(t,r)&&(n=n.insert(e,r))}),n})}}class Nw{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Qp.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Vv(e.createTime)}}(t)),Qp.resolve()}getNamedQuery(e,t){return Qp.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:hw(e.bundledQuery),readTime:Vv(e.readTime)}}(t)),Qp.resolve()}}class Aw{constructor(){this.overlays=new Dm(Cp.comparator),this.qr=new Map}getOverlay(e,t){return Qp.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xy();return Qp.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Qp.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Qp.resolve()}getOverlaysForCollection(e,t,n){const r=xy(),i=t.length+1,s=new Cp(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Qp.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Dm((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xy(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=xy(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Qp.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new cv(t,n));let i=this.qr.get(t);void 0===i&&(i=Ty(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Pw{constructor(){this.sessionToken=Um.EMPTY_BYTE_STRING}getSessionToken(e){return Qp.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qp.resolve()}}class Rw{constructor(){this.Qr=new Lm(Dw.$r),this.Ur=new Lm(Dw.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Dw(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Dw(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Cp(new Ep([])),n=new Dw(t,e),r=new Dw(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Cp(new Ep([])),n=new Dw(t,e),r=new Dw(t,e+1);let i=Ty();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Dw(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Dw{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Cp.comparator(e.key,t.key)||gp(e.Yr,t.Yr)}static Kr(e,t){return gp(e.Yr,t.Yr)||Cp.comparator(e.key,t.key)}}class jw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Lm(Dw.$r)}checkEmpty(e){return Qp.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ov(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new Dw(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Qp.resolve(s)}lookupMutationBatch(e,t){return Qp.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Qp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Qp.resolve(0===this.mutationQueue.length?Zp:this.tr-1)}getAllMutationBatches(e){return Qp.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dw(t,0),r=new Dw(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Qp.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lm(gp);return t.forEach(e=>{const t=new Dw(e,0),r=new Dw(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Qp.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Cp.isDocumentKey(i)||(i=i.child(""));const s=new Dw(new Cp(i),0);let a=new Lm(gp);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Qp.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){tp(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Qp.forEach(t.mutations,r=>{const i=new Dw(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Dw(t,0),r=this.Zr.firstAfterOrEqual(n);return Qp.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qp.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Mw{constructor(e){this.ri=e,this.docs=new Dm(Cp.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Qp.resolve(n?n.document.mutableCopy():_g.newInvalidDocument(t))}getEntries(e,t){let n=yy();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():_g.newInvalidDocument(e))}),Qp.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=yy();const s=t.path,a=new Cp(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||qp($p(a),n)<=0||(r.has(a.key)||hy(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Qp.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Zf(9500)}ii(e,t){return Qp.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Lw(this)}getSize(e){return Qp.resolve(this.size)}}class Lw extends Tw{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Qp.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Ow{constructor(e){this.persistence=e,this.si=new my(e=>Yg(e),Xg),this.lastRemoteSnapshotVersion=Vp.min(),this.highestTargetId=0,this.oi=0,this._i=new Rw,this.targetCount=0,this.ai=vw.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Qp.resolve()}getLastRemoteSnapshotVersion(e){return Qp.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qp.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Qp.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Qp.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new vw(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Qp.resolve()}updateTargetData(e,t){return this.Pr(t),Qp.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Qp.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Qp.waitFor(i).next(()=>r)}getTargetCount(e){return Qp.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Qp.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Qp.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Qp.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Qp.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Qp.resolve(n)}containsKey(e,t){return Qp.resolve(this._i.containsKey(t))}}class Fw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Jp(0),this.li=!1,this.li=!0,this.hi=new Pw,this.referenceDelegate=e(this),this.Pi=new Ow(this),this.indexManager=new fw,this.remoteDocumentCache=function(e){return new Mw(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new uw(t),this.Ii=new Nw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Aw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new jw(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qf("MemoryPersistence","Starting transaction:",e);const r=new Vw(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Qp.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Vw extends Kp{constructor(e){super(),this.currentSequenceNumber=e}}class Uw{constructor(e){this.persistence=e,this.Ri=new Rw,this.Vi=null}static mi(e){return new Uw(e)}get fi(){if(this.Vi)return this.Vi;throw Zf(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Qp.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Qp.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Qp.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qp.forEach(this.fi,n=>{const r=Cp.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Vp.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Qp.or([()=>Qp.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zw{constructor(e,t){this.persistence=e,this.pi=new my(e=>im(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=_w(this,t)}static mi(e,t){return new zw(e,t)}Ei(){}di(e){return Qp.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Qp.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Qp.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Vp.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Qp.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Qp.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Qp.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Qp.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pg(e.data.value)),t}br(e,t,n){return Qp.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Qp.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Bw{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Ty(),r=Ty();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Bw(e,t.fromCache,n,r)}}class $w{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Hw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Ya()?8:Yp(Ka())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new $w;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Gf()<=yo.DEBUG&&Qf("QueryEngine","SDK will not create cache indexes for query:",uy(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Qp.resolve()):(Gf()<=yo.DEBUG&&Qf("QueryEngine","Query:",uy(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Gf()<=yo.DEBUG&&Qf("QueryEngine","The SDK decides to create cache indexes for query:",uy(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sy(t))):Qp.resolve())}ys(e,t){if(ny(t))return Qp.resolve(null);let n=sy(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=oy(t,null,"F"),n=sy(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Ty(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,oy(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return ny(t)||r.isEqual(Vp.min())?Qp.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Qp.resolve(null):(Gf()<=yo.DEBUG&&Qf("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uy(t)),this.vs(e,s,t,Bp(r,Up)).next(e=>e))})}Ds(e,t){let n=new Lm(fy(e));return t.forEach((t,r)=>{hy(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Gf()<=yo.DEBUG&&Qf("QueryEngine","Using full collection scan to execute query:",uy(t)),this.ps.getDocumentsMatchingQuery(e,t,Hp.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const qw="LocalStore";class Ww{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Dm(gp),this.xs=new my(e=>Yg(e),Xg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Kw(e,t,n,r){return new Ww(e,t,n,r)}async function Gw(e,t){const n=np(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=Ty();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Qw(e){const t=np(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Yw(e,t,n){let r=Ty(),i=Ty();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=yy();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Vp.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Qf(qw,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Xw(e,t){const n=np(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Zp),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Jw(e,t){const n=np(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Qp.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new cw(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Zw(e,t,n){const r=np(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Xp(e))throw e;Qf(qw,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function eb(e,t,n){const r=np(e);let i=Vp.min(),s=Ty();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=np(e),i=r.xs.get(n);return void 0!==i?Qp.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,sy(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Vp.min(),n?s:Ty())).next(e=>(tb(r,dy(t),e),{documents:e,Qs:s})))}function tb(e,t,n){let r=e.Os.get(t)||Vp.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class nb{constructor(){this.activeTargetIds=Iy()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rb{constructor(){this.Mo=new nb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nb,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ib{Oo(e){}shutdown(){}}const sb="ConnectivityMonitor";class ab{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Qf(sb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Qf(sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ob=null;function lb(){return null===ob?ob=268435456+Math.round(2147483648*Math.random()):ob++,"0x"+ob.toString(16)}const cb="RestConnection",ub={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Zm?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=lb(),a=this.zo(e,t.toUriEncodedString());Qf(cb,`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=Ba(l);return this.Jo(e,a,o,n,c).then(t=>(Qf(cb,`Received RPC '${e}' ${s}: `,t),t),t=>{throw Xf(cb,`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=ub[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class db{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const fb="WebChannelConnection";class pb extends hb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=lb();return new Promise((i,a)=>{const o=new Df;o.setWithCredentials(!0),o.listenOnce(Mf.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Lf.NO_ERROR:const t=o.getResponseJson();Qf(fb,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Lf.TIMEOUT:Qf(fb,`RPC '${e}' ${s} timed out`),a(new ip(rp.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const n=o.getStatus();if(Qf(fb,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(rp).indexOf(t)>=0?t:rp.UNKNOWN}(t.status);a(new ip(e,t.message))}else a(new ip(rp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ip(rp.UNAVAILABLE,"Connection failed."));break;default:Zf(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Qf(fb,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);Qf(fb,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=lb(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Uf(),a=Vf(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Qf(fb,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=s.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const f=new db({Yo:t=>{d?Qf(fb,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Qf(fb,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Qf(fb,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,jf.EventType.OPEN,()=>{d||(Qf(fb,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(u,jf.EventType.CLOSE,()=>{d||(d=!0,Qf(fb,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(u))}),p(u,jf.EventType.ERROR,t=>{d||(d=!0,Xf(fb,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new ip(rp.UNAVAILABLE,"The operation could not be completed")))}),p(u,jf.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];tp(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){Qf(fb,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=hv[e];if(void 0!==t)return pv(t)}(t),i=s.message;void 0===n&&(n=rp.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.a_(new ip(n,i)),u.close()}else Qf(fb,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(a,Ff.STAT_EVENT,t=>{t.stat===Of.PROXY?Qf(fb,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Of.NOPROXY&&Qf(fb,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function mb(){return"undefined"!=typeof document?document:null}function gb(e){return new jv(e,!0)}class yb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Qf("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const vb="PersistentStream";class wb{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yb(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===rp.RESOURCE_EXHAUSTED?(Yf(t.toString()),Yf("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===rp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ip(rp.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Qf(vb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Qf(vb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bb extends wb{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Zf(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(tp(void 0===t||"string"==typeof t,58123),Um.fromBase64String(t||"")):(tp(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Um.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?rp.UNKNOWN:pv(e.code);return new ip(t,e.message||"")}(a);n=new Tv(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hv(e,r.document.name),s=Vv(r.document.updateTime),a=r.document.createTime?Vv(r.document.createTime):Vp.min(),o=new kg({mapValue:{fields:r.document.fields}}),l=_g.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ev(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Hv(e,r.document),s=r.readTime?Vv(r.readTime):Vp.min(),a=_g.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Ev([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Hv(e,r.document),s=r.removedTargetIds||[];n=new Ev([],s,i,null)}else{if(!("filter"in t))return Zf(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new uv(r,i),a=e.targetId;n=new _v(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Vp.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Vp.min():t.readTime?Vv(t.readTime):Vp.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Kv(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Jg(r)?{documents:Xv(e,r)}:{query:Jv(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ov(e,t.resumeToken);const r=Mv(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Vp.min())>0){n.readTime=Lv(e,t.snapshotVersion.toTimestamp());const r=Mv(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Zf(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Kv(this.serializer),t.removeTarget=e,this.q_(t)}}class xb extends wb{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tp(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tp(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){tp(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(tp(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Vv(e.updateTime):Vv(t);return n.isEqual(Vp.min())&&(n=Vv(t)),new qy(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Vv(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Kv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Yv(this.serializer,e))};this.q_(t)}}class Sb{}class kb extends Sb{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ip(rp.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,zv(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===rp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ip(rp.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,zv(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===rp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ip(rp.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Eb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yf(t),this.aa=!1):Qf("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const _b="RemoteStore";class Tb{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Mb(this)&&(Qf(_b,"Restarting streams for network reachability change."),await async function(e){const t=np(e);t.Ea.add(4),await Ib(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Cb(t)}(this))})}),this.Ra=new Eb(n,r)}}async function Cb(e){if(Mb(e))for(const t of e.da)await t(!0)}async function Ib(e){for(const t of e.da)await t(!1)}function Nb(e,t){const n=np(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),jb(n)?Db(n):ex(n).O_()&&Pb(n,t))}function Ab(e,t){const n=np(e),r=ex(n);n.Ia.delete(t),r.O_()&&Rb(n,t),0===n.Ia.size&&(r.O_()?r.L_():Mb(n)&&n.Ra.set("Unknown"))}function Pb(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vp.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ex(e).Y_(t)}function Rb(e,t){e.Va.Ue(t),ex(e).Z_(t)}function Db(e){e.Va=new Iv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ex(e).start(),e.Ra.ua()}function jb(e){return Mb(e)&&!ex(e).x_()&&e.Ia.size>0}function Mb(e){return 0===np(e).Ea.size}function Lb(e){e.Va=void 0}async function Ob(e){e.Ra.set("Online")}async function Fb(e){e.Ia.forEach((t,n)=>{Pb(e,t)})}async function Vb(e,t){Lb(e),jb(e)?(e.Ra.ha(t),Db(e)):e.Ra.set("Unknown")}async function Ub(e,t,n){if(e.Ra.set("Online"),t instanceof Tv&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Qf(_b,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await zb(e,n)}else if(t instanceof Ev?e.Va.Ze(t):t instanceof _v?e.Va.st(t):e.Va.tt(t),!n.isEqual(Vp.min()))try{const t=await Qw(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Um.EMPTY_BYTE_STRING,r.snapshotVersion)),Rb(e,t);const i=new cw(r.target,t,n,r.sequenceNumber);Pb(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Qf(_b,"Failed to raise snapshot:",t),await zb(e,t)}}async function zb(e,t,n){if(!Xp(t))throw t;e.Ea.add(1),await Ib(e),e.Ra.set("Offline"),n||(n=()=>Qw(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Qf(_b,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Cb(e)})}function Bb(e,t){return t().catch(n=>zb(e,n,t))}async function $b(e){const t=np(e),n=tx(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Zp;for(;Hb(t);)try{const e=await Xw(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,qb(t,e)}catch(e){await zb(t,e)}Wb(t)&&Kb(t)}function Hb(e){return Mb(e)&&e.Ta.length<10}function qb(e,t){e.Ta.push(t);const n=tx(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Wb(e){return Mb(e)&&!tx(e).x_()&&e.Ta.length>0}function Kb(e){tx(e).start()}async function Gb(e){tx(e).ra()}async function Qb(e){const t=tx(e);for(const n of e.Ta)t.ea(n.mutations)}async function Yb(e,t,n){const r=e.Ta.shift(),i=lv.from(r,t,n);await Bb(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await $b(e)}async function Xb(e,t){t&&tx(e).X_&&await async function(e,t){if(function(e){return fv(e)&&e!==rp.ABORTED}(t.code)){const n=e.Ta.shift();tx(e).B_(),await Bb(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await $b(e)}}(e,t),Wb(e)&&Kb(e)}async function Jb(e,t){const n=np(e);n.asyncQueue.verifyOperationInProgress(),Qf(_b,"RemoteStore received new credentials");const r=Mb(n);n.Ea.add(3),await Ib(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Cb(n)}async function Zb(e,t){const n=np(e);t?(n.Ea.delete(2),await Cb(n)):t||(n.Ea.add(2),await Ib(n),n.Ra.set("Unknown"))}function ex(e){return e.ma||(e.ma=function(e,t,n){const r=np(e);return r.sa(),new bb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Ob.bind(null,e),t_:Fb.bind(null,e),r_:Vb.bind(null,e),H_:Ub.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),jb(e)?Db(e):e.Ra.set("Unknown")):(await e.ma.stop(),Lb(e))})),e.ma}function tx(e){return e.fa||(e.fa=function(e,t,n){const r=np(e);return r.sa(),new xb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Gb.bind(null,e),r_:Xb.bind(null,e),ta:Qb.bind(null,e),na:Yb.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await $b(e)):(await e.fa.stop(),e.Ta.length>0&&(Qf(_b,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class nx{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new nx(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ip(rp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rx(e,t){if(Yf("AsyncQueue",`${t}: ${e}`),Xp(e))return new ip(rp.UNAVAILABLE,`${t}: ${e}`);throw e}class ix{static emptySet(e){return new ix(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Cp.comparator(t.key,n.key):(e,t)=>Cp.comparator(e.key,t.key),this.keyedMap=wy(),this.sortedSet=new Dm(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ix))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ix;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class sx{constructor(){this.ga=new Dm(Cp.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Zf(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class ax{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new ax(e,t,ix.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ly(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ox{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lx{constructor(){this.queries=cx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=np(e),r=n.queries;n.queries=cx(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new ip(rp.ABORTED,"Firestore shutting down"))}}function cx(){return new my(e=>cy(e),ly)}async function ux(e,t){const n=np(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new ox,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=rx(e,`Initialization of query '${uy(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&px(n)}async function hx(e,t){const n=np(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dx(e,t){const n=np(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&px(n)}function fx(e,t,n){const r=np(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function px(e){e.Ca.forEach(e=>{e.next()})}var mx,gx;(gx=mx||(mx={})).Ma="default",gx.Cache="cache";class yx{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ax(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=ax.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mx.Cache}}class vx{constructor(e){this.key=e}}class wx{constructor(e){this.key=e}}class bx{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ty(),this.mutatedKeys=Ty(),this.eu=fy(e),this.tu=new ix(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new sx,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=hy(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zf(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new ax(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ty(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new wx(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new vx(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ty();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ax.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const xx="SyncEngine";class Sx{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class kx{constructor(e){this.key=e,this.hu=!1}}class Ex{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new my(e=>cy(e),ly),this.Iu=new Map,this.Eu=new Set,this.du=new Dm(Cp.comparator),this.Au=new Map,this.Ru=new Rw,this.Vu={},this.mu=new Map,this.fu=vw.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function _x(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Wx(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Cx(r,t,n,!0),i}async function Tx(e,t){const n=Wx(e);await Cx(n,t,!0,!1)}async function Cx(e,t,n,r){const i=await Jw(e.localStore,sy(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Ix(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Nb(e.remoteStore,i),o}async function Ix(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await eb(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Ux(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await eb(e.localStore,t,!0),a=new bx(t,s.Qs),o=a.ru(s.documents),l=kv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Ux(e,n,c.au);const u=new Sx(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Nx(e,t,n){const r=np(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!ly(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Zw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ab(r.remoteStore,i.targetId),Fx(r,i.targetId)}).catch(Gp)):(Fx(r,i.targetId),await Zw(r.localStore,i.targetId,!0))}async function Ax(e,t){const n=np(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ab(n.remoteStore,r.targetId))}async function Px(e,t){const n=np(e);try{const e=await function(e,t){const n=np(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Um.EMPTY_BYTE_STRING,Vp.min()).withLastLimboFreeSnapshotVersion(Vp.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=yy(),l=Ty();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Yw(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Vp.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Qp.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(tp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?tp(r.hu,14607):e.removedDocuments.size>0&&(tp(r.hu,42227),r.hu=!1))}),await $x(n,e,t)}catch(e){await Gp(e)}}function Rx(e,t,n){const r=np(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=np(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&px(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dx(e,t,n){const r=np(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Dm(Cp.comparator);e=e.insert(s,_g.newNoDocument(s,Vp.min()));const n=Ty().add(s),i=new Sv(Vp.min(),new Map,new Dm(gp),e,n);await Px(r,i),r.du=r.du.remove(s),r.Au.delete(t),Bx(r)}else await Zw(r.localStore,t,!1).then(()=>Fx(r,t,n)).catch(Gp)}async function jx(e,t){const n=np(e),r=t.batch.batchId;try{const e=await function(e,t){const n=np(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Qp.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);tp(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ty();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Ox(n,r,null),Lx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $x(n,e)}catch(e){await Gp(e)}}async function Mx(e,t,n){const r=np(e);try{const e=await function(e,t){const n=np(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(tp(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Ox(r,t,n),Lx(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $x(r,e)}catch(n){await Gp(n)}}function Lx(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Ox(e,t,n){const r=np(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Fx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Vx(e,t)})}function Vx(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Ab(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Bx(e))}function Ux(e,t,n){for(const r of n)r instanceof vx?(e.Ru.addReference(r.key,t),zx(e,r)):r instanceof wx?(Qf(xx,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Vx(e,r.key)):Zf(19791,{wu:r})}function zx(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Qf(xx,"New document in limbo: "+n),e.Eu.add(r),Bx(e))}function Bx(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Cp(Ep.fromString(t)),r=e.fu.next();e.Au.set(r,new kx(n)),e.du=e.du.insert(n,r),Nb(e.remoteStore,new cw(sy(ty(n.path)),r,"TargetPurposeLimboResolution",Jp.ce))}}async function $x(e,t,n){const r=np(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(o.targetId)?.current;r.sharedClientState.updateQueryState(o.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Bw.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=np(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Qp.forEach(t,t=>Qp.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Qp.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Xp(e))throw e;Qf(qw,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Hx(e,t){const n=np(e);if(!n.currentUser.isEqual(t)){Qf(xx,"User change. New user:",t.toKey());const e=await Gw(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ip(rp.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $x(n,e.Ls)}}function qx(e,t){const n=np(e),r=n.Au.get(t);if(r&&r.hu)return Ty().add(r.key);{let e=Ty();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Wx(e){const t=np(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Px.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dx.bind(null,t),t.Pu.H_=dx.bind(null,t.eventManager),t.Pu.yu=fx.bind(null,t.eventManager),t}function Kx(e){const t=np(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,t),t}class Gx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Kw(this.persistence,new Hw,e.initialUser,this.serializer)}Cu(e){return new Fw(Uw.mi,this.serializer)}Du(e){return new rb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gx.provider={build:()=>new Gx};class Qx extends Gx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tp(this.persistence.referenceDelegate instanceof zw,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new kw(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?yw.withCacheSize(this.cacheSizeBytes):yw.DEFAULT;return new Fw(e=>zw.mi(e,t),this.serializer)}}class Yx{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Rx(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hx.bind(null,this.syncEngine),await Zb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new lx}createDatastore(e){const t=gb(e.databaseInfo.databaseId),n=function(e){return new pb(e)}(e.databaseInfo);return function(e,t,n,r){return new kb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Tb(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Rx(this.syncEngine,e,0),ab.v()?new ab:new ib)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Ex(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=np(e);Qf(_b,"RemoteStore shutting down."),t.Ea.add(5),await Ib(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yx.provider={build:()=>new Yx};class Xx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yf("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Jx="FirestoreClient";class Zx{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=qf.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Qf(Jx,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Qf(Jx,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=rx(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function eS(e,t){e.asyncQueue.verifyOperationInProgress(),Qf(Jx,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Gw(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await nS(e);Qf(Jx,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Jb(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Jb(t.remoteStore,n)),e._onlineComponents=t}async function nS(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Qf(Jx,"Using user provided OfflineComponentProvider");try{await eS(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===rp.FAILED_PRECONDITION||e.code===rp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Xf("Error using user provided cache. Falling back to memory cache: "+n),await eS(e,new Gx)}}else Qf(Jx,"Using default OfflineComponentProvider"),await eS(e,new Qx(void 0));return e._offlineComponents}async function rS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Qf(Jx,"Using user provided OnlineComponentProvider"),await tS(e,e._uninitializedComponentsProvider._online)):(Qf(Jx,"Using default OnlineComponentProvider"),await tS(e,new Yx))),e._onlineComponents}function iS(e){return rS(e).then(e=>e.syncEngine)}async function sS(e){const t=await rS(e),n=t.eventManager;return n.onListen=_x.bind(null,t.syncEngine),n.onUnlisten=Nx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ax.bind(null,t.syncEngine),n}function aS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new sp;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Xx({next:o=>{s.Nu(),t.enqueueAndForget(()=>hx(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new ip(rp.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new ip(rp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new yx(ty(n.path),s,{includeMetadataChanges:!0,qa:!0});return ux(e,a)}(await sS(e),e.asyncQueue,t,n,r)),r.promise}function oS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new sp;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Xx({next:n=>{s.Nu(),t.enqueueAndForget(()=>hx(e,a)),n.fromCache&&"server"===r.source?i.reject(new ip(rp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new yx(n,s,{includeMetadataChanges:!0,qa:!0});return ux(e,a)}(await sS(e),e.asyncQueue,t,n,r)),r.promise}function lS(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const cS=new Map,uS="firestore.googleapis.com",hS=!0;class dS{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new ip(rp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uS,this.ssl=hS}else this.host=e.host,this.ssl=e.ssl??hS;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=gw;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<bw)throw new ip(rp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ip(rp.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lS(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ip(rp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ip(rp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ip(rp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fS{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ip(rp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ip(rp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dS(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new op;switch(e.type){case"firstParty":return new hp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ip(rp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cS.get(e);t&&(Qf("ComponentProvider","Removing Datastore"),cS.delete(e),t.terminate())}(this),Promise.resolve()}}function pS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Dp(e,fS);const i=Ba(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${n}`;i&&($a(`https://${o}`),Wa("Firestore",!0)),s.host!==uS&&s.host!==o&&Xf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!no(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=qf.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ja(JSON.stringify({alg:"none",type:"JWT"})),ja(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ip(rp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new qf(i)}e._authCredentials=new lp(new ap(t,n))}}class mS{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new mS(this.firestore,e,this._query)}}class gS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gS(this.firestore,e,this._key)}toJSON(){return{type:gS._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Mp(t,gS._jsonSchema))return new gS(e,n||null,new Cp(Ep.fromString(t.referencePath)))}}gS._jsonSchemaVersion="firestore/documentReference/1.0",gS._jsonSchema={type:jp("string",gS._jsonSchemaVersion),referencePath:jp("string")};class yS extends mS{constructor(e,t,n){super(e,t,ty(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gS(this.firestore,null,new Cp(e))}withConverter(e){return new yS(this.firestore,e,this._path)}}function vS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=uo(e),Ip("collection","path",t),e instanceof fS){const n=Ep.fromString(t,...r);return Ap(n),new yS(e,null,n)}{if(!(e instanceof gS||e instanceof yS))throw new ip(rp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ep.fromString(t,...r));return Ap(n),new yS(e.firestore,null,n)}}function wS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=uo(e),1===arguments.length&&(t=mp.newId()),Ip("doc","path",t),e instanceof fS){const n=Ep.fromString(t,...r);return Np(n),new gS(e,null,new Cp(n))}{if(!(e instanceof gS||e instanceof yS))throw new ip(rp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ep.fromString(t,...r));return Np(n),new gS(e.firestore,e instanceof yS?e.converter:null,new Cp(n))}}const bS="AsyncQueue";class xS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yb(this,"async_queue_retry"),this._c=()=>{const e=mb();e&&Qf(bS,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=mb();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new sp;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xp(e))throw e;Qf(bS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Yf("INTERNAL UNHANDLED ERROR: ",SS(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=nx.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Zf(47125,{Pc:SS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function SS(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class kS extends fS{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new xS,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xS(e),this._firestoreClient=void 0,await e}}}function ES(e){if(e._terminated)throw new ip(rp.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_S(e),e._firestoreClient}function _S(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new Jm(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,lS(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Zx(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class TS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new TS(Um.fromBase64String(e))}catch(e){throw new ip(rp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new TS(Um.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:TS._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mp(e,TS._jsonSchema))return TS.fromBase64String(e.bytes)}}TS._jsonSchemaVersion="firestore/bytes/1.0",TS._jsonSchema={type:jp("string",TS._jsonSchemaVersion),bytes:jp("string")};class CS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ip(rp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tp(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class IS{constructor(e){this._methodName=e}}class NS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ip(rp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ip(rp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return gp(this._lat,e._lat)||gp(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:NS._jsonSchemaVersion}}static fromJSON(e){if(Mp(e,NS._jsonSchema))return new NS(e.latitude,e.longitude)}}NS._jsonSchemaVersion="firestore/geoPoint/1.0",NS._jsonSchema={type:jp("string",NS._jsonSchemaVersion),latitude:jp("number"),longitude:jp("number")};class AS{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:AS._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mp(e,AS._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new AS(e.vectorValues);throw new ip(rp.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}AS._jsonSchemaVersion="firestore/vectorValue/1.0",AS._jsonSchema={type:jp("string",AS._jsonSchemaVersion),vectorValues:jp("object")};const PS=/^__.*__$/;class RS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new tv(e,this.data,this.fieldMask,t,this.fieldTransforms):new ev(e,this.data,t,this.fieldTransforms)}}class DS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new tv(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zf(40011,{Ac:e})}}class MS{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new MS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return YS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(jS(this.Ac)&&PS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class LS{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||gb(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new MS({Ac:e,methodName:t,Dc:n,path:Tp.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OS(e){const t=e._freezeSettings(),n=gb(e._databaseId);return new LS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FS(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);WS("Data must be an object, but it was:",a,r);const o=HS(r,a);let l,c;if(s.merge)l=new Fm(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=KS(t,r,n);if(!a.contains(i))throw new ip(rp.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);XS(e,i)||e.push(i)}l=new Fm(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new RS(new kg(o),l,c)}class VS extends IS{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof VS}}class US extends IS{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new zy(e.serializer,Py(e.serializer,this.Fc));return new Hy(e.path,t)}isEqual(e){return e instanceof US&&this.Fc===e.Fc}}function zS(e,t,n,r){const i=e.Cc(1,t,n);WS("Data must be an object, but it was:",i,r);const s=[],a=kg.empty();Pm(r,(e,r)=>{const o=QS(t,e,n);r=uo(r);const l=i.yc(o);if(r instanceof VS)s.push(o);else{const e=$S(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Fm(s);return new DS(a,o,i.fieldTransforms)}function BS(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[KS(t,r,n)],l=[i];if(s.length%2!=0)throw new ip(rp.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(KS(t,s[d])),l.push(s[d+1]);const c=[],u=kg.empty();for(let d=o.length-1;d>=0;--d)if(!XS(c,o[d])){const e=o[d];let t=l[d];t=uo(t);const n=a.yc(e);if(t instanceof VS)c.push(e);else{const r=$S(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Fm(c);return new DS(u,h,a.fieldTransforms)}function $S(e,t){if(qS(e=uo(e)))return WS("Unsupported field value:",t,e),HS(e,t);if(e instanceof IS)return function(e,t){if(!jS(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=$S(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=uo(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Py(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Fp.fromDate(e);return{timestampValue:Lv(t.serializer,n)}}if(e instanceof Fp){const n=new Fp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lv(t.serializer,n)}}if(e instanceof NS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof TS)return{bytesValue:Ov(t.serializer,e._byteString)};if(e instanceof gS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Uv(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof AS)return function(e,t){return{mapValue:{fields:{[tg]:{stringValue:ig},[sg]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ny(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Rp(e)}`)}(e,t)}function HS(e,t){const n={};return Rm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pm(e,(e,r)=>{const i=$S(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function qS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Fp||e instanceof NS||e instanceof TS||e instanceof gS||e instanceof IS||e instanceof AS)}function WS(e,t,n){if(!qS(n)||!Pp(n)){const r=Rp(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function KS(e,t,n){if((t=uo(t))instanceof CS)return t._internalPath;if("string"==typeof t)return QS(e,t);throw YS("Field path arguments must be of type string or ",e,!1,void 0,n)}const GS=new RegExp("[~\\*/\\[\\]]");function QS(e,t,n){if(t.search(GS)>=0)throw YS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new CS(...t.split("."))._internalPath}catch(r){throw YS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function YS(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ip(rp.INVALID_ARGUMENT,o+e+l)}function XS(e,t){return e.some(e=>e.isEqual(t))}class JS{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ZS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ek("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ZS extends JS{data(){return super.data()}}function ek(e,t){return"string"==typeof t?QS(e,t):t instanceof CS?t._internalPath:t._delegate._internalPath}function tk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ip(rp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nk{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ag(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $m(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Zf(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Pm(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[sg].arrayValue?.values?.map(e=>$m(e.doubleValue));return new AS(t)}convertGeoPoint(e){return new NS($m(e.latitude),$m(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ym(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Xm(e));default:return null}}convertTimestamp(e){const t=Bm(e);return new Fp(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ep.fromString(e);tp(lw(n),9688,{name:e});const r=new eg(n.get(1),n.get(3)),i=new Cp(n.popFirst(5));return r.isEqual(t)||Yf(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function rk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ik{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sk extends JS{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ak(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ek("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ip(rp.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=sk._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}sk._jsonSchemaVersion="firestore/documentSnapshot/1.0",sk._jsonSchema={type:jp("string",sk._jsonSchemaVersion),bundleSource:jp("string","DocumentSnapshot"),bundleName:jp("string"),bundle:jp("string")};class ak extends sk{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ok{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ik(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ak(this._firestore,this._userDataWriter,n.key,n,new ik(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ip(rp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ak(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ik(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ak(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ik(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:lk(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ip(rp.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ok._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zf(61501,{type:e})}}function ck(e){e=Dp(e,gS);const t=Dp(e.firestore,kS);return aS(ES(t),e._key).then(n=>mk(t,e,n))}ok._jsonSchemaVersion="firestore/querySnapshot/1.0",ok._jsonSchema={type:jp("string",ok._jsonSchemaVersion),bundleSource:jp("string","QuerySnapshot"),bundleName:jp("string"),bundle:jp("string")};class uk extends nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new TS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gS(this.firestore,null,t)}}function hk(e){e=Dp(e,mS);const t=Dp(e.firestore,kS),n=ES(t),r=new uk(t);return tk(e._query),oS(n,e._query).then(n=>new ok(t,r,e,n))}function dk(e,t,n){e=Dp(e,gS);const r=Dp(e.firestore,kS),i=rk(e.converter,t,n);return pk(r,[FS(OS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Wy.none())])}function fk(e,t,n){e=Dp(e,gS);const r=Dp(e.firestore,kS),i=OS(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=uo(t))||t instanceof CS?BS(i,"updateDoc",e._key,t,n,o):zS(i,"updateDoc",e._key,t),pk(r,[s.toMutation(e._key,Wy.exists(!0))])}function pk(e,t){return function(e,t){const n=new sp;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Kx(e);try{const e=await function(e,t){const n=np(e),r=Fp.now(),i=t.reduce((e,t)=>e.add(t.key),Ty());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=yy(),l=Ty();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Jy(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new tv(e.key,t,Eg(t.value.mapValue),Wy.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:by(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Dm(gp)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await $x(r,e.changes),await $b(r.remoteStore)}catch(e){const t=rx(e,"Failed to persist write");n.reject(t)}}(await iS(e),t,n)),n.promise}(ES(e),t)}function mk(e,t,n){const r=n.docs.get(t._key),i=new uk(e);return new sk(e,i,t._key,r,new ik(n.hasPendingWrites,n.fromCache),t.converter)}function gk(e){return new US("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Wf=e}(Cl),Sl(new ho("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new kS(new cp(e.getProvider("auth-internal")),new fp(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ip(rp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eg(e.options.projectId,t)}(s,r),s);return i={useFetchStreams:t,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Al($f,Hf,e),Al($f,Hf,"esm2020")}();const yk=Il({apiKey:"AIzaSyBCNdT3rmoZlQLHC5hrnedlI4lcK9A62BQ",authDomain:"casequest-62b9b.firebaseapp.com",projectId:"casequest-62b9b",storageBucket:"casequest-62b9b.firebasestorage.app",messagingSenderId:"329872421373",appId:"1:329872421373:web:828b8c247e79e1233d2994",measurementId:"G-ED7SRYX2XK"}),vk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nl();const t=kl(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=kl(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(no(n.getOptions(),t??{}))return e;hu(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Sf,persistence:[Pd,hd,gd]}),r=Ua("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Tf)return;const r=t?.token;Cf!==r&&(Cf=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){uo(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){uo(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Fa("auth");return s&&Ph(n,`http://${s}`),n}(yk),wk=function(e,t){const n="object"==typeof e?e:Nl(),r="string"==typeof e?e:t||Zm,i=kl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=Fa(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&pS(i,...e)}return i}(yk),bk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nl(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=uo(e);const n=kl(e,Dc);if(n.isInitialized()){if(no(n.getOptions(),t))return n.getImmediate();throw jc.create("already-initialized")}n.initialize({options:t});const r=n.getImmediate();return t.initialFetchResponse&&(r._initializePromise=Promise.all([r._storage.setLastSuccessfulFetchResponse(t.initialFetchResponse),r._storage.setActiveConfigEtag(t.initialFetchResponse?.eTag||""),r._storage.setActiveConfigTemplateVersion(t.initialFetchResponse.templateVersion||0),r._storageCache.setLastSuccessfulFetchTimestampMillis(Date.now()),r._storageCache.setLastFetchStatus("success"),r._storageCache.setActiveConfig(t.initialFetchResponse?.config||{})]).then(),r._isInitializationComplete=!0),r}(yk);bk.defaultConfig={ux_enhanced_onboarding_enabled:!1,ux_next_best_action_enabled:!1,ux_session_summary_enabled:!1,ux_rollout_percentage:0,endowed_progress_percent:10,next_action_policy:"weakness_first",streak_grace_hours:48,review_batch_size:10,sm2_initial_ease:2.5,sm2_first_interval:1,sm2_second_interval:6,notification_hour_morning:9,notification_hour_afternoon:15,notification_hour_evening:19};const xk=new class{constructor(){this.isInitialized=!1,this.cachedValues={}}async initialize(){if(!this.isInitialized){bk.settings.minimumFetchIntervalMillis=36e5;try{await su(bk),this.cacheValues(),this.isInitialized=!0,console.log("Remote Config initialized successfully"),bk.settings.minimumFetchIntervalMillis=864e5}catch(e){console.warn("Remote Config initialization failed, using defaults:",e),this.isInitialized=!0}}}cacheValues(){this.cachedValues={uxEnhancedOnboardingEnabled:Fc(bk,"ux_enhanced_onboarding_enabled").asBoolean(),uxNextBestActionEnabled:Fc(bk,"ux_next_best_action_enabled").asBoolean(),uxSessionSummaryEnabled:Fc(bk,"ux_session_summary_enabled").asBoolean(),uxRolloutPercentage:Fc(bk,"ux_rollout_percentage").asNumber(),endowedProgressPercent:Fc(bk,"endowed_progress_percent").asNumber(),nextActionPolicy:Fc(bk,"next_action_policy").asString(),streakGraceHours:Fc(bk,"streak_grace_hours").asNumber(),reviewBatchSize:Fc(bk,"review_batch_size").asNumber(),sm2Config:{initialEase:Fc(bk,"sm2_initial_ease").asNumber(),firstInterval:Fc(bk,"sm2_first_interval").asNumber(),secondInterval:Fc(bk,"sm2_second_interval").asNumber()}}}isUserInRollout(e){const t=this.cachedValues.uxRolloutPercentage||0;if(0===t)return!1;return this.hashUserId(e)<t}hashUserId(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)%100}isEnhancedOnboardingEnabled(e){return this.isUserInRollout(e)&&this.cachedValues.uxEnhancedOnboardingEnabled}isNextBestActionEnabled(e){return this.isUserInRollout(e)&&this.cachedValues.uxNextBestActionEnabled}isSessionSummaryEnabled(e){return this.isUserInRollout(e)&&this.cachedValues.uxSessionSummaryEnabled}getEndowedProgressPercent(){return this.cachedValues.endowedProgressPercent||10}getNextActionPolicy(){return this.cachedValues.nextActionPolicy||"weakness_first"}getStreakGraceHours(){return this.cachedValues.streakGraceHours||48}getReviewBatchSize(){return this.cachedValues.reviewBatchSize||10}getSM2Config(){return this.cachedValues.sm2Config||{initialEase:2.5,firstInterval:1,secondInterval:6}}getNotificationHour(e){return Fc(bk,`notification_hour_${e}`).asNumber()}},Sk="analytics",kk="https://www.googletagmanager.com/gtag/js",Ek=new So("@firebase/analytics"),_k=new eo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Tk(e){if(!e.startsWith(kk)){const t=_k.create("invalid-gtag-resource",{gtagURL:e});return Ek.warn(t.message),""}return e}function Ck(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Ik(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Tk}),r=document.createElement("script"),i=`${kk}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Nk(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Ck(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){Ek.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await Ck(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(o){Ek.error(o)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){Ek.error(l)}}}const Ak=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Pk(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Rk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ak,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw _k.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw _k.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new jk;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Dk({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Dk(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ak;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(_k.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(l){if(o)return Ek.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:a,measurementId:o};throw l}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:Pk(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(i,r);if(200!==s.status&&304!==s.status){let e="";try{const t=await s.json();t.error?.message&&(e=t.error.message)}catch(a){}throw _k.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}(e);return s.deleteThrottleMetadata(a),t}catch(l){const t=l;if(!function(e){if(!(e instanceof Za)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),o)return Ek.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${t?.message}]`),{appId:a,measurementId:o};throw l}const r=503===Number(t?.customData?.httpStatus)?co(i,s.intervalMillis,30):co(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,c),Ek.debug(`Calling attemptFetch again in ${r} millis`),Dk(e,c,n,s)}}class jk{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Mk,Lk;function Ok(e){Lk=e}function Fk(e){Mk=e}async function Vk(e,t,n,r,i,s,a){const o=Rk(e);o.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ek.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Ek.error(e)),t.push(o);const l=async function(){if(!Xa())return Ek.warn(_k.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Ja()}catch(e){return Ek.warn(_k.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[c,u]=await Promise.all([o,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(kk)&&n.src.includes(e))return n;return null})(s)||Ik(s,c.measurementId),Lk&&(i("consent","default",Lk),Ok(void 0)),i("js",new Date);const h=a?.config??{};return h.origin="firebase",h.update=!0,null!=u&&(h.firebase_id=u),i("config",c.measurementId,h),Mk&&(i("set",Mk),Fk(void 0)),c.measurementId}class Uk{constructor(e){this.app=e}_delete(){return delete zk[this.app.options.appId],Promise.resolve()}}let zk={},Bk=[];const $k={};let Hk,qk,Wk="dataLayer",Kk="gtag",Gk=!1;function Qk(){const e=[];if(Qa()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=_k.create("invalid-analytics-context",{errorInfo:t});Ek.warn(n.message)}}function Yk(e,t,n){Qk();const r=e.options.appId;if(!r)throw _k.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw _k.create("no-api-key");Ek.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zk[r])throw _k.create("already-exists",{id:r});if(!Gk){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Wk);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Nk(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(zk,Bk,$k,Wk,Kk);qk=e,Hk=t,Gk=!0}zk[r]=Vk(e,Bk,$k,t,Hk,Wk,n);return new Uk(e)}function Xk(e,t,n,r){e=uo(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,{...r,send_to:i})}}(qk,zk[e.app.options.appId],t,n,r).catch(e=>Ek.error(e))}const Jk="@firebase/analytics",Zk="0.10.18";Sl(new ho(Sk,(e,t)=>{let{options:n}=t;return Yk(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),Sl(new ho("analytics-internal",function(e){try{const t=e.getProvider(Sk).getImmediate();return{logEvent:(e,n,r)=>Xk(t,e,n,r)}}catch(t){throw _k.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Al(Jk,Zk),Al(Jk,Zk,"esm2020");const eE=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nl();e=uo(e);const t=kl(e,Sk);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=kl(e,Sk);if(n.isInitialized()){const e=n.getImmediate();if(no(t,n.getOptions()))return e;throw _k.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}(yk);const tE=new class{trackOnboardingStart(){Xk(eE,"onboarding_start")}trackGoalSet(e){Xk(eE,"goal_set",{goal_minutes:e})}trackFirstLessonStart(){Xk(eE,"first_lesson_start")}trackFirstLessonComplete(e){Xk(eE,"first_lesson_complete",{time_spent_seconds:e})}trackSummaryViewed(e){var t;Xk(eE,"summary_viewed",{xp_earned:e.xpEarned,streak_extended:e.streakExtended,skills_count:(null===(t=e.skillsImproved)||void 0===t?void 0:t.length)||0})}trackNextActionShown(e,t){Xk(eE,"next_action_shown",{action_type:e,urgency:t})}trackNextActionTaken(e){Xk(eE,"next_action_taken",{action_type:e})}trackStreakProtectionViewed(){Xk(eE,"streak_protection_viewed")}trackStreakFreezeUsed(e){Xk(eE,"streak_freeze_used",{streak_length:e})}trackReviewSessionStart(e){Xk(eE,"review_session_start",{item_count:e})}trackReviewSessionComplete(e){Xk(eE,"review_session_complete",{total_items:e.total,correct_items:e.correct,accuracy:e.accuracy,time_spent_seconds:60*e.timeSpent})}trackDailyReturn(e){Xk(eE,"daily_return",{days_since_last_visit:e})}trackStreakComplete(e){Xk(eE,"streak_complete",{streak_length:e})}setUserCohort(e){Xk(eE,"set_user_property",{custom_parameter_cohort_week:e})}setOnboardingComplete(e){Xk(eE,"set_user_property",{custom_parameter_onboarding_complete:e})}setExperimentVariant(e,t){Xk(eE,"set_user_property",{[`custom_parameter_${e}_variant`]:t})}setFeatureFlagState(e,t){Xk(eE,"set_user_property",{[`custom_parameter_${e}_enabled`]:t})}},nE=e=>{let{userStats:t,weakAreas:n,onAction:i}=e;const s=(()=>{const e=xk.getNextActionPolicy(),r=xk.getStreakGraceHours(),s=t.dailyGoalMinutes||10,a=new Date,o=t.lastActiveAt?new Date(t.lastActiveAt):null;if((o?(a-o)/36e5:24)>24-r/24*24)return{type:"streak_save",title:"Save Your Streak!",description:`Quick ${Math.min(s,5)}-min lesson to keep your ${t.streak||0}-day streak`,icon:la,color:"red",urgency:"high",action:()=>i("quick_lesson")};if("weakness_first"===e&&(null===n||void 0===n?void 0:n.length)>0){const e=n[0];return{type:"review",title:"Strengthen Weak Spot",description:`Review ${e.name} - ${e.strength||0}% mastery`,icon:Ta,color:"orange",urgency:"medium",action:()=>i("review",e)}}return t.currentModule?{type:"continue",title:"Continue Learning",description:`Module ${t.currentModule.number}: ${t.currentModule.name}`,icon:ca,color:"blue",urgency:"low",action:()=>i("continue_module")}:{type:"new_case",title:"Try a New Case",description:"Practice with a fresh consulting case study",icon:ha,color:"green",urgency:"low",action:()=>i("new_case")}})();(0,r.useEffect)(()=>{tE.trackNextActionShown(s.type,s.urgency)},[s.type,s.urgency]);return(0,ba.jsxs)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,ba.jsx)(da,{className:"h-5 w-5 text-gray-600"}),(0,ba.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recommended for You"})]}),(0,ba.jsxs)(Js.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{tE.trackNextActionTaken(s.type),s.action()},className:`bg-gradient-to-r ${{high:"from-red-500 to-red-600",medium:"from-orange-500 to-orange-600",low:"from-blue-500 to-blue-600"}[s.urgency]} rounded-2xl p-6 text-white cursor-pointer shadow-lg hover:shadow-xl transition-all`,children:[(0,ba.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ba.jsx)("div",{className:"p-3 bg-white bg-opacity-20 rounded-xl",children:(0,ba.jsx)(s.icon,{className:"h-6 w-6"})}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h3",{className:"text-xl font-bold mb-1",children:s.title}),(0,ba.jsx)("p",{className:"text-white text-opacity-90",children:s.description}),(0,ba.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,ba.jsx)(Ca,{className:"h-4 w-4"}),(0,ba.jsxs)("span",{className:"text-sm",children:["~",t.dailyGoalMinutes||10," min"]})]})]})]}),(0,ba.jsx)(Js.div,{whileHover:{x:5},className:"p-2",children:(0,ba.jsx)(xa,{className:"h-6 w-6"})})]}),"high"===s.urgency&&(0,ba.jsx)(Js.div,{animate:{opacity:[1,.5,1]},transition:{duration:2,repeat:1/0},className:"mt-3 text-sm font-medium",children:"\u26a1 Time sensitive - don't lose your streak!"})]})]})},rE=oa("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),iE=oa("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),sE=e=>{let{userStats:t,onUseFreeze:n,onBuyFreeze:i}=e;const[s,a]=(0,r.useState)(!1),o=t.streakFreezes>0,l=t.lastActivity&&Date.now()-t.lastActivity<1728e5;return(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 mb-4",children:(0,ba.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,ba.jsx)(rE,{className:"h-5 w-5 text-orange-600"})}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h3",{className:"font-semibold text-gray-900",children:"Streak Protection"}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:o?`${t.streakFreezes} freeze(s) ready`:"No protection active"})]})]}),(0,ba.jsx)("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-orange-500 text-white rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors",children:"Manage"})]})}),s&&(0,ba.jsx)(Js.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>a(!1),children:(0,ba.jsxs)(Js.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-6 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,ba.jsxs)("div",{className:"text-center mb-6",children:[(0,ba.jsx)("div",{className:"p-3 bg-orange-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,ba.jsx)(ya,{className:"h-8 w-8 text-orange-600"})}),(0,ba.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Protect Your Streak"}),(0,ba.jsxs)("p",{className:"text-gray-600",children:["Keep your ",t.streak,"-day streak safe"]})]}),(0,ba.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,ba.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)(rE,{className:"h-5 w-5 text-blue-600"}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("p",{className:"font-medium text-gray-900",children:"Streak Freeze"}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:"Skip a day without losing streak"})]})]}),(0,ba.jsxs)("div",{className:"text-right",children:[(0,ba.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t.streakFreezes}),(0,ba.jsx)("button",{onClick:i,className:"text-xs text-blue-600 hover:text-blue-700",children:"Buy more"})]})]}),l&&(0,ba.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)(Ca,{className:"h-5 w-5 text-green-600"}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("p",{className:"font-medium text-gray-900",children:"Grace Period"}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:"48h window available"})]})]}),(0,ba.jsx)(iE,{className:"h-5 w-5 text-green-600"})]})]}),(0,ba.jsxs)("div",{className:"flex gap-3",children:[(0,ba.jsx)("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"}),o&&(0,ba.jsx)("button",{onClick:()=>{n(),a(!1)},className:"flex-1 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"Use Freeze"})]})]})})]})},aE=e=>{let{type:t="card"}=e;return"dashboard"===t?(0,ba.jsxs)("div",{className:"space-y-6 animate-pulse",children:[(0,ba.jsxs)("div",{className:"text-center space-y-4",children:[(0,ba.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto"}),(0,ba.jsx)("div",{className:"h-8 bg-gray-200 rounded w-64 mx-auto"}),(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-48 mx-auto"})]}),(0,ba.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>(0,ba.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:(0,ba.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ba.jsxs)("div",{className:"space-y-2",children:[(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"}),(0,ba.jsx)("div",{className:"h-8 bg-gray-200 rounded w-12"})]}),(0,ba.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"})]})},t))}),(0,ba.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(4)].map((e,t)=>(0,ba.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:(0,ba.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,ba.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),(0,ba.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,ba.jsx)("div",{className:"h-6 bg-gray-200 rounded w-32"}),(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"})]})]})},t))})]}):(0,ba.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,ba.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})};new class{constructor(){this.minInterval=1,this.maxInterval=365}mapUIToSM2Quality(e){return{0:1,1:2,2:4,3:5}[e]||1}calculateNextReview(e,t){const n=xk.getSM2Config(),r=this.mapUIToSM2Quality(t),{sr:i={ef:n.initialEase,reps:0,intervalDays:n.firstInterval}}=e;let s=i.ef,a=i.reps,o=i.intervalDays;r<3?(a=0,o=1):(a+=1,o=1===a?n.firstInterval:2===a?n.secondInterval:Math.round(i.intervalDays*s),s=Math.max(1.3,i.ef+(.1-(5-r)*(.08+.02*(5-r))))),o=Math.max(this.minInterval,Math.min(this.maxInterval,o));const l=Date.now()+24*o*60*60*1e3;return{...e,sr:{ef:s,reps:a,intervalDays:o,dueAt:l,history:[...i.history||[],{quality:r,date:Date.now()}]},strength:this.calculateStrength(o,s)}}calculateStrength(e,t){const n=Math.min(e/30,1),r=Math.min((t-1.3)/1.7,1);return Math.round(100*(.7*n+.3*r))}getDueItems(e){const t=Date.now();return e.filter(e=>{var n;return!(null!==(n=e.sr)&&void 0!==n&&n.dueAt)||e.sr.dueAt<=t}).sort((e,n)=>this.getUrgency(n,t)-this.getUrgency(e,t))}getUrgency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const{sr:n={},strength:r=0}=e;return 2*Math.max(0,(t-(n.dueAt||t))/864e5)+.5*(100-r)}generateReviewSession(e){const t=xk.getReviewBatchSize(),n=this.getDueItems(e),r=n.slice(0,t);return{items:r,estimatedTime:r.length,totalDue:n.length,priority:r.length>5?"high":r.length>0?"medium":"none"}}createReviewItem(e){const t=xk.getSM2Config();return{id:e.id,name:e.name,type:e.type||"concept",content:e.content,question:e.question,answer:e.answer,sr:{ef:t.initialEase,reps:0,intervalDays:t.firstInterval,dueAt:Date.now(),history:[]},strength:0,createdAt:Date.now()}}};const oE=e=>{let{icon:t,title:n,value:r,color:i,onClick:s,tooltip:a}=e;return(0,ba.jsxs)(Js.div,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.98},onClick:s,className:"bg-white rounded-xl shadow-sm p-6 cursor-pointer hover:shadow-xl transition-all relative overflow-hidden",children:[(0,ba.jsx)(Js.div,{className:"absolute inset-0 bg-gradient-to-br from-transparent to-blue-50 opacity-0",whileHover:{opacity:1},transition:{duration:.3}}),(0,ba.jsxs)("div",{className:"flex items-center justify-between relative z-10",children:[(0,ba.jsxs)("div",{className:"flex-1",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ba.jsx)("p",{className:"text-sm font-medium text-gray-600",children:n}),a&&(0,ba.jsx)(Ea,{text:a})]}),(0,ba.jsx)(Js.p,{className:"text-2xl font-bold text-gray-900 mt-1",initial:{scale:1},whileHover:{scale:1.1},transition:{type:"spring",stiffness:300},children:r})]}),(0,ba.jsx)(Js.div,{className:`p-3 rounded-lg bg-${i}-100`,whileHover:{rotate:360},transition:{duration:.6},children:(0,ba.jsx)(t,{className:`h-6 w-6 text-${i}-600`})})]})]})},lE=e=>{let{icon:t,title:n,description:r,color:i,onClick:s}=e;return(0,ba.jsxs)(Js.div,{whileHover:{scale:1.03,y:-5},whileTap:{scale:.98},onClick:s,className:"bg-white rounded-xl shadow-sm p-6 cursor-pointer hover:shadow-xl transition-all group relative overflow-hidden",children:[(0,ba.jsx)(Js.div,{className:`absolute inset-0 bg-gradient-to-br from-${i}-50 to-transparent opacity-0`,whileHover:{opacity:1},transition:{duration:.3}}),(0,ba.jsxs)("div",{className:"flex items-start space-x-4 relative z-10",children:[(0,ba.jsx)(Js.div,{className:`p-3 rounded-lg bg-${i}-100 group-hover:bg-${i}-200 transition-colors`,whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:300},children:(0,ba.jsx)(t,{className:`h-6 w-6 text-${i}-600`})}),(0,ba.jsxs)("div",{className:"flex-1",children:[(0,ba.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:n}),(0,ba.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:r}),(0,ba.jsxs)(Js.div,{className:"flex items-center text-blue-600 text-sm font-medium",whileHover:{x:5},transition:{type:"spring",stiffness:300},children:["Get Started ",(0,ba.jsx)(xa,{className:"h-4 w-4 ml-1"})]})]})]})]})},cE=e=>{let{percentage:t,size:n=120,strokeWidth:r=8,color:i="#3B82F6"}=e;const s=(n-r)/2,a=2*s*Math.PI,o=`${a} ${a}`,l=a-t/100*a;return(0,ba.jsxs)("div",{className:"relative",style:{width:n,height:n},children:[(0,ba.jsxs)("svg",{className:"transform -rotate-90",width:n,height:n,children:[(0,ba.jsx)("circle",{cx:n/2,cy:n/2,r:s,stroke:"#E5E7EB",strokeWidth:r,fill:"transparent"}),(0,ba.jsx)(Js.circle,{cx:n/2,cy:n/2,r:s,stroke:i,strokeWidth:r,fill:"transparent",strokeDasharray:o,initial:{strokeDashoffset:a},animate:{strokeDashoffset:l},transition:{duration:1,ease:"easeOut"},strokeLinecap:"round"})]}),(0,ba.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ba.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:[Math.round(t),"%"]})})]})},uE=e=>{var t,n;let{user:i,onNavigate:s,featureFlags:a={}}=e;const[o,l]=(0,r.useState)("happy"),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(!i),f=(null===i||void 0===i||null===(t=i.completed_lessons)||void 0===t?void 0:t.length)||0,p=f/20*100,m=(null===i||void 0===i?void 0:i.current_level)||1,g=((null===i||void 0===i?void 0:i.total_xp)||0)%100;(0,r.useEffect)(()=>{i&&d(!1);((null===i||void 0===i?void 0:i.current_streak)||0)>=7?(l("celebrating"),u("Amazing streak! \ud83d\udd25")):0===f?(l("excited"),u("Let's start your consulting journey!")):f>5?(l("happy"),u("You're making great progress!")):(l("happy"),u("Ready to level up?"))},[i,f]);const y=[{icon:ua,title:"Quick Practice",description:"5-minute AI interview session to sharpen your skills",color:"purple",onClick:()=>s("ai-interview")},{icon:ca,title:"Continue Learning",description:"Pick up where you left off in your structured learning path",color:"blue",onClick:()=>s("learning")},{icon:ha,title:"Practice Cases",description:"Dive into real consulting case studies and scenarios",color:"green",onClick:()=>s("cases")}];return h?(0,ba.jsx)(aE,{type:"dashboard"}):(0,ba.jsxs)("div",{className:"space-y-8",children:[(0,ba.jsxs)("div",{className:"text-center",children:[(0,ba.jsx)(Js.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.6},className:"mb-4",children:(0,ba.jsx)(_a,{mood:o,message:c,size:"lg"})}),(0,ba.jsxs)(Js.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(null===i||void 0===i||null===(n=i.email)||void 0===n?void 0:n.split("@")[0])||"Consultant","! \ud83d\udc4b"]}),(0,ba.jsx)(Js.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-gray-600 text-lg",children:"Ready to level up your consulting skills today?"}),(0,ba.jsx)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-100",children:(0,ba.jsxs)("p",{className:"text-center text-gray-700 font-medium",children:["\u2728 ",(()=>{const e=["Every expert was once a beginner. Keep going! \ud83d\udcaa","Today's practice is tomorrow's success! \ud83c\udf1f","You're building skills that will last a lifetime! \ud83d\ude80","Small steps daily lead to big results! \ud83d\udcc8","Your future consulting career starts with today's lesson! \ud83d\udcbc"];return e[(new Date).getDate()%e.length]})()]})})]}),a.nextBestAction&&(0,ba.jsx)(nE,{userStats:i,weakAreas:(null===i||void 0===i?void 0:i.weakAreas)||[],onAction:(e,t)=>{switch(e){case"quick_lesson":case"continue_module":s("learning");break;case"review":s("review",t);break;case"new_case":s("cases")}}}),a.nextBestAction&&(0,ba.jsx)(sE,{userStats:i,onUseFreeze:()=>{console.log("Using streak freeze")},onBuyFreeze:()=>{s("store")}}),(0,ba.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ba.jsx)(oE,{icon:la,title:"Current Level",value:m,color:"blue",onClick:()=>s("progress"),tooltip:"Your level increases as you earn XP. Each level = 100 XP!"}),(0,ba.jsx)(oE,{icon:ca,title:"Lessons Completed",value:f,color:"green",onClick:()=>s("learning"),tooltip:"Track how many lessons you've finished. Keep going!"}),(0,ba.jsx)(oE,{icon:ya,title:"Current Streak",value:`${(null===i||void 0===i?void 0:i.current_streak)||0} days`,color:"orange",onClick:()=>s("progress"),tooltip:"Practice daily to build your streak. Don't break the chain!"}),(0,ba.jsx)(oE,{icon:Sa,title:"Case Coins",value:(null===i||void 0===i?void 0:i.caseCoins)||0,color:"purple",onClick:()=>s("store"),tooltip:"Earn coins by completing lessons. Spend them in the store!"})]}),(0,ba.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-8",children:(0,ba.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between",children:[(0,ba.jsxs)("div",{className:"text-center lg:text-left mb-6 lg:mb-0",children:[(0,ba.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Learning Progress"}),(0,ba.jsxs)("p",{className:"text-gray-600 mb-4",children:["You've completed ",f," out of ",20," lessons"]}),(0,ba.jsxs)("div",{className:"space-y-2",children:[(0,ba.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ba.jsxs)("span",{children:["Level ",m," Progress"]}),(0,ba.jsxs)("span",{children:[g,"/100 XP"]})]}),(0,ba.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ba.jsx)(Js.div,{initial:{width:0},animate:{width:`${g}%`},transition:{duration:1,delay:.5},className:"bg-blue-600 h-2 rounded-full"})})]})]}),(0,ba.jsx)("div",{className:"flex-shrink-0",children:(0,ba.jsx)(cE,{percentage:p})})]})}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"What would you like to do today?"}),(0,ba.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((e,t)=>(0,ba.jsx)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:(0,ba.jsx)(lE,{...e})},e.title))})]}),(0,ba.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:(0,ba.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ba.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,ba.jsx)(ka,{className:"w-5 h-5 text-white"})}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\ud83d\udca1 Getting Started Tips"}),(0,ba.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,ba.jsxs)("li",{children:["\u2022 ",(0,ba.jsx)("strong",{children:"Start with Learning Path:"})," Follow structured lessons to build your foundation"]}),(0,ba.jsxs)("li",{children:["\u2022 ",(0,ba.jsx)("strong",{children:"Practice Daily:"})," Even 10 minutes a day helps build your streak and skills"]}),(0,ba.jsxs)("li",{children:["\u2022 ",(0,ba.jsx)("strong",{children:"Try AI Interview:"})," Get comfortable with case interviews in a safe environment"]}),(0,ba.jsxs)("li",{children:["\u2022 ",(0,ba.jsx)("strong",{children:"Earn & Spend Coins:"})," Complete lessons to earn coins, use them for helpful items"]})]})]})]})})]})},hE=oa("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),dE=oa("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),fE=e=>{let{lessons:t,userProgress:n,onStartLesson:r}=e;const i=t.reduce((e,t)=>((e[t.unit]=e[t.unit]||[]).push(t),e),{});let s=0;return(0,ba.jsxs)("div",{className:"max-w-3xl mx-auto p-4 sm:p-6 md:p-8 font-sans",children:[(0,ba.jsxs)("div",{className:"text-center mb-12",children:[(0,ba.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 tracking-tight",children:"Guided Mastery Path"}),(0,ba.jsx)("p",{className:"mt-2 text-md sm:text-lg text-gray-500",children:"Complete lessons in order to unlock new challenges and skills."})]}),Object.entries(i).map(e=>{let[t,i]=e;return(0,ba.jsxs)("div",{className:"mb-12",children:[(0,ba.jsx)("h2",{className:"text-2xl font-bold text-gray-700 border-b pb-2 mb-6",children:t}),(0,ba.jsx)("div",{className:"space-y-4",children:i.sort((e,t)=>e.order_index-t.order_index).map((e,t)=>{var i,a,o;s++;const l=null===n||void 0===n||null===(i=n.completed_lessons)||void 0===i?void 0:i.includes(e.id),c=(null===n||void 0===n||null===(a=n.completed_lessons)||void 0===a?void 0:a.length)===s-1,u=(null===n||void 0===n||null===(o=n.completed_lessons)||void 0===o?void 0:o.length)<s-1,h=l||c||!u;let d;return d=l?(0,ba.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:(0,ba.jsx)(hE,{size:18})}):c?(0,ba.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center",children:(0,ba.jsx)(ha,{size:18})}):(0,ba.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center",children:(0,ba.jsx)(dE,{size:18})}),(0,ba.jsxs)(Js.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"flex items-center p-4 rounded-lg transition-all "+(c?"bg-white shadow-md":l?"bg-green-50":"bg-gray-100"),children:[(0,ba.jsx)("div",{className:"mr-4",children:d}),(0,ba.jsxs)("div",{className:"flex-grow",children:[(0,ba.jsx)("h3",{className:"font-semibold "+(u?"text-gray-400":"text-gray-800"),children:e.title}),(0,ba.jsxs)("p",{className:"text-sm "+(u?"text-gray-400":"text-gray-500"),children:[e.xp_reward," XP"]})]}),h&&(0,ba.jsx)("button",{onClick:()=>r(e),className:"px-5 py-2 rounded-lg font-semibold transition-colors "+(l?"bg-green-100 text-green-700 hover:bg-green-200 border border-green-300":"bg-blue-600 text-white hover:bg-blue-700"),children:l?"Review":"Start"})]},e.id)})})]},t)})]})},pE=oa("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),mE=e=>{let{onComplete:t}=e;const n=Array.from({length:30},(e,t)=>({id:t,x:100*Math.random(),delay:.5*Math.random(),duration:1+.5*Math.random(),rotation:360*Math.random(),color:["#F59E0B","#10B981","#3B82F6","#8B5CF6","#EF4444"][Math.floor(5*Math.random())]}));return(0,ba.jsx)(Js.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationComplete:t,className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(e=>(0,ba.jsx)(Js.div,{initial:{x:`${e.x}vw`,y:"-10vh",rotate:0,opacity:1},animate:{y:"110vh",rotate:e.rotation,opacity:[1,1,0]},transition:{duration:e.duration,delay:e.delay,ease:"linear"},className:"absolute w-3 h-3 rounded-sm",style:{backgroundColor:e.color}},e.id))})},gE=e=>{let{lesson:t,onComplete:n,onBack:i}=e;const[s,a]=(0,r.useState)("LEARNING"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)("thinking"),m=t.quiz&&t.quiz.length>0?t.quiz[0]:null;(0,r.useEffect)(()=>{t.content||m?(a(t.content?"LEARNING":"QUIZ"),l(null),u(null)):n(0)},[t,m,n]);const g=()=>{n(t.xp_reward)};return(0,ba.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4 font-sans",children:[(0,ba.jsx)("div",{className:"fixed top-4 left-4 z-10",children:(0,ba.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-all text-gray-600 hover:text-gray-800",children:[(0,ba.jsx)(va,{className:"w-4 h-4"}),(0,ba.jsx)("span",{className:"text-sm font-medium",children:"Back"})]})}),h&&(0,ba.jsx)(mE,{}),(0,ba.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,ba.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden",children:[(0,ba.jsxs)("div",{className:"p-8",children:[(0,ba.jsxs)("div",{className:"text-center mb-8",children:[(0,ba.jsx)("h1",{className:"text-4xl font-bold text-gray-800",children:t.title}),(0,ba.jsxs)("div",{className:"inline-flex items-center text-yellow-500 font-semibold bg-yellow-100 px-3 py-1 rounded-full mt-2",children:[(0,ba.jsx)(Sa,{className:"w-5 h-5 mr-1"})," ",t.xp_reward," XP"]})]}),(0,ba.jsxs)(sa,{mode:"wait",children:["LEARNING"===s&&t.content&&(0,ba.jsx)(Js.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:(0,ba.jsx)("p",{children:t.content})},"learning-view"),"QUIZ"===s&&m&&(0,ba.jsxs)(Js.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[(0,ba.jsx)("div",{className:"flex justify-center mb-4",children:(0,ba.jsx)(_a,{mood:f,message:"correct"===c?"Great job! \ud83c\udf89":"incorrect"===c?"Try again!":"You got this!",size:"md"})}),(0,ba.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-800 mb-6",children:m.question}),(0,ba.jsx)("div",{className:"space-y-3",children:m.options.map((e,t)=>{const n=o===e;return(0,ba.jsx)(Js.button,{onClick:()=>(e=>{"incorrect"===c&&u(null),l(e)})(e),className:`w-full text-left p-5 rounded-lg border-2 text-lg transition-all duration-200 font-medium\n                            ${n?"border-blue-500 bg-blue-50 ring-2 ring-blue-500":"border-gray-300 bg-white hover:border-blue-400"}\n                            ${c?"cursor-not-allowed":""}`,disabled:"correct"===c,whileHover:{scale:c?1:1.02},whileTap:{scale:c?1:.98},children:e},t)})})]},"quiz-view")]})]}),(0,ba.jsx)("div",{className:"h-32",children:(0,ba.jsx)(sa,{children:c&&(0,ba.jsxs)(Js.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"h-full p-6 flex items-center justify-between text-white font-bold text-xl "+("correct"===c?"bg-green-500":"bg-red-500"),children:[(0,ba.jsxs)("div",{className:"flex items-center",children:["correct"===c?(0,ba.jsx)(iE,{className:"w-8 h-8 mr-3"}):(0,ba.jsx)(pE,{className:"w-8 h-8 mr-3"}),"correct"===c?"Correct!":"Incorrect, try again."]}),"correct"===c&&(0,ba.jsx)(Js.button,{whileHover:{scale:1.1},onClick:g,className:"px-6 py-2 bg-white text-green-600 rounded-lg shadow-md font-bold",children:"Finish"})]},"feedback")})})]}),(0,ba.jsxs)("div",{className:"mt-6",children:["LEARNING"===s&&!c&&(m?(0,ba.jsxs)(Js.button,{whileHover:{scale:1.05},onClick:()=>a("QUIZ"),className:"w-full flex items-center justify-center px-6 py-4 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-colors",children:["Continue ",(0,ba.jsx)(xa,{className:"w-5 h-5 ml-2"})]}):(0,ba.jsx)(Js.button,{whileHover:{scale:1.05},onClick:g,className:"w-full flex items-center justify-center px-6 py-4 bg-green-600 text-white font-bold rounded-lg shadow-lg hover:bg-green-700 transition-colors",children:"Finish"})),"QUIZ"===s&&!c&&(0,ba.jsx)(Js.button,{whileHover:{scale:1.05},onClick:()=>{o&&(o===m.correctAnswer?(u("correct"),p("celebrating"),d(!0),setTimeout(()=>d(!1),2e3)):(u("incorrect"),p("sad")))},disabled:!o,className:"w-full flex items-center justify-center px-6 py-4 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Check"})]})]})]})},yE=oa("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]),vE=e=>{let{user:t}=e;return t?(0,ba.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm p-3 mb-6",children:(0,ba.jsxs)("div",{className:"flex items-center justify-end space-x-8",children:[(0,ba.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,ba.jsx)(yE,{className:"h-6 w-6 mr-2"}),(0,ba.jsx)("span",{className:"font-bold text-lg",children:null!=t.caseCoins?t.caseCoins:0})]}),(0,ba.jsxs)("div",{className:"flex items-center text-orange-600",children:[(0,ba.jsx)(ya,{className:"h-6 w-6 mr-2"}),(0,ba.jsx)("span",{className:"font-bold text-lg",children:null!=t.current_streak?t.current_streak:0})]})]})}):null},wE=oa("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]),bE={Snowflake:(0,ba.jsx)(wE,{className:"h-10 w-10 text-blue-400 mb-4"}),Default:(0,ba.jsx)(ka,{className:"h-10 w-10 text-gray-400 mb-4"})},xE=e=>{var t;let{user:n,onPurchase:i}=e;const[s,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{const e=(await hk(vS(wk,"store_items"))).docs.map(e=>({id:e.id,...e.data()}));a(e)}catch(e){u("Failed to load store items. Please try again later."),console.error("Error fetching store items:",e)}finally{l(!1)}})()},[]),(0,ba.jsxs)("div",{className:"p-4",children:[(0,ba.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ba.jsx)(ka,{className:"w-5 h-5 text-blue-600"}),(0,ba.jsx)("span",{className:"font-medium text-blue-900",children:"Demo Mode"})]}),(0,ba.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"This is a preview of the shop feature. Purchases are simulated for demonstration purposes."})]}),(0,ba.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,ba.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Store"}),(0,ba.jsxs)("div",{className:"flex items-center text-lg font-semibold bg-yellow-100 text-yellow-800 rounded-full px-4 py-2",children:[(0,ba.jsx)(yE,{className:"h-6 w-6 mr-2"}),(0,ba.jsxs)("span",{children:[null!==(t=null===n||void 0===n?void 0:n.caseCoins)&&void 0!==t?t:0," Coins"]})]})]}),o&&(0,ba.jsx)("div",{children:"Loading items..."}),c&&(0,ba.jsx)("div",{className:"text-red-600",children:c}),(0,ba.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,ba.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 flex flex-col items-center text-center",children:[bE[e.icon]||bE.Default,(0,ba.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.name}),(0,ba.jsx)("p",{className:"text-gray-600 mb-4 flex-grow",children:e.description}),(0,ba.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,ba.jsx)(yE,{className:"h-5 w-5 mr-1 text-yellow-600"}),(0,ba.jsx)("span",{className:"text-lg font-semibold",children:e.cost})]}),(0,ba.jsx)("button",{onClick:()=>i(e),disabled:n.caseCoins<e.cost,className:"w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-blue-700",children:"Buy"})]},e.id))})]})},SE=oa("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),kE=oa("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),EE=e=>{let{icon:t,title:n,value:r,subtitle:i,color:s="blue"}=e;return(0,ba.jsx)(Js.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-all",children:(0,ba.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ba.jsxs)("div",{children:[(0,ba.jsx)("p",{className:"text-sm font-medium text-gray-600",children:n}),(0,ba.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:r}),i&&(0,ba.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:i})]}),(0,ba.jsx)("div",{className:`p-3 rounded-lg bg-${s}-100`,children:(0,ba.jsx)(t,{className:`h-6 w-6 text-${s}-600`})})]})})},_E=e=>{let{label:t,current:n,total:r,color:i="blue"}=e;const s=Math.min(n/r*100,100);return(0,ba.jsxs)("div",{className:"mb-4",children:[(0,ba.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,ba.jsx)("span",{className:"font-medium text-gray-700",children:t}),(0,ba.jsxs)("span",{className:"text-gray-500",children:[n,"/",r]})]}),(0,ba.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ba.jsx)(Js.div,{initial:{width:0},animate:{width:`${s}%`},transition:{duration:1,ease:"easeOut"},className:`bg-${i}-600 h-2 rounded-full`})})]})},TE=e=>{let{skills:t}=e;return(0,ba.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,ba.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Skill Assessment"}),(0,ba.jsx)("div",{className:"space-y-4",children:t.map((e,t)=>(0,ba.jsxs)("div",{children:[(0,ba.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,ba.jsx)("span",{className:"font-medium text-gray-700",children:e.name}),(0,ba.jsxs)("span",{className:"text-gray-500",children:[e.level,"/5"]})]}),(0,ba.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ba.jsx)(Js.div,{initial:{width:0},animate:{width:e.level/5*100+"%"},transition:{duration:1,delay:.1*t},className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full"})})]},t))})]})},CE=e=>{let{activities:t}=e;return(0,ba.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,ba.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,ba.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>(0,ba.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,ba.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,ba.jsx)(e.icon,{className:"h-4 w-4 text-blue-600"})}),(0,ba.jsxs)("div",{className:"flex-1",children:[(0,ba.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,ba.jsx)("p",{className:"text-xs text-gray-500",children:e.date})]}),(0,ba.jsxs)("span",{className:"text-xs font-medium text-green-600",children:["+",e.xp," XP"]})]},t))})]})},IE=e=>{var t;let{user:n,lessons:r}=e;const i=(null===n||void 0===n||null===(t=n.completed_lessons)||void 0===t?void 0:t.length)||0,s=(null===r||void 0===r?void 0:r.length)||10,a=(null===n||void 0===n?void 0:n.current_level)||1,o=(null===n||void 0===n?void 0:n.total_xp)||0,l=o%100,c=[{name:"Problem Structuring",level:Math.min(Math.floor(i/2)+1,5)},{name:"Market Analysis",level:Math.min(Math.floor(i/3)+1,5)},{name:"Financial Modeling",level:Math.min(Math.floor(i/4)+1,5)},{name:"Communication",level:Math.min(Math.floor(i/2)+2,5)},{name:"Strategic Thinking",level:Math.min(Math.floor(i/3)+1,5)}],u=[{icon:ca,title:"Completed Market Sizing Lesson",date:"2 hours ago",xp:50},{icon:SE,title:"Achieved 7-day streak",date:"1 day ago",xp:25},{icon:la,title:"Finished Profitability Case",date:"2 days ago",xp:75},{icon:kE,title:"Reached Level "+a,date:"3 days ago",xp:100}];return(0,ba.jsxs)("div",{className:"space-y-6",children:[(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Your Progress"}),(0,ba.jsx)("p",{className:"text-gray-600",children:"Track your learning journey and skill development"})]}),(0,ba.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ba.jsx)(EE,{icon:da,title:"Total XP",value:o.toLocaleString(),subtitle:`Level ${a}`,color:"blue"}),(0,ba.jsx)(EE,{icon:ca,title:"Lessons Completed",value:i,subtitle:s-i+" remaining",color:"green"}),(0,ba.jsx)(EE,{icon:ya,title:"Current Streak",value:`${(null===n||void 0===n?void 0:n.current_streak)||0} days`,subtitle:`Best: ${(null===n||void 0===n?void 0:n.longest_streak)||0} days`,color:"orange"}),(0,ba.jsx)(EE,{icon:Sa,title:"Case Coins",value:(null===n||void 0===n?void 0:n.caseCoins)||0,subtitle:"Spend in store",color:"purple"})]}),(0,ba.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,ba.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Learning Progress"}),(0,ba.jsx)(_E,{label:"Course Completion",current:i,total:s,color:"blue"}),(0,ba.jsx)(_E,{label:"Current Level Progress",current:l,total:100,color:"green"}),(0,ba.jsx)(_E,{label:"Weekly Goal",current:Math.min(i%7,5),total:5,color:"purple"})]}),(0,ba.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ba.jsx)(TE,{skills:c}),(0,ba.jsx)(CE,{activities:u})]})]})},NE=oa("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),AE=e=>{switch(e){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},PE=e=>{let{caseStudy:t}=e;return(0,ba.jsx)(Js.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-all cursor-pointer",children:(0,ba.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ba.jsxs)("div",{className:"flex-1",children:[(0,ba.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t.title}),(0,ba.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,ba.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${AE(t.difficulty)}`,children:t.difficulty}),(0,ba.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.industry})]}),(0,ba.jsx)("p",{className:"text-gray-600 text-sm line-clamp-3",children:t.case_prompt})]}),(0,ba.jsx)(NE,{className:"h-6 w-6 text-gray-400 ml-4"})]})})},RE=e=>{let{cases:t,onNavigate:n}=e;return(0,ba.jsxs)("div",{className:"space-y-6",children:[(0,ba.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Case Simulator"}),(0,ba.jsx)("p",{className:"text-gray-600",children:"Practice with real consulting case studies"})]}),(0,ba.jsx)("button",{onClick:()=>n("dashboard"),className:"text-blue-600 hover:text-blue-700",children:"\u2190 Back to Dashboard"})]}),(0,ba.jsx)("div",{className:"grid gap-6",children:t.map(e=>(0,ba.jsx)(PE,{caseStudy:e},e.id))})]})},DE=oa("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),jE=oa("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ME=e=>{let{size:t="md",text:n="Loading..."}=e;return(0,ba.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,ba.jsx)("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]} border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin`}),n&&(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:n})]})};const LE=class{constructor(){this.sessionState={currentStep:"introduction",userResponses:[],caseData:{},score:{structure:0,math:0,insight:0},hintsUsed:0}}analyzeResponse(e){const t=e.toLowerCase();return{hasStructure:/framework|mece|structure|first|second|third|step/.test(t),hasMath:/\d+|calculate|estimate|multiply|divide|percent|million|billion/.test(t),hasInsight:/because|therefore|however|insight|recommend|suggest/.test(t),mentionsPricing:/price|pricing|cost|revenue|margin/.test(t),mentionsMarket:/market|customer|segment|size|demand/.test(t),mentionsCompetition:/competitor|competition|competitive|market share/.test(t),isQuestion:/\?/.test(t),length:e.length}}getResponse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"profitability";const n=this.analyzeResponse(e);this.sessionState.userResponses.push({input:e,analysis:n}),n.hasStructure&&(this.sessionState.score.structure+=10),n.hasMath&&(this.sessionState.score.math+=10),n.hasInsight&&(this.sessionState.score.insight+=10);const r=this.generateContextualResponse(n,t);return{message:r.message,feedback:r.feedback,hint:r.hint,score:this.sessionState.score,nextStep:r.nextStep}}generateContextualResponse(e,t){const n=this.getCaseResponses(t),r=this.sessionState.userResponses.length;return 1===r?this.getIntroductionResponse(e,n):r<=3?this.getStructureResponse(e,n):r<=6?this.getDeepDiveResponse(e,n,t):this.getConclusionResponse(e,n)}getIntroductionResponse(e,t){return e.hasStructure?{message:t.positive.structure[Math.floor(Math.random()*t.positive.structure.length)],feedback:"Great start with a structured approach!",nextStep:"deep_dive"}:e.isQuestion?{message:t.clarifying[Math.floor(Math.random()*t.clarifying.length)],feedback:"Good questions help clarify the problem.",hint:"Try structuring your approach using a framework like profitability = revenue - costs."}:{message:t.prompts.structure[Math.floor(Math.random()*t.prompts.structure.length)],hint:"Consider using the MECE principle to structure your thinking."}}getStructureResponse(e,t){return e.hasMath&&e.hasStructure?{message:t.positive.comprehensive[Math.floor(Math.random()*t.positive.comprehensive.length)],feedback:"Excellent! You're combining structure with quantitative thinking."}:!e.hasMath&&e.hasStructure?{message:t.prompts.quantify[Math.floor(Math.random()*t.prompts.quantify.length)],hint:"Try to put some numbers behind your framework."}:{message:t.prompts.elaborate[Math.floor(Math.random()*t.prompts.elaborate.length)],hint:"Walk me through your reasoning step by step."}}getDeepDiveResponse(e,t,n){const r=this.getCaseSpecificPrompts(n);return e.hasInsight?{message:t.positive.insight[Math.floor(Math.random()*t.positive.insight.length)],feedback:"Strong business insight!"}:{message:r[Math.floor(Math.random()*r.length)],hint:"Think about the business implications of your analysis."}}getConclusionResponse(e,t){return Object.values(this.sessionState.score).reduce((e,t)=>e+t,0)>60?{message:t.conclusion.strong[Math.floor(Math.random()*t.conclusion.strong.length)],feedback:`Excellent performance! Score: Structure ${this.sessionState.score.structure}, Math ${this.sessionState.score.math}, Insight ${this.sessionState.score.insight}`}:{message:t.conclusion.improvement[Math.floor(Math.random()*t.conclusion.improvement.length)],feedback:`Good effort! Areas to improve: ${this.getImprovementAreas()}`,hint:"Practice more cases to strengthen your weak areas."}}getCaseResponses(e){return{positive:{structure:["That's a solid framework! Walk me through each component.","Great structure. Let's dive deeper into each part.","I like your systematic approach. Tell me more about the first bucket."],comprehensive:["Excellent! You're thinking both structurally and quantitatively.","Perfect combination of framework and numbers. Continue with this approach.","This is exactly the kind of structured, analytical thinking we look for."],insight:["That's a valuable insight! What led you to that conclusion?","Interesting perspective. How would you test that hypothesis?","Great business intuition. What are the implications?"]},prompts:{structure:["How would you structure this problem?","What framework would you use to approach this?","Let's break this down systematically. Where would you start?"],quantify:["Can you put some numbers behind that?","How would you estimate that?","What's your math on that assumption?"],elaborate:["Tell me more about your thinking there.","Can you walk me through that logic?","What factors are you considering?"]},clarifying:["That's a good question. For this case, assume...","Let me clarify that point...","Here's some additional context..."],conclusion:{strong:["Outstanding work! You demonstrated strong analytical skills and business judgment.","Excellent case performance. Your structured approach and insights were impressive.","Great job! You'd be ready for the next round."],improvement:["Good effort! Focus on being more structured in your approach.","Nice work. Practice quantifying your assumptions more.","Solid attempt. Work on developing stronger business insights."]}}}getCaseSpecificPrompts(e){const t={profitability:["What's driving the revenue decline?","Have you considered the cost structure?","What about pricing vs. volume effects?"],"market-sizing":["How would you estimate the market size?","What's your approach to segmentation?","Can you validate that assumption?"],"new-product":["What's the market opportunity?","How would you assess competitive response?","What are the key success factors?"]};return t[e]||t.profitability}getImprovementAreas(){const e=[];return this.sessionState.score.structure<20&&e.push("structure"),this.sessionState.score.math<20&&e.push("quantitative analysis"),this.sessionState.score.insight<20&&e.push("business insights"),e.join(", ")||"overall approach"}getRecommendations(){const e=this.getImprovementAreas(),t={structure:"Practice the MECE framework and case structuring","quantitative analysis":"Work on market sizing and financial calculations","business insights":"Read business cases and practice hypothesis formation"};return Object.keys(t).filter(t=>e.includes(t)).map(e=>t[e])}reset(e){this.sessionState={currentStep:"introduction",userResponses:[],caseData:{},score:{structure:0,math:0,insight:0},hintsUsed:0,caseType:e}}},OE=e=>{let{caseType:t="profitability",onComplete:n}=e;const[i,s]=(0,r.useState)([]),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u]=(0,r.useState)(new LE),[h,d]=(0,r.useState)({structure:0,math:0,insight:0}),[f,p]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>{u.reset(t);const e={role:"assistant",content:`Hi! I'm your Smart AI interviewer. Today we'll work on a ${t.replace("-"," ")} case. I'll analyze your responses and provide real-time feedback. Ready to begin?`,timestamp:Date.now()};s([e])},[t,u]),(0,r.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[i]);return(0,ba.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,ba.jsxs)("div",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[(0,ba.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ba.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,ba.jsx)(va,{className:"w-4 h-4"}),(0,ba.jsx)("span",{className:"text-sm font-medium",children:"Back"})]}),(0,ba.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,ba.jsx)(ua,{className:"text-white w-6 h-6"})}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h1",{className:"font-semibold text-gray-900",children:"Smart AI Interviewer"}),(0,ba.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ba.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:t.replace("-"," ")}),(0,ba.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ba.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,ba.jsx)("span",{className:"text-xs text-gray-400",children:"Smart AI Active"})]})]})]})]}),(0,ba.jsx)("div",{className:"flex items-center space-x-2",children:(0,ba.jsx)("button",{onClick:()=>p(!f),className:"p-2 rounded-full bg-purple-100 text-purple-600 hover:bg-purple-200",title:"Toggle Score",children:(0,ba.jsx)(da,{className:"w-5 h-5"})})})]}),f&&(0,ba.jsx)(Js.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-50 to-blue-50 p-4 border-b",children:(0,ba.jsxs)("div",{className:"flex justify-between items-center max-w-md",children:[(0,ba.jsxs)("div",{className:"text-center",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,ba.jsx)(DE,{className:"w-4 h-4 text-purple-600"}),(0,ba.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Structure"})]}),(0,ba.jsx)("div",{className:"text-lg font-bold text-purple-600",children:h.structure})]}),(0,ba.jsxs)("div",{className:"text-center",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,ba.jsx)(la,{className:"w-4 h-4 text-blue-600"}),(0,ba.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Math"})]}),(0,ba.jsx)("div",{className:"text-lg font-bold text-blue-600",children:h.math})]}),(0,ba.jsxs)("div",{className:"text-center",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,ba.jsx)(da,{className:"w-4 h-4 text-green-600"}),(0,ba.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Insight"})]}),(0,ba.jsx)("div",{className:"text-lg font-bold text-green-600",children:h.insight})]})]})}),(0,ba.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,ba.jsx)(sa,{children:i.map((e,t)=>(0,ba.jsx)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:(0,ba.jsxs)("div",{className:"flex items-start space-x-2 max-w-xs lg:max-w-md "+("user"===e.role?"flex-row-reverse space-x-reverse":""),children:[(0,ba.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+("user"===e.role?"bg-blue-600":"bg-gray-600"),children:"user"===e.role?(0,ba.jsx)(ga,{className:"text-white w-4 h-4"}):(0,ba.jsx)(ua,{className:"text-white w-4 h-4"})}),(0,ba.jsxs)("div",{className:"px-4 py-2 rounded-lg "+("user"===e.role?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm"),children:[(0,ba.jsx)("p",{className:"text-sm",children:e.content}),"assistant"===e.role&&(e.feedback||e.hint)&&(0,ba.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[e.feedback&&(0,ba.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,ba.jsx)(da,{className:"w-3 h-3 text-green-600"}),(0,ba.jsx)("span",{className:"text-xs text-green-700 font-medium",children:e.feedback})]}),e.hint&&(0,ba.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ba.jsx)(DE,{className:"w-3 h-3 text-purple-600"}),(0,ba.jsx)("span",{className:"text-xs text-purple-700",children:e.hint})]})]})]})]})},t))}),l&&(0,ba.jsx)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:(0,ba.jsxs)("div",{className:"flex items-start space-x-2 max-w-xs lg:max-w-md",children:[(0,ba.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:(0,ba.jsx)(ua,{className:"text-white w-4 h-4"})}),(0,ba.jsx)("div",{className:"px-4 py-2 rounded-lg bg-white text-gray-900 shadow-sm",children:(0,ba.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ba.jsx)(ME,{size:"sm",text:""}),(0,ba.jsx)("span",{className:"text-sm text-gray-600",children:"AI is analyzing your response..."})]})})]})}),(0,ba.jsx)("div",{ref:m})]}),(0,ba.jsx)("div",{className:"bg-white border-t p-4",children:(0,ba.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(e=>{if(!e.trim())return;const n={role:"user",content:e,timestamp:Date.now()};s(e=>[...e,n]),o(""),c(!0),setTimeout(()=>{try{const n=u.getResponse(e,t),r={role:"assistant",content:n.message,feedback:n.feedback,hint:n.hint,timestamp:Date.now()};s(e=>[...e,r]),d(n.score)}catch(n){console.error("Error getting AI response:",n)}finally{c(!1)}},1e3+1e3*Math.random())})(a)},className:"flex space-x-2",children:[(0,ba.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Type your response...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l}),(0,ba.jsx)("button",{type:"submit",disabled:l||!a.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:(0,ba.jsx)(jE,{className:"w-4 h-4"})})]})})]})},FE=e=>{let{onComplete:t}=e;const[n,i]=(0,r.useState)(0),s=[{title:"Welcome to CaseQuest! \ud83d\udc4b",description:"Your journey to mastering consulting case interviews starts here. Let's show you around!",icon:Sa},{title:"Learn Step-by-Step \ud83d\udcda",description:"Follow our guided learning path. Complete lessons to earn XP (experience points) and unlock new content.",icon:ca},{title:"Practice with AI \ud83e\udd16",description:"Interview with our AI coach. Get real-time feedback on your case-solving approach.",icon:ua},{title:"Track Your Progress \ud83d\udcca",description:"Build streaks, level up, and earn Case Coins. Use coins in the store for helpful items!",icon:SE}],a=s[n],o=a.icon;return(0,ba.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,ba.jsxs)(Js.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[(0,ba.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:(0,ba.jsx)(pa,{className:"w-6 h-6"})}),(0,ba.jsxs)("div",{className:"text-center mb-6",children:[(0,ba.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ba.jsx)(o,{className:"w-10 h-10 text-blue-600"})}),(0,ba.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.title}),(0,ba.jsx)("p",{className:"text-gray-600",children:a.description})]}),(0,ba.jsx)("div",{className:"flex justify-center space-x-2 mb-6",children:s.map((e,t)=>(0,ba.jsx)("div",{className:"h-2 rounded-full transition-all "+(t===n?"w-8 bg-blue-600":"w-2 bg-gray-300")},t))}),(0,ba.jsxs)("div",{className:"flex justify-between",children:[n>0?(0,ba.jsxs)("button",{onClick:()=>i(n-1),className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,ba.jsx)(va,{className:"w-4 h-4 mr-1"})," Back"]}):(0,ba.jsx)("div",{}),n<s.length-1?(0,ba.jsxs)("button",{onClick:()=>i(n+1),className:"flex items-center bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:["Next ",(0,ba.jsx)(xa,{className:"w-4 h-4 ml-1"})]}):(0,ba.jsx)("button",{onClick:t,className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"Get Started! \ud83d\ude80"})]})]})})},VE=e=>{let{onComplete:t}=e;const[n,i]=(0,r.useState)(0),[s,a]=(0,r.useState)(10),[o,l]=(0,r.useState)("evening"),[c,u]=(0,r.useState)(10);(0,r.useEffect)(()=>{tE.trackOnboardingStart(),u(xk.getEndowedProgressPercent())},[]);const h=[{title:"Welcome to CaseQuest!",subtitle:"Let's set you up for success",content:(0,ba.jsxs)("div",{className:"text-center",children:[(0,ba.jsx)(Js.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"p-6 bg-blue-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,ba.jsx)(SE,{className:"h-12 w-12 text-blue-600"})}),(0,ba.jsx)("p",{className:"text-gray-600 mb-6",children:"You're about to start your consulting prep journey. Let's make it effective and fun!"}),(0,ba.jsxs)("div",{className:"bg-green-50 rounded-xl p-4",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-2 justify-center mb-2",children:[(0,ba.jsx)(Sa,{className:"h-5 w-5 text-green-600"}),(0,ba.jsx)("span",{className:"font-semibold text-green-800",children:"Head Start Bonus!"})]}),(0,ba.jsxs)("p",{className:"text-sm text-green-700",children:["We've already unlocked ",c,"% of your first module to get you started faster"]})]})]})},{title:"Set Your Daily Goal",subtitle:"How much time can you commit each day?",content:(0,ba.jsxs)("div",{children:[(0,ba.jsx)("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[5,10,20].map(e=>(0,ba.jsxs)(Js.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(e),className:"p-4 rounded-xl border-2 transition-all "+(s===e?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,ba.jsx)(Ca,{className:"h-6 w-6 mx-auto mb-2 text-gray-600"}),(0,ba.jsxs)("p",{className:"font-semibold text-gray-900",children:[e," min"]}),(0,ba.jsx)("p",{className:"text-xs text-gray-500",children:5===e?"Quick":10===e?"Balanced":"Intensive"})]},e))}),(0,ba.jsx)("div",{className:"bg-blue-50 rounded-xl p-4",children:(0,ba.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,ba.jsx)("strong",{children:"Tip:"})," Start small and build consistency. You can always adjust later!"]})})]})},{title:"When do you prefer to study?",subtitle:"We'll send gentle reminders at the right time",content:(0,ba.jsx)("div",{children:(0,ba.jsx)("div",{className:"space-y-3 mb-6",children:[{value:"morning",label:"Morning (8-10 AM)",emoji:"\ud83c\udf05"},{value:"afternoon",label:"Afternoon (2-4 PM)",emoji:"\u2600\ufe0f"},{value:"evening",label:"Evening (7-9 PM)",emoji:"\ud83c\udf19"}].map(e=>(0,ba.jsx)(Js.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(e.value),className:"w-full p-4 rounded-xl border-2 transition-all text-left "+(o===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,ba.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]})},e.value))})})},{title:"You're All Set!",subtitle:"Ready to start your first lesson?",content:(0,ba.jsxs)("div",{className:"text-center",children:[(0,ba.jsx)(Js.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2},className:"p-6 bg-green-100 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,ba.jsx)(iE,{className:"h-12 w-12 text-green-600"})}),(0,ba.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 mb-6",children:[(0,ba.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"Your Learning Plan:"}),(0,ba.jsxs)("div",{className:"space-y-3 text-left",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)(la,{className:"h-5 w-5 text-blue-600"}),(0,ba.jsxs)("span",{className:"text-gray-700",children:[s," minutes daily"]})]}),(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)(Ca,{className:"h-5 w-5 text-purple-600"}),(0,ba.jsxs)("span",{className:"text-gray-700",children:["Study in the ",o]})]}),(0,ba.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ba.jsx)(ya,{className:"h-5 w-5 text-orange-600"}),(0,ba.jsx)("span",{className:"text-gray-700",children:"Build your streak starting today"})]})]})]}),(0,ba.jsx)("div",{className:"bg-yellow-50 rounded-xl p-4 mb-6",children:(0,ba.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,ba.jsx)("strong",{children:"\ud83c\udfaf First Goal:"})," Complete your first 3-minute lesson to start your streak!"]})})]})}],d=h[n];return(0,ba.jsx)(Js.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center z-50 p-4",children:(0,ba.jsxs)(Js.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl",children:[(0,ba.jsxs)("div",{className:"mb-8",children:[(0,ba.jsxs)("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[(0,ba.jsxs)("span",{children:["Step ",n+1," of ",h.length]}),(0,ba.jsxs)("span",{children:[Math.round((n+1)/h.length*100),"%"]})]}),(0,ba.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ba.jsx)(Js.div,{initial:{width:0},animate:{width:(n+1)/h.length*100+"%"},transition:{duration:.5},className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full"})})]}),(0,ba.jsx)(sa,{mode:"wait",children:(0,ba.jsxs)(Js.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[(0,ba.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:d.title}),(0,ba.jsx)("p",{className:"text-gray-600 mb-6 text-center",children:d.subtitle}),d.content]},n)}),(0,ba.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,ba.jsx)("button",{onClick:()=>n>0&&i(n-1),className:"px-4 py-2 rounded-lg "+(0===n?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-gray-100"),disabled:0===n,children:"Back"}),(0,ba.jsxs)(Js.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{if(1===n&&tE.trackGoalSet(s),n<h.length-1)i(n+1);else{const e=`${(new Date).getFullYear()}-W${Math.ceil((new Date).getDate()/7)}`;tE.setUserCohort(e),tE.setOnboardingComplete(!0),t({dailyGoalMinutes:s,preferredStudyTime:o,hasCompletedOnboarding:!0,endowedProgress:{firstModuleProgress:c},cohortWeek:e,onboardingCompletedAt:Date.now()})}},className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg font-medium hover:shadow-lg transition-all",children:[n===h.length-1?"Start Learning!":"Next",(0,ba.jsx)(xa,{className:"h-4 w-4"})]})]})]})})},UE=e=>{let{sessionData:t,onContinue:n,onClose:i,showCelebration:s=!1,isFirstLesson:a=!1}=e;const{xpEarned:o=0,streakMaintained:l=!1,streakExtended:c=!1,skillsImproved:u=[],nextRecommendation:h=null,sessionLength:d=0,accuracy:f=0}=t;(0,r.useEffect)(()=>{tE.trackSummaryViewed(t),a&&tE.trackFirstLessonComplete(60*d),c&&tE.trackStreakComplete(t.newStreakLength||1)},[t,a,c]);const p=()=>{tE.trackNextActionTaken("continue_from_summary"),n()};return(0,ba.jsx)(Js.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ba.jsxs)(Js.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-8 max-w-md w-full",children:[(0,ba.jsxs)("div",{className:"text-center mb-6",children:[(0,ba.jsx)(Js.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"p-4 bg-green-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,ba.jsx)(SE,{className:"h-10 w-10 text-green-600"})}),(0,ba.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a?"Welcome to CaseQuest!":"Great Session!"}),(0,ba.jsxs)("p",{className:"text-gray-600",children:[d," minutes well spent"]})]}),(0,ba.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,ba.jsxs)(Js.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3},className:"bg-blue-50 rounded-xl p-4 text-center",children:[(0,ba.jsx)(Sa,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),(0,ba.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["+",o]}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:"XP Earned"})]}),(0,ba.jsxs)(Js.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.4},className:"bg-orange-50 rounded-xl p-4 text-center",children:[(0,ba.jsx)(ya,{className:"h-6 w-6 text-orange-600 mx-auto mb-2"}),(0,ba.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:c?"\ud83d\udd25":"\u2705"}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:c?"Streak +1":"Maintained"})]}),f>0&&(0,ba.jsxs)(Js.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"bg-green-50 rounded-xl p-4 text-center",children:[(0,ba.jsx)(la,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),(0,ba.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[f,"%"]}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:"Accuracy"})]}),u.length>0&&(0,ba.jsxs)(Js.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"bg-purple-50 rounded-xl p-4 text-center",children:[(0,ba.jsx)(da,{className:"h-6 w-6 text-purple-600 mx-auto mb-2"}),(0,ba.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["+",u.length]}),(0,ba.jsx)("p",{className:"text-sm text-gray-600",children:"Skills"})]})]}),u.length>0&&(0,ba.jsxs)(Js.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mb-6",children:[(0,ba.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Skills Strengthened:"}),(0,ba.jsx)("div",{className:"space-y-2",children:u.map((e,t)=>(0,ba.jsxs)(Js.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.8+.1*t},className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[(0,ba.jsx)(iE,{className:"h-4 w-4 text-green-600"}),(0,ba.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),(0,ba.jsxs)("span",{className:"text-xs text-gray-500 ml-auto",children:[e.oldStrength,"% \u2192 ",e.newStrength,"%"]})]},e.name))})]}),h&&(0,ba.jsxs)(Js.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-6",children:[(0,ba.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Up Next:"}),(0,ba.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:h}),(0,ba.jsxs)("button",{onClick:p,className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium text-sm",children:["Continue Learning ",(0,ba.jsx)(xa,{className:"h-4 w-4"})]})]}),a&&(0,ba.jsx)(Js.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"bg-yellow-50 rounded-xl p-4 mb-6",children:(0,ba.jsxs)("p",{className:"text-sm text-yellow-800 text-center",children:["\ud83c\udf89 ",(0,ba.jsx)("strong",{children:"Streak started!"})," Come back tomorrow to keep it going."]})}),(0,ba.jsxs)("div",{className:"flex gap-3",children:[(0,ba.jsx)("button",{onClick:()=>{tE.trackNextActionTaken("close_summary"),i()},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 font-medium",children:"Done for Now"}),h&&(0,ba.jsx)("button",{onClick:p,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 font-medium",children:"Keep Going"})]})]})})},zE=()=>{const[e,t]=(0,r.useState)(!1),n=[{icon:ca,title:"Learning Path",description:"Follow structured lessons to build your consulting skills step-by-step. Complete lessons to earn XP and unlock new content."},{icon:ua,title:"AI Interview",description:"Practice case interviews with our AI coach. Speak or type your answers and get instant feedback on your approach."},{icon:Sa,title:"XP & Levels",description:"Earn XP (experience points) by completing lessons. Every 100 XP = 1 level up. Higher levels unlock advanced content."},{icon:SE,title:"Streaks & Coins",description:"Practice daily to build your streak. Complete lessons to earn Case Coins. Use coins in the store for helpful items."}];return(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsxs)(Js.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t(!0),className:"fixed bottom-20 right-4 bg-blue-600 text-white rounded-full shadow-lg flex items-center gap-2 px-4 py-3 z-40 hover:bg-blue-700 transition-colors",style:{minHeight:"48px"},children:[(0,ba.jsx)(ka,{className:"w-5 h-5"}),(0,ba.jsx)("span",{className:"text-sm font-medium",children:"Help"})]}),(0,ba.jsx)(sa,{children:e&&(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)(Js.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-50"}),(0,ba.jsxs)(Js.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"fixed inset-4 bg-white rounded-2xl shadow-2xl z-50 flex flex-col max-h-[90vh]",children:[(0,ba.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,ba.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Need Help? \ud83e\udd14"}),(0,ba.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:(0,ba.jsx)(pa,{className:"w-6 h-6"})})]}),(0,ba.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:n.map((e,t)=>(0,ba.jsxs)("div",{className:"flex gap-4",children:[(0,ba.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,ba.jsx)(e.icon,{className:"w-6 h-6 text-blue-600"})}),(0,ba.jsxs)("div",{children:[(0,ba.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),(0,ba.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]},t))}),(0,ba.jsx)("div",{className:"p-6 bg-green-50 border-t",children:(0,ba.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,ba.jsx)("strong",{children:"Quick Tip:"})," Hover over the ",(0,ba.jsx)(ka,{className:"w-4 h-4 inline text-gray-400"})," icons throughout the app for quick explanations!"]})})]})]})})]})},BE=oa("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),$E=oa("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]),HE=oa("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]),qE=()=>{const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),s=e=>{console.log(`Feedback: ${e}`),i(!0),setTimeout(()=>{t(!1),i(!1)},2e3)};return(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)(Js.button,{whileHover:{scale:1.05},onClick:()=>t(!0),className:"fixed bottom-6 right-6 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-50",children:(0,ba.jsx)(BE,{className:"w-5 h-5"})}),e&&(0,ba.jsxs)(Js.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"fixed bottom-20 right-6 bg-white rounded-lg shadow-xl p-4 w-64 z-50",children:[(0,ba.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,ba.jsx)("h3",{className:"font-semibold text-gray-900",children:"Quick Feedback"}),(0,ba.jsx)("button",{onClick:()=>t(!1),children:(0,ba.jsx)(pa,{className:"w-4 h-4 text-gray-500"})})]}),n?(0,ba.jsx)("p",{className:"text-green-600 text-sm",children:"Thanks for your feedback! \ud83d\ude4f"}):(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"How's your experience?"}),(0,ba.jsxs)("div",{className:"flex gap-2",children:[(0,ba.jsxs)("button",{onClick:()=>s("positive"),className:"flex-1 flex items-center justify-center gap-1 p-2 bg-green-50 text-green-700 rounded hover:bg-green-100 transition-colors",children:[(0,ba.jsx)($E,{className:"w-4 h-4"}),(0,ba.jsx)("span",{className:"text-sm",children:"Good"})]}),(0,ba.jsxs)("button",{onClick:()=>s("negative"),className:"flex-1 flex items-center justify-center gap-1 p-2 bg-red-50 text-red-700 rounded hover:bg-red-100 transition-colors",children:[(0,ba.jsx)(HE,{className:"w-4 h-4"}),(0,ba.jsx)("span",{className:"text-sm",children:"Issues"})]})]})]})]})]})},WE=(0,r.createContext)(),KE=e=>{let{onLogin:t}=e;const[n,i]=(0,r.useState)(!0),[s,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)("");return(0,ba.jsx)("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4",children:(0,ba.jsxs)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[(0,ba.jsx)("div",{className:"text-center mb-8",children:(0,ba.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CaseQuest"})}),(0,ba.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),d("");try{if(n)await function(e,t,n){return El(e.app)?Promise.reject(pu(e)):sd(uo(e),Hh.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ad(e),t})}(vk,s,o);else{const e=await async function(e,t,n){if(El(e.app))return Promise.reject(pu(e));const r=wh(e),i=Nh(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xh,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ad(e),t}),a=await Jh._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(vk,s,o);await dk(wS(wk,"users",e.user.uid),{total_xp:0,current_streak:0,longest_streak:0,current_level:1,last_active_date:null,completed_lessons:[],skill_level:"beginner",caseCoins:0,inventory:{},email:e.user.email,hasSeenOnboarding:!1})}t()}catch(h){d(h.message)}finally{u(!1)}},className:"space-y-4",children:[(0,ba.jsx)("input",{type:"email",placeholder:"Email",value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 border rounded-lg",required:!0}),(0,ba.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border rounded-lg",required:!0}),h&&(0,ba.jsx)("div",{className:"text-red-600 text-sm text-center",children:h}),(0,ba.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 rounded-lg",children:c?"Loading...":n?"Sign In":"Sign Up"})]}),(0,ba.jsx)("button",{onClick:()=>i(!n),className:"text-blue-600 mt-6",children:n?"Don't have an account? Sign up":"Already have an account? Sign in"})]})})},GE=e=>{var t;let{currentPage:n,setCurrentPage:i,user:s,onLogout:a}=e;const[o,l]=(0,r.useState)(!1),c=[{id:"dashboard",label:"Home",icon:la,desc:"Your main hub"},{id:"learning",label:"Learn",icon:ca,desc:"Structured lessons"},{id:"ai-interview",label:"AI Interview",icon:ua,desc:"Practice with AI"},{id:"cases",label:"Cases",icon:ha,desc:"Practice cases"},{id:"progress",label:"Progress",icon:da,desc:"Track growth"},{id:"store",label:"Shop",icon:fa,desc:"Spend coins"}];return(0,ba.jsxs)(ba.Fragment,{children:[(0,ba.jsx)("button",{onClick:()=>l(!o),className:"lg:hidden fixed top-4 left-4 z-50",children:o?(0,ba.jsx)(pa,{}):(0,ba.jsx)(ma,{})}),(0,ba.jsx)("div",{className:`fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform`,children:(0,ba.jsxs)("div",{className:"flex flex-col h-full",children:[(0,ba.jsx)("div",{className:"p-6 border-b",children:(0,ba.jsx)("h1",{className:"text-xl font-bold",children:"CaseQuest"})}),(0,ba.jsx)("nav",{className:"flex-1 p-4",children:(0,ba.jsx)("ul",{children:c.map(e=>(0,ba.jsx)("li",{children:(0,ba.jsxs)("button",{onClick:()=>{i(e.id),l(!1)},className:"w-full flex items-center p-3 rounded-lg mb-1 transition-colors "+(n===e.id?"bg-blue-50 text-blue-600":"hover:bg-gray-50"),children:[(0,ba.jsx)(e.icon,{className:"h-5 w-5 mr-3 flex-shrink-0"}),(0,ba.jsxs)("div",{className:"text-left",children:[(0,ba.jsx)("div",{className:"font-medium",children:e.label}),(0,ba.jsx)("div",{className:"text-xs text-gray-500",children:e.desc})]})]})},e.id))})}),(0,ba.jsxs)("div",{className:"p-4 border-t",children:[(0,ba.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,ba.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,ba.jsx)(ga,{className:"w-4 h-4 text-blue-600"})}),(0,ba.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ba.jsx)("p",{className:"font-medium text-gray-900 truncate",children:(null===s||void 0===s||null===(t=s.email)||void 0===t?void 0:t.split("@")[0])||"User"}),(0,ba.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,ba.jsx)(ya,{className:"w-3 h-3"}),(0,ba.jsxs)("span",{children:[(null===s||void 0===s?void 0:s.current_streak)||0," day streak"]})]})]})]}),(0,ba.jsx)("button",{onClick:a,className:"w-full text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Sign Out"})]})]})}),o&&(0,ba.jsx)("div",{onClick:()=>l(!1),className:"lg:hidden fixed inset-0 bg-black opacity-50 z-30"})]})},QE=e=>{let{currentPage:t,onBack:n}=e;return"dashboard"===t?null:(0,ba.jsxs)(Js.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:n,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 transition-colors",children:[(0,ba.jsx)(va,{className:"w-4 h-4"}),(0,ba.jsx)("span",{children:"Back"})]})},YE=e=>{let{user:t,lessons:n,onStartLesson:r}=e;return(0,ba.jsxs)("div",{children:[(0,ba.jsxs)("div",{className:"mb-8",children:[(0,ba.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Guided Mastery Path"}),(0,ba.jsx)("p",{className:"text-gray-600",children:"Complete lessons in order to unlock new challenges and skills."})]}),(0,ba.jsx)(fE,{lessons:n,userProgress:t,onStartLesson:r})]})},XE=e=>{let{onStartInterview:t}=e;return(0,ba.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,ba.jsxs)("div",{className:"mb-8",children:[(0,ba.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Case Interview Practice"}),(0,ba.jsx)("p",{className:"text-gray-600 mb-4",children:"Practice with our AI interviewer. Get real-time feedback on your approach."}),(0,ba.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,ba.jsxs)("p",{className:"text-sm text-gray-700",children:["\ud83d\udca1 ",(0,ba.jsx)("strong",{children:"How it works:"})," Choose a case type, then speak or type your answers. The AI will guide you through the case and provide feedback on your problem-solving approach."]})})]}),(0,ba.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"market-sizing",name:"Market Sizing",description:"Estimate market size and potential",beginner:"Great for beginners! Learn to estimate numbers logically.",difficulty:"Beginner Friendly"},{id:"profitability",name:"Profitability",description:"Analyze profit drivers and optimization",beginner:"Understand how businesses make money.",difficulty:"Intermediate"},{id:"market-entry",name:"Market Entry",description:"Strategic market entry decisions",beginner:"Learn how companies decide to enter new markets.",difficulty:"Intermediate"},{id:"operations",name:"Operations",description:"Operational efficiency and process improvement",beginner:"Improve business processes and efficiency.",difficulty:"Advanced"}].map(e=>(0,ba.jsxs)(Js.div,{whileHover:{scale:1.02},className:"bg-white rounded-lg shadow-sm border p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(e.id),children:[(0,ba.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ba.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,ba.jsx)(ua,{className:"w-6 h-6 text-blue-600"})}),(0,ba.jsx)("span",{className:"text-xs font-medium px-2 py-1 bg-gray-100 rounded-full",children:e.difficulty})]}),(0,ba.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,ba.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.beginner}),(0,ba.jsxs)("div",{className:"flex items-center text-blue-600 text-sm",children:[(0,ba.jsx)(wa,{className:"w-4 h-4 mr-2"}),(0,ba.jsx)("span",{children:"Voice & Text Enabled"})]})]},e.id))})]})},JE=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)("dashboard"),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),[w,b]=(0,r.useState)({}),[x,S]=(0,r.useState)([]),[k,E]=(0,r.useState)([]),[_,T]=(0,r.useState)(null),[C,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{await xk.initialize(),e&&b({enhancedOnboarding:xk.isEnhancedOnboardingEnabled(e.uid),nextBestAction:xk.isNextBestActionEnabled(e.uid),sessionSummary:xk.isSessionSummaryEnabled(e.uid)})})()},[]),(0,r.useEffect)(()=>{const e=function(e,t,n,r){return uo(e).onAuthStateChanged(t,n,r)}(vk,async e=>{if(e){t(e),b({enhancedOnboarding:xk.isEnhancedOnboardingEnabled(e.uid),nextBestAction:xk.isNextBestActionEnabled(e.uid),sessionSummary:xk.isSessionSummaryEnabled(e.uid)}),tE.setFeatureFlagState("enhanced_onboarding",xk.isEnhancedOnboardingEnabled(e.uid)),tE.setFeatureFlagState("next_best_action",xk.isNextBestActionEnabled(e.uid)),tE.setFeatureFlagState("session_summary",xk.isSessionSummaryEnabled(e.uid)),tE.setExperimentVariant("endowed_progress",`${xk.getEndowedProgressPercent()}pct`),tE.setExperimentVariant("next_action_policy",xk.getNextActionPolicy());try{const t=await ck(wS(wk,"users",e.uid));if(t.exists()){const n={...t.data(),uid:e.uid};if(i(n),n.lastActiveAt){const e=(Date.now()-n.lastActiveAt)/864e5;e>=1&&tE.trackDailyReturn(Math.floor(e))}n.hasSeenOnboarding||n.hasCompletedOnboarding||(w.enhancedOnboarding?p(!0):u(!0))}else{await dk(wS(wk,"users",e.uid),{total_xp:0,current_streak:0,longest_streak:0,current_level:1,last_active_date:null,lastActiveAt:Date.now(),completed_lessons:[],skill_level:"beginner",caseCoins:0,inventory:{},email:e.email,hasSeenOnboarding:!1,hasCompletedOnboarding:!1});const t=await ck(wS(wk,"users",e.uid));i({...t.data(),uid:e.uid}),u(!0)}const n=await hk(vS(wk,"lessons"));S(n.docs.map(e=>({...e.data(),id:e.id})));const r=await hk(vS(wk,"cases"));E(r.docs.map(e=>({...e.data(),id:e.id})))}catch(n){console.error("Error fetching data:",n)}}else t(null),i(null);a(!1)});return()=>e()},[]);const N=()=>{},A=e=>{T(e)},P=async e=>{if(!n||n.caseCoins<e.cost)return void console.log("Cannot purchase item");const t=wS(wk,"users",vk.currentUser.uid);try{const r=n.caseCoins-e.cost,s={...n.inventory};s[e.itemId]=(s[e.itemId]||0)+1,await fk(t,{caseCoins:gk(-e.cost),inventory:s}),i(e=>({...e,caseCoins:r,inventory:s})),alert(`${e.name} purchased successfully!`)}catch(r){console.error("Error purchasing item:",r),alert("Failed to purchase item.")}},R=async e=>{if(!n||!_)return;const t=wS(wk,"users",vk.currentUser.uid),r=new Date;r.setHours(0,0,0,0);const s=r.toISOString().split("T")[0],a=new Date;a.setDate(a.getDate()-1),a.setHours(0,0,0,0);const o=a.toISOString().split("T")[0];let{last_active_date:l,current_streak:c=0,longest_streak:u=0,inventory:h={}}=n,f=c;const p={completed_lessons:[...new Set([...n.completed_lessons||[],_.id])],total_xp:gk(e),caseCoins:gk(5),last_active_date:s};let m=!1;l!==s&&(l===o?f=c+1:h.streak_freeze&&h.streak_freeze>0?(p["inventory.streak_freeze"]=gk(-1),m=!0):f=1),p.current_streak=f,p.longest_streak=Math.max(f,u);try{await fk(t,p);const r=(n.total_xp||0)+e,s={...h};m&&(s.streak_freeze=(s.streak_freeze||1)-1),i(e=>({...e,...p,total_xp:r,caseCoins:e.caseCoins+5,current_level:Math.floor(r/100)+1,inventory:s,current_streak:f,longest_streak:p.longest_streak})),d(!0),setTimeout(()=>d(!1),2500),T(null)}catch(g){console.error("Error completing lesson:",g)}};return s?(0,ba.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?C?(0,ba.jsx)(sa,{mode:"wait",children:(0,ba.jsx)(Js.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:(0,ba.jsx)(OE,{caseType:C,onComplete:()=>I(null)})},"ai-interview")}):_?(0,ba.jsx)(sa,{mode:"wait",children:(0,ba.jsx)(Js.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:(0,ba.jsx)(gE,{lesson:_,onComplete:R,onBack:()=>T(null)})},"lesson-screen")}):(0,ba.jsx)(WE.Provider,{value:{user:n,updateUser:e=>i(e)},children:(0,ba.jsxs)("div",{className:"min-h-screen gradient-bg",children:[c&&(0,ba.jsx)(FE,{onComplete:async()=>{if(u(!1),e)try{await fk(wS(wk,"users",e.uid),{hasSeenOnboarding:!0})}catch(t){console.error("Error updating onboarding status:",t)}}}),h&&(0,ba.jsx)(mE,{}),(0,ba.jsx)(qE,{}),(0,ba.jsx)(zE,{}),(0,ba.jsxs)("div",{className:"flex",children:[(0,ba.jsx)(GE,{currentPage:o,setCurrentPage:l,user:n,onLogout:async()=>{await function(e){return uo(e).signOut()}(vk),l("dashboard"),T(null),I(null)}}),(0,ba.jsxs)("main",{className:"flex-1 p-8",children:["dashboard"!==o&&(0,ba.jsx)(vE,{user:n}),(0,ba.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ba.jsx)(QE,{currentPage:o,onBack:()=>{l("dashboard"),T(null),I(null)}}),(0,ba.jsx)(sa,{mode:"wait",children:(0,ba.jsx)(Js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(()=>{switch(o){case"dashboard":default:return(0,ba.jsx)(uE,{user:n,onNavigate:l,featureFlags:w});case"learning":return(0,ba.jsx)(YE,{user:n,lessons:x,onStartLesson:A});case"ai-interview":return(0,ba.jsx)(XE,{onStartInterview:I});case"cases":return(0,ba.jsx)(RE,{cases:k,onNavigate:l});case"progress":case"leaderboard":return(0,ba.jsx)(IE,{user:n,lessons:x});case"store":return(0,ba.jsx)(xE,{user:n,onPurchase:P})}})()},o)})]})]})]}),f&&(0,ba.jsx)(VE,{onComplete:async t=>{try{const n=`${(new Date).getFullYear()}-W${Math.ceil((new Date).getDate()/7)}`;await fk(wS(wk,"users",e.uid),{...t,lastActiveAt:Date.now(),cohortWeek:n,hasCompletedOnboarding:!0}),i(e=>({...e,...t,hasCompletedOnboarding:!0})),p(!1),tE.setUserCohort(n),tE.setOnboardingComplete(!0),tE.trackFirstLessonStart()}catch(n){console.error("Error completing enhanced onboarding:",n)}}}),m&&(0,ba.jsx)(UE,{sessionData:y,onContinue:()=>{g(!1),tE.trackNextActionTaken("continue_from_summary")},onClose:()=>{g(!1),tE.trackNextActionTaken("close_summary")}})]})}):(0,ba.jsx)(KE,{onLogin:N})};i.createRoot(document.getElementById("root")).render((0,ba.jsx)(r.StrictMode,{children:(0,ba.jsx)(JE,{})}))})();
//# sourceMappingURL=main.0ea0322b.js.map
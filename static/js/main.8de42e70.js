/*! For license information please see main.8de42e70.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var s,i={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:o,ref:a,props:i,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+I(l,0):i,x(o)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),A(o,t,s,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",x(e))for(var c=0;c<e.length;c++){var u=i+I(a=e[c],c);l+=A(a,t,s,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,s,u=i+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],s=0;return A(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var i=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&s(c),b(n)}else s(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(x,h.startTime-n),l=!1}return l}finally{d=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,k=null,T=-1,C=5,I=-1;function A(){return!(t.unstable_now()-I<C)}function N(){if(null!==k){var e=t.unstable_now();I=e;var n=!0;try{n=k(!0,e)}finally{n?E():(S=!1,k=null)}}else S=!1}if("function"===typeof w)E=function(){w(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,E=function(){R.postMessage(null)}}else E=function(){y(N,0)};function D(e){k=e,S||(S=!0,E())}function O(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(T),T=-1):g=!0,O(x,i-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Mh){var r=Mh}Reflect.construct(e,[],t)}else{try{t.call()}catch(Mh){r=Mh}e.call(t.prototype)}else{try{throw Error()}catch(Mh){r=Mh}e()}}catch(Mh){if(Mh&&r&&"string"===typeof Mh.stack){for(var s=Mh.stack.split("\n"),i=r.stack.split("\n"),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==i[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case k:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:$(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return $(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Zm){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,Se=null;function ke(e){if(e=ws(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=xs(t),_e(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ie(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Se)&&(Ae(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,je=null,Fe=!1,Ve=null,Ue={onError:function(e){Me=!0,je=e}};function Be(e,t,n,r,s,i,o,a,l){Me=!1,je=null,Le.apply(Ue,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if($e(e)!==e)throw Error(i(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(r=s.return)){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return qe(s),e;if(o===r)return qe(s),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Ye=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?r=ht(a):0!==(i&=o)&&(r=ht(i))}else 0!==(o=n&~s)?r=ht(o):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ot(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,Et,St,kt,Tt=!1,Ct=[],It=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=ws(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function jt(e){var t=vs(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void kt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ws(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Pt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ut)))}function $t(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)jt(n),null===n.blockedOn&&Dt.shift()}var zt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=wt,i=zt.transition;zt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=s,zt.transition=i}}function Wt(e,t,n,r){var s=wt,i=zt.transition;zt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=s,zt.transition=i}}function Kt(e,t,n,r){if(qt){var s=Qt(e,t,n,r);if(null===s)qr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return It=Mt(It,e,t,n,r,s),!0;case"dragenter":return At=Mt(At,e,t,n,r,s),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pt.set(i,Mt(Pt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rt.set(i,Mt(Rt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==s;){var i=ws(s);if(null!==i&&xt(i),null===(i=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vs(e=xe(r))))if(null===(t=$e(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,s="value"in Yt?Yt.value:Yt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=j({},cn,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(j({},fn,{dataTransfer:0})),gn=sn(j({},hn,{relatedTarget:0})),yn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(j({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function kn(){return Sn}var Tn=j({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Tn),In=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,jn=u&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Vn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(bs(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,xe(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ir(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var o=ur(n,r);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Sr={};function kr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=kr("animationend"),Cr=kr("animationiteration"),Ir=kr("animationstart"),Ar=kr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(i(198));var u=je;Me=!1,je=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;jr(s,a,c),i=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;jr(s,a,c),i=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[Br]){e[Br]=!0,o.forEach(function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Xt(t)){case 1:var s=Ht;break;case 4:s=Wt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=vs(a)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=i,s=xe(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Cr:case Ir:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Hr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,s),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(h=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bs(l),f=null==c?a:bs(c),(a=new u(m,p+"leave",l,n,s)).target=h,a.relatedTarget=f,m=null,vs(s)===r&&((u=new u(d,p+"enter",c,n,s)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?bs(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(qn(a))if(Yn)g=or;else{g=sr;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(o,g,n,s):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bs(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,s)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else $n?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(jn&&"ko"!==n.locale&&($n||"onCompositionStart"!==w?"onCompositionEnd"===w&&$n&&(v=en()):(Jt="value"in(Yt=s)?Yt.value:Yt.textContent,$n=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,s),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Jt=Yt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:r}),s.data=v))}Fr(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Re(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Re(n,i))&&o.unshift(Hr(n,l,a)):s||null!=(l=Re(n,i))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);$t(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,fs="__reactProps$"+hs,ps="__reactContainer$"+hs,ms="__reactEvents$"+hs,gs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function vs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function ws(e){return!(e=e[ds]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xs(e){return e[fs]||null}var _s=[],Es=-1;function Ss(e){return{current:e}}function ks(e){0>Es||(e.current=_s[Es],_s[Es]=null,Es--)}function Ts(e,t){Es++,_s[Es]=e.current,e.current=t}var Cs={},Is=Ss(Cs),As=Ss(!1),Ns=Cs;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Cs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){ks(As),ks(Is)}function Os(e,t,n){if(Is.current!==Cs)throw Error(i(168));Ts(Is,t),Ts(As,n)}function Ls(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,z(e)||"Unknown",s));return j({},n,r)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Ns=Is.current,Ts(Is,e),Ts(As,As.current),!0}function js(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ls(e,t,Ns),r.__reactInternalMemoizedMergedChildContext=e,ks(As),ks(Is),Ts(Is,e)):ks(As),Ts(As,n)}var Fs=null,Vs=!1,Us=!1;function Bs(e){null===Fs?Fs=[e]:Fs.push(e)}function $s(){if(!Us&&null!==Fs){Us=!0;var e=0,t=wt;try{var n=Fs;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Vs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ke(Ze,$s),s}finally{wt=t,Us=!1}}return null}var zs=[],qs=0,Hs=null,Ws=0,Ks=[],Gs=0,Qs=null,Xs=1,Ys="";function Js(e,t){zs[qs++]=Ws,zs[qs++]=Hs,Hs=e,Ws=t}function Zs(e,t,n){Ks[Gs++]=Xs,Ks[Gs++]=Ys,Ks[Gs++]=Qs,Qs=e;var r=Xs;e=Ys;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xs=1<<32-ot(t)+s|n<<s|r,Ys=i+e}else Xs=1<<i|n<<s|r,Ys=e}function ei(e){null!==e.return&&(Js(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=zs[--qs],zs[qs]=null,Ws=zs[--qs],zs[qs]=null;for(;e===Qs;)Qs=Ks[--Gs],Ks[Gs]=null,Ys=Ks[--Gs],Ks[Gs]=null,Xs=Ks[--Gs],Ks[Gs]=null}var ni=null,ri=null,si=!1,ii=null;function oi(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Xs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!ai(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&ai(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw di(),Error(i(418));for(;t;)oi(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?c(e,t,n,r):null;case _:return n.key===s?u(e,t,n,r):null;case R:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||L(n))return null!==s?null:h(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case R:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,a,l){for(var c=null,u=null,h=i,m=i=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(s,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(s,h),i=o(y,i,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(s,h),si&&Js(s,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(s,a[m],l))&&(i=o(h,i,m),null===u?c=h:u.sibling=h,u=h);return si&&Js(s,m),c}for(h=r(s,h);m<a.length;m++)null!==(g=p(h,s,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),i=o(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(s,e)}),si&&Js(s,m),c}function g(s,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(s,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(s,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(s,m),si&&Js(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(s,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return si&&Js(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Js(s,g),u}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=i;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,o.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vi(c)===u.type){n(r,u.sibling),(i=s(u,o.props)).ref=gi(r,u,o),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((i=Lc(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=gi(r,i,o),l.return=r,r=l)}return a(r);case _:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=s(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fc(o,r.mode,l)).return=r,r=i}return a(r);case R:return e(r,i,(u=o._init)(o._payload),l)}if(te(o))return m(r,i,o,l);if(L(o))return g(r,i,o,l);yi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,o)).return=r,r=i):(n(r,i),(i=jc(o,r.mode,l)).return=r,r=i),a(r)):n(r,i)}}var bi=wi(!0),xi=wi(!1),_i=Ss(null),Ei=null,Si=null,ki=null;function Ti(){ki=Si=Ei=null}function Ci(e){var t=_i.current;ks(_i),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){Ei=e,ki=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ni(e){var t=e._currentValue;if(ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===Ei)throw Error(i(308));Si=e,Ei.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Pi=null;function Ri(e){null===Pi?Pi=[e]:Pi.push(e)}function Di(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Ri(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Li=!1;function Mi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ji(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Oi(e,n)}return null===(s=r.interleaved)?(t.next=t,Ri(r)):(t.next=s.next,s.next=t),r.interleaved=t,Oi(e,n)}function Ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $i(e,t,n,r){var s=e.updateQueue;Li=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(o=0,u=c=l=null,a=i;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Li=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function zi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var qi={},Hi=Ss(qi),Wi=Ss(qi),Ki=Ss(qi);function Gi(e){if(e===qi)throw Error(i(174));return e}function Qi(e,t){switch(Ts(Ki,t),Ts(Wi,e),Ts(Hi,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ks(Hi),Ts(Hi,t)}function Xi(){ks(Hi),ks(Wi),ks(Ki)}function Yi(e){Gi(Ki.current);var t=Gi(Hi.current),n=le(t,e.type);t!==n&&(Ts(Wi,e),Ts(Hi,n))}function Ji(e){Wi.current===e&&(ks(Hi),ks(Wi))}var Zi=Ss(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,io=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(i(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,s,o){if(io=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,s),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(i(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,s)}while(uo)}if(ro.current=Jo,t=null!==ao&&null!==ao.next,io=0,lo=ao=oo=null,co=!1,t)throw Error(i(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ao,s=r.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(null!==s){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((io&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{o=s.lane,oo.lanes|=o,Ml|=o,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function So(e,t){var n=oo,r=wo(),s=t(),o=!ar(r.memoizedState,s);if(o&&(r.memoizedState=s,wa=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,r,s,t),void 0,null),null===Al)throw Error(i(349));0!==(30&io)||ko(n,t,s)}return s}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Ao(e)}function Co(e,t,n){return n(function(){Io(t)&&Ao(e)})}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Oi(e,1);null!==t&&nc(t,e,1,-1)}function No(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Do(e,t,n,r){var s=vo();oo.flags|=e,s.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var s=wo();r=void 0===r?null:r;var i=void 0;if(null!==ao){var o=ao.memoizedState;if(i=o.destroy,null!==r&&mo(r,o.deps))return void(s.memoizedState=Po(t,n,i,r))}oo.flags|=e,s.memoizedState=Po(1|t,n,i,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function jo(e,t){return Oo(4,2,e,t)}function Fo(e,t){return Oo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Vo.bind(null,t,e),n)}function Bo(){}function $o(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&io)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ho(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{wt=n,so.transition=r}}function Wo(){return wo().memoizedState}function Ko(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))Xo(t,n);else if(null!==(n=Di(e,t,n,r))){nc(n,e,r,ec()),Yo(n,t,r)}}function Go(e,t,n){var r=tc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Xo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(s.next=s,Ri(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Mh){}null!==(n=Di(e,t,s,r))&&(nc(n,e,r,s=ec()),Yo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Jo={readContext:Ni,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ni,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ni,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:No,useDebugValue:Bo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Ho.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,s=vo();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&io)||ko(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Al.identifierPrefix;if(si){var n=Ys;t=":"+t+"R"+(n=(Xs&~(1<<32-ot(Xs)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ni,useCallback:$o,useContext:Ni,useEffect:Mo,useImperativeHandle:Uo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:zo,useReducer:xo,useRef:Ro,useState:function(){return xo(bo)},useDebugValue:Bo,useDeferredValue:function(e){return qo(wo(),ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:Ni,useCallback:$o,useContext:Ni,useEffect:Mo,useImperativeHandle:Uo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:zo,useReducer:_o,useRef:Ro,useState:function(){return _o(bo)},useDebugValue:Bo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:qo(t,ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),s=tc(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Vi(e,i,s))&&(nc(t,e,s,r),Ui(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Vi(e,s,r))&&(nc(t,e,r,n),Ui(t,e,r))}};function ia(e,t,n,r,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function oa(e,t,n){var r=!1,s=Cs,i=t.contextType;return"object"===typeof i&&null!==i?i=Ni(i):(s=Rs(t)?Ns:Is.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ps(e,s):Cs),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Mi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ni(i):(i=Rs(t)?Ns:Is.current,s.context=Ps(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ra(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sa.enqueueReplaceState(s,s.state,null),$i(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ha(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Vi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?xi(t,null,n,r):bi(t,e.child,n,r)}function xa(e,t,n,r,s){n=n.render;var i=t.ref;return Ai(t,s),r=go(e,t,n,r,i,s),n=yo(),null===e||wa?(si&&n&&ei(t),t.flags|=1,ba(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qa(e,t,s))}function _a(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ea(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return qa(e,t,s)}return t.flags|=1,(e=Dc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,qa(e,t,s);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,s)}function Sa(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ts(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ts(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ts(Dl,Rl),Rl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ts(Dl,Rl),Rl|=r;return ba(e,t,s,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,s){var i=Rs(n)?Ns:Is.current;return i=Ps(t,i),Ai(t,s),n=go(e,t,n,r,i,s),r=yo(),null===e||wa?(si&&r&&ei(t),t.flags|=1,ba(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,qa(e,t,s))}function Ca(e,t,n,r,s){if(Rs(n)){var i=!0;Ms(t)}else i=!1;if(Ai(t,s),null===t.stateNode)za(e,t),oa(t,n,r),la(t,n,r,s),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ni(c):c=Ps(t,c=Rs(n)?Ns:Is.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Li=!1;var d=t.memoizedState;o.state=d,$i(t,r,o,s),l=t.memoizedState,a!==r||d!==l||As.current||Li?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Li||ia(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ji(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ni(l):l=Ps(t,l=Rs(n)?Ns:Is.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Li=!1,d=t.memoizedState,o.state=d,$i(t,r,o,s);var p=t.memoizedState;a!==h||d!==p||As.current||Li?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Li||ia(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,i,s)}function Ia(e,t,n,r,s,i){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return s&&js(t,n,!1),qa(e,t,i);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,a,i)):ba(e,t,a,i),t.memoizedState=r.state,s&&js(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Qi(e,t.containerInfo)}function Na(e,t,n,r,s){return fi(),pi(s),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Ra,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var r,s=t.pendingProps,o=Zi.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ts(Zi,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,s,0,null),e=Lc(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,s,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ua(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Mc({mode:"visible",children:r.children},s,0,null),(o=Lc(o,s,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ua(o=Error(i(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Al)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Oi(e,s),nc(r,e,s,-1))}return mc(),Va(e,t,a,r=ua(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ks[Gs++]=Xs,Ks[Gs++]=Ys,Ks[Gs++]=Qs,Xs=e.id,Ys=e.overflow,Qs=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,o,n);if(a){a=s.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,s}return e=(a=e.child).sibling,s=Dc(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&pi(r),bi(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function Ba(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function $a(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zi.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ts(Zi,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ba(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ba(t,!0,n,null,i);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function za(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ka(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Rs(t.type)&&Ds(),Wa(t),null;case 3:return r=t.stateNode,Xi(),ks(As),ks(Is),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(oc(ii),ii=null))),Ra(e,t),Wa(t),null;case 5:Ji(t);var s=Gi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Wa(t),null}if(e=Gi(Hi.current),hi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ds]=t,r[fs]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(s=0;s<Lr.length;s++)Vr(Lr[s],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":se(r,o),Vr("invalid",r)}for(var l in ve(n,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ds]=t,e[fs]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),s=r;break;case"iframe":case"object":case"embed":Vr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Lr.length;s++)Vr(Lr[s],e);s=r;break;case"source":Vr("error",e),s=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),s=r;break;case"details":Vr("toggle",e),s=r;break;case"input":X(e,r),s=Q(e,r),Vr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=j({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Vr("invalid",e)}for(o in ve(n,s),c=s)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Gi(Ki.current),Gi(Hi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Wa(t),null;case 13:if(ks(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),fi(),t.flags|=98560,o=!1;else if(o=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ds]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zi.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Xi(),Ra(e,t),null===e&&$r(t.stateNode.containerInfo),Wa(t),null;case 10:return Ci(t.type._context),Wa(t),null;case 19:if(ks(Zi),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ts(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>$l&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!si)return Wa(t),null}else 2*Ye()-o.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=Zi.current,Ts(Zi,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ga(e,t){switch(ti(t),t.tag){case 1:return Rs(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xi(),ks(As),ks(Is),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(ks(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ks(Zi),null;case 4:return Xi(),null;case 10:return Ci(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Gi(Hi.current);var i,o=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),o=[];break;case"select":s=j({},s,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":s=re(e,s),r=re(e,r),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qa=!1,Xa=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&el(t,n,i)}s=s.next}while(s!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,t);case 6:var r=ul,s=hl;ul=null,dl(e,t,n),hl=s,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),$t(e)):ls(ul,n.stateNode));break;case 4:r=ul,s=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=s;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&el(n,t,o),s=s.next}while(s!==r)}dl(e,t,n);break;case 1:if(!Xa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,dl(e,t,n),Xa=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(o,a,s),ul=null,hl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Mh){Sc(s,t,Mh)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(s,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):w(s,h,d,u)}switch(l){case"input":J(s,o);break;case"textarea":ie(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(s,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(s,!!o.multiple,o.defaultValue,!0):ne(s,!!o.multiple,o.multiple?[]:"",!1))}s[fs]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Ye())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,ml(t,e),Xa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Ja=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),cl(e,al(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(i(161))}}catch(Rh){Sc(e,e.return,Rh)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ja=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var s=Ja,i=s.child;if(22===s.tag&&r){var o=null!==s.memoizedState||Qa;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Qa;var c=Xa;if(Qa=o,(Xa=l)&&!c)for(Ja=s;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?_l(s):null!==l?(l.return=o,Ja=l):_l(s);for(;null!==i;)Ja=i,wl(i,t,n),i=i.sibling;Ja=s,Qa=a,Xa=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Ja=i):bl(e)}}function bl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&zi(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&$t(d)}}}break;default:throw Error(i(163))}Xa||512&t.flags&&sl(t)}catch(Hh){Sc(t,t.return,Hh)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function _l(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(Rh){Sc(t,n,Rh)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Rh){Sc(t,s,Rh)}}var i=t.return;try{sl(t)}catch(Rh){Sc(t,i,Rh)}break;case 5:var o=t.return;try{sl(t)}catch(Rh){Sc(t,o,Rh)}}}catch(Rh){Sc(t,t.return,Rh)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var El,Sl=Math.ceil,kl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Il=0,Al=null,Nl=null,Pl=0,Rl=0,Dl=Ss(0),Ol=0,Ll=null,Ml=0,jl=0,Fl=0,Vl=null,Ul=null,Bl=0,$l=1/0,zl=null,ql=!1,Hl=null,Wl=null,Kl=!1,Gl=null,Ql=0,Xl=0,Yl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Ye():-1!==Jl?Jl:Jl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Pl?Pl&-Pl:null!==mi.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Yl=null,Error(i(185));yt(e,n,r),0!==(2&Il)&&e===Al||(e===Al&&(0===(2&Il)&&(jl|=n),4===Ol&&ac(e,Pl)),rc(e,r),1===n&&0===Il&&0===(1&t.mode)&&($l=Ye()+500,Vs&&$s()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&r)||(s[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=dt(e,e===Al?Pl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Vs=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),os(function(){0===(6&Il)&&$s()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(i(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var s=Il;Il|=2;var o=pc();for(Al===e&&Pl===t||(zl=null,$l=Ye()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ti(),kl.current=o,Il=s,null!==Nl?t=0:(Al=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ic(e,s))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Ye()),n;if(6===t)ac(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Ul,zl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Ye())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(xc.bind(null,e,Ul,zl),t);break}xc(e,Ul,zl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>s&&(s=a),r&=~o}if(r=s,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=rs(xc.bind(null,e,Ul,zl),r);break}xc(e,Ul,zl);break;default:throw Error(i(329))}}}return rc(e,Ye()),e.callbackNode===n?sc.bind(null,e):null}function ic(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&oc(t)),e}function oc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Il))throw Error(i(327));_c();var t=dt(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,zl),rc(e,Ye()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&($l=Ye()+500,Vs&&$s())}}function uc(e){null!==Gl&&0===Gl.tag&&0===(6&Il)&&_c();var t=Il;Il|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Il=t))&&$s()}}function hc(){Rl=Dl.current,ks(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Xi(),ks(As),ks(Is),no();break;case 5:Ji(r);break;case 4:Xi();break;case 13:case 19:ks(Zi);break;case 10:Ci(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Nl=e=Dc(e.current,null),Pl=Rl=t,Ol=0,Ll=null,Fl=jl=Ml=0,Ul=Vl=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=s,r.next=o}n.pending=r}Pi=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Ti(),ro.current=Jo,co){for(var r=oo.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}co=!1}if(io=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Ol=1,Ll=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),pi(ca(c,l));break e}}o=c=ca(c,l),4!==Ol&&(Ol=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bi(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Bi(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(Qh){t=Qh,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=Jo,null===e?Jo:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Al||0===(268435455&Ml)&&0===(268435455&jl)||ac(Al,Pl)}function gc(e,t){var n=Il;Il|=2;var r=pc();for(Al===e&&Pl===t||(zl=null,dc(e,t));;)try{yc();break}catch(s){fc(e,s)}if(Ti(),Il=n,kl.current=r,null!==Nl)throw Error(i(261));return Al=null,Pl=0,Ol}function yc(){for(;null!==Nl;)wc(Nl)}function vc(){for(;null!==Nl&&!Qe();)wc(Nl)}function wc(e){var t=El(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Rl)))return void(Nl=n)}else{if(null!==(n=Ga(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ol=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ol&&(Ol=5)}function xc(e,t,n){var r=wt,s=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{_c()}while(null!==Gl);if(0!==(6&Il))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,o),e===Al&&(Nl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ac(tt,function(){return _c(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(es=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(wf){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(l=a+s),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===s&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(wf){Sc(t,t.return,wf)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ts),qt=!!es,ts=es=null,e.current=n,vl(n,e,s),Xe(),Il=l,wt=a,Cl.transition=o}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=s),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Yl?Xl++:(Xl=0,Yl=e):Xl=0,$s()}(e,t,n,r)}finally{Cl.transition=s,wt=r}return null}function _c(){if(null!==Gl){var e=bt(Ql),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Il))throw Error(i(331));var s=Il;for(Il|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(il(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break e}Ja=o.return}}var w=e.current;for(Ja=w;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=w;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(Qh){Sc(l,l.return,Qh)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Il=s,$s(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(Qh){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Ec(e,t,n){e=Vi(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Vi(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Ye()-Bl?dc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Oi(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,s,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,s,o,t);case S:a=8,s|=8;break;case k:return(e=Pc(12,n,t,2|s)).elementType=k,e.lanes=o,e;case A:return(e=Pc(13,n,t,s)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,s)).elementType=N,e.lanes=o,e;case D:return Mc(n,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case I:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,s)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,s,i,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mi(i),e}function Bc(e){if(!e)return Cs;e:{if($e(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Ls(e,n,t)}return t}function $c(e,t,n,r,s,i,o,a,l){return(e=Uc(n,r,!0,e,0,i,0,a,l)).context=Bc(null),n=e.current,(i=Fi(r=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Vi(n,i,s),e.current.lanes=s,yt(e,s,r),rc(e,r),e}function zc(e,t,n,r){var s=t.current,i=ec(),o=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vi(s,t,o))&&(nc(e,s,o,i),Ui(e,s,o)),o}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||As.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fi();break;case 5:Yi(t);break;case 1:Rs(t.type)&&Ms(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ts(_i,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ts(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Ts(Zi,1&Zi.current),null!==(e=qa(e,t,n))?e.sibling:null);Ts(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $a(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ts(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return qa(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;za(e,t),e=t.pendingProps;var s=Ps(t,Is.current);Ai(t,n),s=go(null,t,r,e,s,n);var o=yo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(o=!0,Ms(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Mi(t),s.updater=sa,t.stateNode=s,s._reactInternals=t,la(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,si&&o&&ei(t),ba(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(za(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),s){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=_a(null,t,r,na(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Ta(e,t,r,s=t.elementType===r?s:na(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ca(e,t,r,s=t.elementType===r?s:na(r,s),n);case 3:e:{if(Aa(t),null===e)throw Error(i(387));r=t.pendingProps,s=(o=t.memoizedState).element,ji(e,t),$i(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,s=ca(Error(i(423)),t));break e}if(r!==s){t=Na(e,t,r,n,s=ca(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=qa(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==o&&ns(r,o)&&(t.flags|=32),ka(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&ci(t),null;case 13:return ja(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,xa(e,t,r,s=t.elementType===r?s:na(r,s),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ts(_i,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===s.children&&!As.current){t=qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fi(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ii(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ii(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ai(t,n),r=r(s=Ni(s)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return s=na(r=t.type,t.pendingProps),_a(e,t,r,s=na(r.type,s),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:na(r,s),za(e,t),t.tag=1,Rs(r)?(e=!0,Ms(t)):e=!1,Ai(t,n),oa(t,r,s),la(t,r,s,n),Ia(null,t,r,!0,e,n);case 19:return $a(e,t,n);case 22:return Sa(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof s){var a=s;s=function(){var e=qc(o);a.call(e)}}zc(t,o,e,s)}else o=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=qc(o);i.call(e)}}var o=$c(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[ps]=o.current,$r(8===e.nodeType?e.parentNode:e),uc(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=qc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[ps]=l.current,$r(8===e.nodeType?e.parentNode:e),uc(function(){zc(t,l,n,r)}),l}(n,t,e,s,r);return qc(o)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zc(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){zc(null,e,null,null)}),t[ps]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&jt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&Il)&&($l=Ye()+500,$s()))}break;case 13:uc(function(){var t=Oi(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Oi(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},St=function(){return wt},kt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xs(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[ws,bs,xs,Te,Ce,cc]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(i(299));var n=!1,r="",s=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,$r(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,o="",a=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=$c(t,null,e,1,null!=n?n:null,s,0,o,a),e[ps]=t.current,$r(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),s=n(391);const i=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),o=(0,r.createContext)({}),a=(0,r.createContext)(null),l="undefined"!==typeof document,c=l?r.useLayoutEffect:r.useEffect,u=(0,r.createContext)({strict:!1}),h=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d="data-"+h("framerAppearId");function f(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function p(e){return"string"===typeof e||Array.isArray(e)}function m(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const g=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],y=["initial",...g];function v(e){return m(e.animate)||y.some(t=>p(e[t]))}function w(e){return Boolean(v(e)||e.variants)}function b(e){const{initial:t,animate:n}=function(e,t){if(v(e)){const{initial:t,animate:n}=e;return{initial:!1===t||p(t)?t:void 0,animate:p(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(o));return(0,r.useMemo)(()=>({initial:t,animate:n}),[x(t),x(n)])}function x(e){return Array.isArray(e)?e.join(" "):e}const _={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},E={};for(const XA in _)E[XA]={isEnabled:e=>_[XA].some(t=>!!e[t])};const S=(0,r.createContext)({}),k=(0,r.createContext)({}),T=Symbol.for("motionComponentSymbol");function C(e){let{preloadedFeatures:t,createVisualElement:n,useRender:s,useVisualState:h,Component:p}=e;t&&function(e){for(const t in e)E[t]={...E[t],...e[t]}}(t);const m=(0,r.forwardRef)(function(e,m){let g;const y={...(0,r.useContext)(i),...e,layoutId:I(e)},{isStatic:v}=y,w=b(e),x=h(e,v);if(!v&&l){w.visualElement=function(e,t,n,s){const{visualElement:l}=(0,r.useContext)(o),h=(0,r.useContext)(u),f=(0,r.useContext)(a),p=(0,r.useContext)(i).reducedMotion,m=(0,r.useRef)();s=s||h.renderer,!m.current&&s&&(m.current=s(e,{visualState:t,parent:l,props:n,presenceContext:f,blockInitialAnimation:!!f&&!1===f.initial,reducedMotionConfig:p}));const g=m.current;(0,r.useInsertionEffect)(()=>{g&&g.update(n,f)});const y=(0,r.useRef)(Boolean(n[d]&&!window.HandoffComplete));return c(()=>{g&&(g.render(),y.current&&g.animationState&&g.animationState.animateChanges())}),(0,r.useEffect)(()=>{g&&(g.updateFeatures(),!y.current&&g.animationState&&g.animationState.animateChanges(),y.current&&(y.current=!1,window.HandoffComplete=!0))}),g}(p,x,y,n);const e=(0,r.useContext)(k),s=(0,r.useContext)(u).strict;w.visualElement&&(g=w.visualElement.loadFeatures(y,s,t,e))}return r.createElement(o.Provider,{value:w},g&&w.visualElement?r.createElement(g,{visualElement:w.visualElement,...y}):null,s(p,e,function(e,t,n){return(0,r.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):f(n)&&(n.current=r))},[t])}(x,w.visualElement,m),x,v,w.visualElement))});return m[T]=p,m}function I(e){let{layoutId:t}=e;const n=(0,r.useContext)(S).id;return n&&void 0!==t?n+"-"+t:t}function A(e){function t(t){return C(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const N=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P(e){return"string"===typeof e&&!e.includes("-")&&!!(N.indexOf(e)>-1||/[A-Z]/.test(e))}const R={};const D=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],O=new Set(D);function L(e,t){let{layout:n,layoutId:r}=t;return O.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!R[e]||"opacity"===e)}const M=e=>Boolean(e&&e.getVelocity),j={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},F=D.length;const V=e=>t=>"string"===typeof t&&t.startsWith(e),U=V("--"),B=V("var(--"),$=(e,t)=>t&&"number"===typeof e?t.transform(e):e,z=(e,t,n)=>Math.min(Math.max(n,e),t),q={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},H={...q,transform:e=>z(0,1,e)},W={...q,default:1},K=e=>Math.round(1e5*e)/1e5,G=/(-)?([\d]*\.?[\d])+/g,Q=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,X=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Y(e){return"string"===typeof e}const J=e=>({test:t=>Y(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Z=J("deg"),ee=J("%"),te=J("px"),ne=J("vh"),re=J("vw"),se={...ee,parse:e=>ee.parse(e)/100,transform:e=>ee.transform(100*e)},ie={...q,transform:Math.round},oe={borderWidth:te,borderTopWidth:te,borderRightWidth:te,borderBottomWidth:te,borderLeftWidth:te,borderRadius:te,radius:te,borderTopLeftRadius:te,borderTopRightRadius:te,borderBottomRightRadius:te,borderBottomLeftRadius:te,width:te,maxWidth:te,height:te,maxHeight:te,size:te,top:te,right:te,bottom:te,left:te,padding:te,paddingTop:te,paddingRight:te,paddingBottom:te,paddingLeft:te,margin:te,marginTop:te,marginRight:te,marginBottom:te,marginLeft:te,rotate:Z,rotateX:Z,rotateY:Z,rotateZ:Z,scale:W,scaleX:W,scaleY:W,scaleZ:W,skew:Z,skewX:Z,skewY:Z,distance:te,translateX:te,translateY:te,translateZ:te,x:te,y:te,z:te,perspective:te,transformPerspective:te,opacity:H,originX:se,originY:se,originZ:te,zIndex:ie,fillOpacity:H,strokeOpacity:H,numOctaves:ie};function ae(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let l=!1,c=!1,u=!0;for(const h in t){const e=t[h];if(U(h)){i[h]=e;continue}const n=oe[h],r=$(e,n);if(O.has(h)){if(l=!0,o[h]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,a[h]=r):s[h]=r}if(t.transform||(l||r?s.transform=function(e,t,n,r){let{enableHardwareAcceleration:s=!0,allowTransformNone:i=!0}=t,o="";for(let a=0;a<F;a++){const t=D[a];void 0!==e[t]&&(o+=`${j[t]||t}(${e[t]}) `)}return s&&!e.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(e,n?"":o):i&&n&&(o="none"),o}(e.transform,n,u,r):s.transform&&(s.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;s.transformOrigin=`${e} ${t} ${n}`}}const le=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ce(e,t,n){for(const r in t)M(t[r])||L(r,n)||(e[r]=t[r])}function ue(e,t,n){const s={};return ce(s,e.style||{},e),Object.assign(s,function(e,t,n){let{transformTemplate:s}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return ae(e,t,{enableHardwareAcceleration:!n},s),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(s):s}function he(e,t,n){const r={},s=ue(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const de=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function fe(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||de.has(e)}let pe=e=>!fe(e);try{(me=require("@emotion/is-prop-valid").default)&&(pe=e=>e.startsWith("on")?!fe(e):me(e))}catch(QA){}var me;function ge(e,t,n){return"string"===typeof e?e:te.transform(t+n*e)}const ye={offset:"stroke-dashoffset",array:"stroke-dasharray"},ve={offset:"strokeDashoffset",array:"strokeDasharray"};function we(e,t,n,r,s){let{attrX:i,attrY:o,attrScale:a,originX:l,originY:c,pathLength:u,pathSpacing:h=1,pathOffset:d=0,...f}=t;if(ae(e,f,n,s),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:m,dimensions:g}=e;p.transform&&(g&&(m.transform=p.transform),delete p.transform),g&&(void 0!==l||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){return`${ge(t,e.x,e.width)} ${ge(n,e.y,e.height)}`}(g,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==i&&(p.x=i),void 0!==o&&(p.y=o),void 0!==a&&(p.scale=a),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=s?ye:ve;e[i.offset]=te.transform(-r);const o=te.transform(t),a=te.transform(n);e[i.array]=`${o} ${a}`}(p,u,h,d,!1)}const be=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),xe=e=>"string"===typeof e&&"svg"===e.toLowerCase();function _e(e,t,n,s){const i=(0,r.useMemo)(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return we(n,t,{enableHardwareAcceleration:!1},xe(s),e.transformTemplate),{...n.attrs,style:{...n.style}}},[t]);if(e.style){const t={};ce(t,e.style,e),i.style={...t,...i.style}}return i}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,s,i,o)=>{let{latestValues:a}=i;const l=(P(t)?_e:he)(n,a,o,t),c=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(pe(s)||!0===n&&fe(s)||!t&&!fe(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"===typeof t,e),u={...c,...l,ref:s},{children:h}=n,d=(0,r.useMemo)(()=>M(h)?h.get():h,[h]);return(0,r.createElement)(t,{...u,children:d})}}function Se(e,t,n,r){let{style:s,vars:i}=t;Object.assign(e.style,s,r&&r.getProjectionStyles(n));for(const o in i)e.style.setProperty(o,i[o])}const ke=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Te(e,t,n,r){Se(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(ke.has(s)?s:h(s),t.attrs[s])}function Ce(e,t){const{style:n}=e,r={};for(const s in n)(M(n[s])||t.style&&M(t.style[s])||L(s,e))&&(r[s]=n[s]);return r}function Ie(e,t){const n=Ce(e,t);for(const r in e)if(M(e[r])||M(t[r])){n[-1!==D.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function Ae(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),t}function Ne(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}const Pe=e=>Array.isArray(e),Re=e=>Pe(e)?e[e.length-1]||0:e;function De(e){const t=M(e)?e.get():e;return(e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue))(t)?t.toValue():t}const Oe=e=>(t,n)=>{const s=(0,r.useContext)(o),i=(0,r.useContext)(a),l=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:i,onMount:o}=e;const a={latestValues:Le(t,n,r,s),renderState:i()};return o&&(a.mount=e=>o(t,e,a)),a}(e,t,s,i);return n?l():Ne(l)};function Le(e,t,n,r){const s={},i=r(e,{});for(const d in i)s[d]=De(i[d]);let{initial:o,animate:a}=e;const l=v(e),c=w(e);t&&c&&!l&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const h=u?a:o;if(h&&"boolean"!==typeof h&&!m(h)){(Array.isArray(h)?h:[h]).forEach(t=>{const n=Ae(e,t);if(!n)return;const{transitionEnd:r,transition:i,...o}=n;for(const e in o){let t=o[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(s[e]=t)}for(const e in r)s[e]=r[e]})}return s}const Me=e=>e;class je{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const Fe=["prepare","read","update","preRender","render","postRender"];const{schedule:Ve,cancel:Ue,state:Be,steps:$e}=function(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Fe.reduce((e,t)=>(e[t]=function(e){let t=new je,n=new je,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:function(e){const i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s,a=i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),a.add(e)&&i&&s&&(r=t.order.length),e},cancel:e=>{n.remove(e),o.delete(e)},process:l=>{if(s)i=!0;else{if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(l),o.has(r)&&(a.schedule(r),e())}s=!1,i&&(i=!1,a.process(l))}}};return a}(()=>n=!0),e),{}),o=e=>i[e].process(s),a=()=>{const i=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1),s.timestamp=i,s.isProcessing=!0,Fe.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},l=Fe.reduce((t,o)=>{const l=i[o];return t[o]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(a)),l.schedule(t,i,o)},t},{});return{schedule:l,cancel:e=>Fe.forEach(t=>i[t].cancel(e)),state:s,steps:i}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Me,!0),ze={useVisualState:Oe({scrapeMotionValuesFromProps:Ie,createRenderState:be,onMount:(e,t,n)=>{let{renderState:r,latestValues:s}=n;Ve.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}}),Ve.render(()=>{we(r,s,{enableHardwareAcceleration:!1},xe(t.tagName),e.transformTemplate),Te(t,r)})}})},qe={useVisualState:Oe({scrapeMotionValuesFromProps:Ce,createRenderState:le})};function He(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const We=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Ge(e,t,n,r){return He(e,t,(e=>t=>We(t)&&e(t,Ke(t)))(n),r)}const Qe=(e,t)=>n=>t(e(n)),Xe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Qe)};function Ye(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const Je=Ye("dragHorizontal"),Ze=Ye("dragVertical");function et(e){let t=!1;if("y"===e)t=Ze();else if("x"===e)t=Je();else{const e=Je(),n=Ze();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function tt(){const e=et(!0);return!e||(e(),!1)}class nt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rt(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Ge(e.current,n,(n,s)=>{if("touch"===n.pointerType||tt())return;const i=e.getProps();e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",t),i[r]&&Ve.update(()=>i[r](n,s))},{passive:!e.getProps()[r]})}const st=(e,t)=>!!t&&(e===t||st(e,t.parentElement));function it(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Ke(n))}const ot=new WeakMap,at=new WeakMap,lt=e=>{const t=ot.get(e.target);t&&t(e)},ct=e=>{e.forEach(lt)};function ut(e,t,n){const r=function(e){let{root:t,...n}=e;const r=t||document;at.has(r)||at.set(r,{});const s=at.get(r),i=JSON.stringify(n);return s[i]||(s[i]=new IntersectionObserver(ct,{root:t,...n})),s[i]}(t);return ot.set(e,n),r.observe(e),()=>{ot.delete(e),r.unobserve(e)}}const ht={some:0,all:1};const dt={inView:{Feature:class extends nt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:ht[r]};return ut(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends nt{constructor(){super(...arguments),this.removeStartListeners=Me,this.removeEndListeners=Me,this.removeAccessibleListeners=Me,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Ge(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:s}=this.node.getProps();Ve.update(()=>{s||st(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),s=Ge(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Xe(r,s),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=He(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=He(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&it("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&Ve.update(()=>n(e,t))})}),it("down",(e,t)=>{this.startPress(e,t)})}),t=He(this.node.current,"blur",()=>{this.isPressing&&it("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Xe(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ve.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tt()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ve.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Ge(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=He(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xe(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends nt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xe(He(this.node.current,"focus",()=>this.onFocus()),He(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends nt{mount(){this.unmount=Xe(rt(this.node,!0),rt(this.node,!1))}unmount(){}}}};function ft(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function pt(e,t,n){const r=e.getProps();return Ae(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}let mt=Me,gt=Me;const yt=e=>1e3*e,vt=e=>e/1e3,wt=!1,bt=e=>Array.isArray(e)&&"number"===typeof e[0];function xt(e){return Boolean(!e||"string"===typeof e&&Et[e]||bt(e)||Array.isArray(e)&&e.every(xt))}const _t=e=>{let[t,n,r,s]=e;return`cubic-bezier(${t}, ${n}, ${r}, ${s})`},Et={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_t([0,.65,.55,1]),circOut:_t([.55,0,1,.45]),backIn:_t([.31,.01,.66,-.59]),backOut:_t([.33,1.53,.69,.99])};function St(e){if(e)return bt(e)?_t(e):Array.isArray(e)?e.map(St):Et[e]}const kt=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function Tt(e,t,n,r){if(e===t&&n===r)return Me;const s=t=>function(e,t,n,r,s){let i,o,a=0;do{o=t+(n-t)/2,i=kt(o,r,s)-e,i>0?n=o:t=o}while(Math.abs(i)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:kt(s(e),t,r)}const Ct=Tt(.42,0,1,1),It=Tt(0,0,.58,1),At=Tt(.42,0,.58,1),Nt=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Pt=e=>t=>1-e(1-t),Rt=e=>1-Math.sin(Math.acos(e)),Dt=Pt(Rt),Ot=Nt(Rt),Lt=Tt(.33,1.53,.69,.99),Mt=Pt(Lt),jt=Nt(Mt),Ft={linear:Me,easeIn:Ct,easeInOut:At,easeOut:It,circIn:Rt,circInOut:Ot,circOut:Dt,backIn:Mt,backInOut:jt,backOut:Lt,anticipate:e=>(e*=2)<1?.5*Mt(e):.5*(2-Math.pow(2,-10*(e-1)))},Vt=e=>{if(Array.isArray(e)){gt(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,s]=e;return Tt(t,n,r,s)}return"string"===typeof e?(gt(void 0!==Ft[e],`Invalid easing type '${e}'`),Ft[e]):e},Ut=(e,t)=>n=>Boolean(Y(n)&&X.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Bt=(e,t,n)=>r=>{if(!Y(r))return r;const[s,i,o,a]=r.match(G);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},$t={...q,transform:e=>Math.round((e=>z(0,255,e))(e))},zt={test:Ut("rgb","red"),parse:Bt("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+$t.transform(t)+", "+$t.transform(n)+", "+$t.transform(r)+", "+K(H.transform(s))+")"}};const qt={test:Ut("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:zt.transform},Ht={test:Ut("hsl","hue"),parse:Bt("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+ee.transform(K(n))+", "+ee.transform(K(r))+", "+K(H.transform(s))+")"}},Wt={test:e=>zt.test(e)||qt.test(e)||Ht.test(e),parse:e=>zt.test(e)?zt.parse(e):Ht.test(e)?Ht.parse(e):qt.parse(e),transform:e=>Y(e)?e:e.hasOwnProperty("red")?zt.transform(e):Ht.transform(e)},Kt=(e,t,n)=>-n*e+n*t+e;function Gt(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Qt=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Xt=[qt,zt,Ht];function Yt(e){const t=(e=>Xt.find(t=>t.test(e)))(e);gt(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let n=t.parse(e);return t===Ht&&(n=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let i=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;i=Gt(s,e,t+1/3),o=Gt(s,e,t),a=Gt(s,e,t-1/3)}else i=o=a=r;return{red:Math.round(255*i),green:Math.round(255*o),blue:Math.round(255*a),alpha:s}}(n)),n}const Jt=(e,t)=>{const n=Yt(e),r=Yt(t),s={...n};return e=>(s.red=Qt(n.red,r.red,e),s.green=Qt(n.green,r.green,e),s.blue=Qt(n.blue,r.blue,e),s.alpha=Kt(n.alpha,r.alpha,e),zt.transform(s))};const Zt={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Me},en={regex:Q,countKey:"Colors",token:"${c}",parse:Wt.parse},tn={regex:G,countKey:"Numbers",token:"${n}",parse:q.parse};function nn(e,t){let{regex:n,countKey:r,token:s,parse:i}=t;const o=e.tokenised.match(n);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(n,s),e.values.push(...o.map(i)))}function rn(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&nn(n,Zt),nn(n,en),nn(n,tn),n}function sn(e){return rn(e).values}function on(e){const{values:t,numColors:n,numVars:r,tokenised:s}=rn(e),i=t.length;return e=>{let t=s;for(let s=0;s<i;s++)t=s<r?t.replace(Zt.token,e[s]):s<r+n?t.replace(en.token,Wt.transform(e[s])):t.replace(tn.token,K(e[s]));return t}}const an=e=>"number"===typeof e?0:e;const ln={test:function(e){var t,n;return isNaN(e)&&Y(e)&&((null===(t=e.match(G))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Q))||void 0===n?void 0:n.length)||0)>0},parse:sn,createTransformer:on,getAnimatableNone:function(e){const t=sn(e);return on(e)(t.map(an))}},cn=(e,t)=>n=>`${n>0?t:e}`;function un(e,t){return"number"===typeof e?n=>Kt(e,t,n):Wt.test(e)?Jt(e,t):e.startsWith("var(")?cn(e,t):fn(e,t)}const hn=(e,t)=>{const n=[...e],r=n.length,s=e.map((e,n)=>un(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}},dn=(e,t)=>{const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=un(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}},fn=(e,t)=>{const n=ln.createTransformer(t),r=rn(e),s=rn(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Xe(hn(r.values,s.values),n):(mt(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),cn(e,t))},pn=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},mn=(e,t)=>n=>Kt(e,t,n);function gn(e,t,n){const r=[],s=n||function(e){return"number"===typeof e?mn:"string"===typeof e?Wt.test(e)?Jt:fn:Array.isArray(e)?hn:"object"===typeof e?dn:mn}(e[0]),i=e.length-1;for(let o=0;o<i;o++){let n=s(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||Me:t;n=Xe(e,n)}r.push(n)}return r}function yn(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(gt(i===t.length,"Both input and output ranges must be the same length"),1===i)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=gn(t,r,s),a=o.length,l=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=pn(e[n],e[n+1],t);return o[n](r)};return n?t=>l(z(e[0],e[i-1],t)):l}function vn(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=pn(0,t,r);e.push(Kt(n,1,s))}}(t,e.length-1),t}function wn(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(Vt):Vt(s),o={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:vn(n),t),l=yn(a,n,{ease:Array.isArray(i)?i:(c=n,u=i,c.map(()=>u||At).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(o.value=l(e),o.done=e>=t,o)}}function bn(e,t){return t?e*(1e3/t):0}function xn(e,t,n){const r=Math.max(t-5,0);return bn(n-e(r),t-r)}const _n=.001;function En(e){let t,n,{duration:r=800,bounce:s=.25,velocity:i=0,mass:o=1}=e;mt(r<=yt(10),"Spring duration must be 10 seconds or less");let a=1-s;a=z(.05,1,a),r=z(.01,10,vt(r)),a<1?(t=e=>{const t=e*a,n=t*r,s=t-i,o=kn(e,a),l=Math.exp(-n);return _n-s/o*l},n=e=>{const n=e*a*r,s=n*i+i,o=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),c=kn(Math.pow(e,2),a);return(-t(e)+_n>0?-1:1)*((s-o)*l)/c}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const l=function(e,t,n){let r=n;for(let s=1;s<Sn;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=yt(r),isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const Sn=12;function kn(e,t){return e*Math.sqrt(1-t*t)}const Tn=["duration","bounce"],Cn=["stiffness","damping","mass"];function In(e,t){return t.some(t=>void 0!==e[t])}function An(e){let{keyframes:t,restDelta:n,restSpeed:r,...s}=e;const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!In(e,Cn)&&In(e,Tn)){const n=En(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}({...s,velocity:-vt(s.velocity||0)}),p=d||0,m=c/(2*Math.sqrt(l*u)),g=o-i,y=vt(Math.sqrt(l/u)),v=Math.abs(g)<5;let w;if(r||(r=v?.01:2),n||(n=v?.005:.5),m<1){const e=kn(y,m);w=t=>{const n=Math.exp(-m*y*t);return o-n*((p+m*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)w=e=>o-Math.exp(-y*e)*(g+(p+y*g)*e);else{const e=y*Math.sqrt(m*m-1);w=t=>{const n=Math.exp(-m*y*t),r=Math.min(e*t,300);return o-n*((p+m*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:f&&h||null,next:e=>{const t=w(e);if(f)a.done=e>=h;else{let s=p;0!==e&&(s=m<1?xn(w,e,t):0);const i=Math.abs(s)<=r,l=Math.abs(o-t)<=n;a.done=i&&l}return a.value=a.done?o:t,a}}}function Nn(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:h}=e;const d=t[0],f={done:!1,value:d},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=r*n;const g=d+m,y=void 0===a?g:a(g);y!==g&&(m=y-d);const v=e=>-m*Math.exp(-e/s),w=e=>y+v(e),b=e=>{const t=v(e),n=w(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let x,_;const E=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(f.value)&&(x=e,_=An({keyframes:[f.value,p(f.value)],velocity:xn(w,e,f.value),damping:i,stiffness:o,restDelta:u,restSpeed:h}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return _||void 0!==x||(t=!0,b(e),E(e)),void 0!==x&&e>x?_.next(e-x):(!t&&b(e),f)}}}const Pn=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>Ve.update(t,!0),stop:()=>Ue(t),now:()=>Be.isProcessing?Be.timestamp:performance.now()}};function Rn(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const Dn={decay:Nn,inertia:Nn,tween:wn,keyframes:wn,spring:An};function On(e){let t,n,{autoplay:r=!0,delay:s=0,driver:i=Pn,keyframes:o,type:a="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:u="loop",onPlay:h,onStop:d,onComplete:f,onUpdate:p,...m}=e,g=1,y=!1;const v=()=>{n=new Promise(e=>{t=e})};let w;v();const b=Dn[a]||wn;let x;b!==wn&&"number"!==typeof o[0]&&(x=yn([0,100],o,{clamp:!1}),o=[0,100]);const _=b({...m,keyframes:o});let E;"mirror"===u&&(E=b({...m,keyframes:[...o].reverse(),velocity:-(m.velocity||0)}));let S="idle",k=null,T=null,C=null;null===_.calculatedDuration&&l&&(_.calculatedDuration=Rn(_));const{calculatedDuration:I}=_;let A=1/0,N=1/0;null!==I&&(A=I+c,N=A*(l+1)-c);let P=0;const R=e=>{if(null===T)return;g>0&&(T=Math.min(T,e)),g<0&&(T=Math.min(e-N/g,T)),P=null!==k?k:Math.round(e-T)*g;const t=P-s*(g>=0?1:-1),n=g>=0?t<0:t>N;P=Math.max(t,0),"finished"===S&&null===k&&(P=N);let r=P,i=_;if(l){const e=Math.min(P,N)/A;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===u?(n=1-n,c&&(n-=c/A)):"mirror"===u&&(i=E)),r=z(0,1,n)*A}const a=n?{done:!1,value:o[0]}:i.next(r);x&&(a.value=x(a.value));let{done:h}=a;n||null===I||(h=g>=0?P>=N:P<=0);const d=null===k&&("finished"===S||"running"===S&&h);return p&&p(a.value),d&&L(),a},D=()=>{w&&w.stop(),w=void 0},O=()=>{S="idle",D(),t(),v(),T=C=null},L=()=>{S="finished",f&&f(),D(),t()},M=()=>{if(y)return;w||(w=i(R));const e=w.now();h&&h(),null!==k?T=e-k:T&&"finished"!==S||(T=e),"finished"===S&&v(),C=T,k=null,S="running",w.start()};r&&M();const j={then:(e,t)=>n.then(e,t),get time(){return vt(P)},set time(e){e=yt(e),P=e,null===k&&w&&0!==g?T=w.now()-e/g:k=e},get duration(){const e=null===_.calculatedDuration?Rn(_):_.calculatedDuration;return vt(e)},get speed(){return g},set speed(e){e!==g&&w&&(g=e,j.time=vt(P))},get state(){return S},play:M,pause:()=>{S="paused",k=P},stop:()=>{y=!0,"idle"!==S&&(S="idle",d&&d(),O())},cancel:()=>{null!==C&&R(C),O()},complete:()=>{S="finished"},sample:e=>(T=0,R(e))};return j}const Ln=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Mn=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function jn(e,t,n){let{onUpdate:r,onComplete:s,...i}=n;if(!(Ln()&&Mn.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;let o,a,l=!1,c=!1;const u=()=>{a=new Promise(e=>{o=e})};u();let{keyframes:h,duration:d=300,ease:f,times:p}=i;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!xt(t.ease))(t,i)){const e=On({...i,repeat:0,delay:0});let t={done:!1,value:h[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;p=void 0,h=n,d=r-10,f="linear"}const m=function(e,t,n){let{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=St(a);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"})}(e.owner.current,t,h,{...i,duration:d,ease:f,times:p}),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,Ve.update(g),o(),u()};m.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(h,i)),s&&s(),y())};return{then:(e,t)=>a.then(e,t),attachTimeline:e=>(m.timeline=e,m.onfinish=null,Me),get time(){return vt(m.currentTime||0)},set time(e){m.currentTime=yt(e)},get speed(){return m.playbackRate},set speed(e){m.playbackRate=e},get duration(){return vt(d)},play:()=>{l||(m.play(),Ue(g))},pause:()=>m.pause(),stop:()=>{if(l=!0,"idle"===m.playState)return;const{currentTime:t}=m;if(t){const n=On({...i,autoplay:!1});e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}y()},complete:()=>{c||m.finish()},cancel:y}}const Fn={type:"spring",stiffness:500,damping:25,restSpeed:10},Vn={type:"keyframes",duration:.8},Un={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Bn=(e,t)=>{let{keyframes:n}=t;return n.length>2?Vn:O.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Fn:Un},$n=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!ln.test(t)&&"0"!==t||t.startsWith("url("))),zn=new Set(["brightness","contrast","saturate","opacity"]);function qn(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(G)||[];if(!r)return e;const s=n.replace(r,"");let i=zn.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Hn=/([a-z-]*)\(.*?\)/g,Wn={...ln,getAnimatableNone:e=>{const t=e.match(Hn);return t?t.map(qn).join(" "):e}},Kn={...oe,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:Wn,WebkitFilter:Wn},Gn=e=>Kn[e];function Qn(e,t){let n=Gn(e);return n!==Wn&&(n=ln),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Xn=e=>/^0[^.\s]+$/.test(e);function Yn(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Xn(e):void 0}function Jn(e,t){return e[t]||e.default||e}const Zn=!1,er=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s=>{const i=Jn(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a-=yt(o);const l=function(e,t,n,r){const s=$n(t,n);let i;i=Array.isArray(n)?[...n]:[null,n];const o=void 0!==r.from?r.from:e.get();let a;const l=[];for(let c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?o:i[c-1]),Yn(i[c])&&l.push(c),"string"===typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(a=i[c]);if(s&&l.length&&a)for(let c=0;c<l.length;c++)i[l[c]]=Qn(t,a);return i}(t,e,n,i),c=l[0],u=l[l.length-1],h=$n(e,c),d=$n(e,u);mt(h===d,`You are trying to animate ${e} from "${c}" to "${u}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${u} via the \`style\` property.`);let f={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:e=>{t.set(e),i.onUpdate&&i.onUpdate(e)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...h}=e;return!!Object.keys(h).length}(i)||(f={...f,...Bn(e,f)}),f.duration&&(f.duration=yt(f.duration)),f.repeatDelay&&(f.repeatDelay=yt(f.repeatDelay)),!h||!d||wt||!1===i.type||Zn)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:s}=e;const i=()=>(r&&r(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Me,pause:Me,stop:Me,then:e=>(e(),Promise.resolve()),cancel:Me,complete:Me});return n?On({keyframes:[0,1],duration:0,delay:n,onComplete:i}):i()}(wt?{...f,delay:0}:f);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=jn(t,e,f);if(n)return n}return On(f)}};function tr(e){return Boolean(M(e)&&e.add)}const nr=e=>/^\-?\d*\.?\d+$/.test(e);function rr(e,t){-1===e.indexOf(t)&&e.push(t)}function sr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ir{constructor(){this.subscriptions=[]}add(e){return rr(this.subscriptions,e),()=>sr(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const or={current:void 0};class ar{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:s}=Be;t.lastUpdated!==s&&(t.timeDelta=r,t.lastUpdated=s,Ve.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>Ve.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ir);const n=this.events[e].add(t);return"change"===e?()=>{n(),Ve.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return or.current&&or.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?bn(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lr(e,t){return new ar(e,t)}const cr=e=>t=>t.test(e),ur=[q,te,ee,Z,re,ne,{test:e=>"auto"===e,parse:e=>e}],hr=e=>ur.find(cr(e)),dr=[...ur,Wt,ln],fr=e=>dr.find(cr(e));function pr(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,lr(n))}function mr(e,t){const n=pt(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){pr(e,o,Re(i[o]))}}function gr(e,t){if(!t)return;return(t[e]||t.default||t).from}function yr(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function vr(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function wr(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");r&&(i=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const h in a){const t=e.getValue(h),r=a[h];if(!t||void 0===r||u&&yr(u,h))continue;const s={delay:n,elapsed:0,...Jn(i||{},h)};if(window.HandoffAppearAnimations){const n=e.getProps()[d];if(n){const e=window.HandoffAppearAnimations(n,h,t,Ve);null!==e&&(s.elapsed=e,s.isHandoff=!0)}}let o=!s.isHandoff&&!vr(t,r);if("spring"===s.type&&(t.getVelocity()||s.velocity)&&(o=!1),t.animation&&(o=!1),o)continue;t.start(er(h,t,r,e.shouldReduceMotion&&O.has(h)?{type:!1}:s));const f=t.animation;tr(l)&&(l.add(h),f.then(()=>l.remove(h))),c.push(f)}return o&&Promise.all(c).then(()=>{o&&mr(e,o)}),c}function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=pt(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(wr(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0;const o=[],a=(e.variantChildren.size-1)*r,l=1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(xr).forEach((e,r)=>{e.notify("AnimationStart",t),o.push(br(e,t,{...i,delay:n+l(r)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(o)}(e,t,i+r,o,a,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[e,t]="beforeChildren"===a?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(n.delay)])}function xr(e,t){return e.sortNodePosition(t)}const _r=[...g].reverse(),Er=g.length;function Sr(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>br(e,t,r));n=Promise.all(s)}else if("string"===typeof t)n=br(e,t,r);else{const s="function"===typeof t?pt(e,t,r.custom):t;n=Promise.all(wr(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function kr(e){let t=Sr(e);const n={animate:Cr(!0),whileInView:Cr(),whileHover:Cr(),whileTap:Cr(),whileDrag:Cr(),whileFocus:Cr(),exit:Cr()};let r=!0;const s=(t,n)=>{const r=pt(e,n);if(r){const{transition:e,transitionEnd:n,...s}=r;t={...t,...s,...n}}return t};function i(i,o){const a=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let h={},d=1/0;for(let t=0;t<Er;t++){const f=_r[t],g=n[f],y=void 0!==a[f]?a[f]:l[f],v=p(y),w=f===o?g.isActive:null;!1===w&&(d=t);let b=y===l[f]&&y!==a[f]&&v;if(b&&r&&e.manuallyAnimateOnMount&&(b=!1),g.protectedKeys={...h},!g.isActive&&null===w||!y&&!g.prevProp||m(y)||"boolean"===typeof y)continue;let x=Tr(g.prevProp,y)||f===o&&g.isActive&&!b&&v||t>d&&v,_=!1;const E=Array.isArray(y)?y:[y];let S=E.reduce(s,{});!1===w&&(S={});const{prevResolvedValues:k={}}=g,T={...k,...S},C=e=>{x=!0,u.has(e)&&(_=!0,u.delete(e)),g.needsAnimating[e]=!0};for(const e in T){const t=S[e],n=k[e];if(h.hasOwnProperty(e))continue;let r=!1;r=Pe(t)&&Pe(n)?!ft(t,n):t!==n,r?void 0!==t?C(e):u.add(e):void 0!==t&&u.has(e)?C(e):g.protectedKeys[e]=!0}g.prevProp=y,g.prevResolvedValues=S,g.isActive&&(h={...h,...S}),r&&e.blockInitialAnimation&&(x=!1),!x||b&&!_||c.push(...E.map(e=>({animation:e,options:{type:f,...i}})))}if(u.size){const t={};u.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),c.push({animation:t})}let f=Boolean(c.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(c):Promise.resolve()}return{animateChanges:i,setActive:function(t,r,s){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const a=i(s,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Tr(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!ft(t,e)}function Cr(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Ir=0;const Ar={animation:{Feature:class extends nt{constructor(e){super(e),e.animationState||(e.animationState=kr(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),m(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends nt{constructor(){super(...arguments),this.id=Ir++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},Nr=(e,t)=>Math.abs(e-t);class Pr{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Or(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Nr(e.x,t.x),r=Nr(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=Be;this.history.push({...r,timestamp:s});const{onStart:i,onMove:o}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Rr(t,this.transformPagePoint),Ve.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=Or("pointercancel"===e.type?this.lastMoveEventInfo:Rr(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!We(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const i=Rr(Ke(e),this.transformPagePoint),{point:o}=i,{timestamp:a}=Be;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,Or(i,this.history)),this.removeListeners=Xe(Ge(this.contextWindow,"pointermove",this.handlePointerMove),Ge(this.contextWindow,"pointerup",this.handlePointerUp),Ge(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ue(this.updatePoint)}}function Rr(e,t){return t?{point:t(e.point)}:e}function Dr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Or(e,t){let{point:n}=e;return{point:n,delta:Dr(n,Mr(t)),offset:Dr(n,Lr(t)),velocity:jr(t,.1)}}function Lr(e){return e[0]}function Mr(e){return e[e.length-1]}function jr(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Mr(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>yt(t)));)n--;if(!r)return{x:0,y:0};const i=vt(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Fr(e){return e.max-e.min}function Vr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Ur(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Kt(t.min,t.max,e.origin),e.scale=Fr(n)/Fr(t),(Vr(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Kt(n.min,n.max,e.origin)-e.originPoint,(Vr(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Br(e,t,n,r){Ur(e.x,t.x,n.x,r?r.originX:void 0),Ur(e.y,t.y,n.y,r?r.originY:void 0)}function $r(e,t,n){e.min=n.min+t.min,e.max=e.min+Fr(t)}function zr(e,t,n){e.min=t.min-n.min,e.max=e.min+Fr(t)}function qr(e,t,n){zr(e.x,t.x,n.x),zr(e.y,t.y,n.y)}function Hr(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Wr(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Kr=.35;function Gr(e,t,n){return{min:Qr(e,t),max:Qr(e,n)}}function Qr(e,t){return"number"===typeof e?e:e[t]||0}const Xr=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Yr(e){return[e("x"),e("y")]}function Jr(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function Zr(e){return void 0===e||1===e}function es(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Zr(t)||!Zr(n)||!Zr(r)}function ts(e){return es(e)||ns(e)||e.z||e.rotate||e.rotateX||e.rotateY}function ns(e){return rs(e.x)||rs(e.y)}function rs(e){return e&&"0%"!==e}function ss(e,t,n){return n+t*(e-n)}function is(e,t,n,r,s){return void 0!==s&&(e=ss(e,s,r)),ss(e,n,r)+t}function os(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=is(e.min,t,n,r,s),e.max=is(e.max,t,n,r,s)}function as(e,t){let{x:n,y:r}=t;os(e.x,n.translate,n.scale,n.originPoint),os(e.y,r.translate,r.scale,r.originPoint)}function ls(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function cs(e,t){e.min=e.min+t,e.max=e.max+t}function us(e,t,n){let[r,s,i]=n;const o=void 0!==t[i]?t[i]:.5,a=Kt(e.min,e.max,o);os(e,t[r],t[s],a,t.scale)}const hs=["x","scaleX","originX"],ds=["y","scaleY","originY"];function fs(e,t){us(e.x,t,hs),us(e.y,t,ds)}function ps(e,t){return Jr(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const ms=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},gs=new WeakMap;class ys{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Pr(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Ke(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=et(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yr(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ee.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Fr(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&Ve.update(()=>s(e,t),!1,!0);const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Yr(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:ms(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Ve.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!vs(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?Kt(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?Kt(s,e,n.max):Math.min(e,s)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&f(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:s,right:i}=t;return{x:Hr(e.x,r,i),y:Hr(e.y,n,s)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr;return!1===e?e=0:!0===e&&(e=Kr),{x:Gr(e,"left","right"),y:Gr(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yr(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!f(e))return!1;const n=e.current;gt(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=ps(e,n),{scroll:s}=t;return s&&(cs(r.x,s.offset.x),cs(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:Wr(e.x,t.x),y:Wr(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=Jr(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Yr(o=>{if(!vs(o,t,this.currentDirection))return;let l=a&&a[o]||{};i&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,h={type:"inertia",velocity:n?e[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(o,h)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(er(e,n,0,t))}stopAnimation(){Yr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yr(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Yr(t=>{const{drag:n}=this.getProps();if(!vs(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];s.set(e[t]-Kt(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!f(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yr(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=Fr(e),s=Fr(t);return s>r?n=pn(t.min,t.max-r,e.min):r>s&&(n=pn(e.min,e.max-s,t.min)),z(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Yr(t=>{if(!vs(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(Kt(s,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;gs.set(this.visualElement,this);const e=Ge(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();f(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const s=He(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Yr(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=Kr,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:o}}}function vs(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const ws=e=>(t,n)=>{e&&Ve.update(()=>e(t,n))};const bs={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xs(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const _s={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!te.test(e))return e;e=parseFloat(e)}return`${xs(e,t.target.x)}% ${xs(e,t.target.y)}%`}},Es={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,i=ln.parse(e);if(i.length>5)return s;const o=ln.createTransformer(e),a="number"!==typeof i[0]?1:0,l=r.x.scale*n.x,c=r.y.scale*n.y;i[0+a]/=l,i[1+a]/=c;const u=Kt(l,c,.5);return"number"===typeof i[2+a]&&(i[2+a]/=u),"number"===typeof i[3+a]&&(i[3+a]/=u),o(i)}};class Ss extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;var i;i=Ts,Object.assign(R,i),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),bs.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,i=n.projection;return i?(i.isPresent=s,r||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||Ve.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ks(e){const[t,n]=function(){const e=(0,r.useContext)(a);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=(0,r.useId)();return(0,r.useEffect)(()=>s(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}(),s=(0,r.useContext)(S);return r.createElement(Ss,{...e,layoutGroup:s,switchLayoutGroup:(0,r.useContext)(k),isPresent:t,safeToRemove:n})}const Ts={borderRadius:{..._s,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_s,borderTopRightRadius:_s,borderBottomLeftRadius:_s,borderBottomRightRadius:_s,boxShadow:Es},Cs=["TopLeft","TopRight","BottomLeft","BottomRight"],Is=Cs.length,As=e=>"string"===typeof e?parseFloat(e):e,Ns=e=>"number"===typeof e||te.test(e);function Ps(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Rs=Os(0,.5,Dt),Ds=Os(.5,.95,Me);function Os(e,t,n){return r=>r<e?0:r>t?1:n(pn(e,t,r))}function Ls(e,t){e.min=t.min,e.max=t.max}function Ms(e,t){Ls(e.x,t.x),Ls(e.y,t.y)}function js(e,t,n,r,s){return e=ss(e-=t,1/n,r),void 0!==s&&(e=ss(e,1/s,r)),e}function Fs(e,t,n,r,s){let[i,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;ee.test(t)&&(t=parseFloat(t),t=Kt(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=Kt(i.min,i.max,r);e===i&&(a-=t),e.min=js(e.min,t,n,a,s),e.max=js(e.max,t,n,a,s)}(e,t[i],t[o],t[a],t.scale,r,s)}const Vs=["x","scaleX","originX"],Us=["y","scaleY","originY"];function Bs(e,t,n,r){Fs(e.x,t,Vs,n?n.x:void 0,r?r.x:void 0),Fs(e.y,t,Us,n?n.y:void 0,r?r.y:void 0)}function $s(e){return 0===e.translate&&1===e.scale}function zs(e){return $s(e.x)&&$s(e.y)}function qs(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Hs(e){return Fr(e.x)/Fr(e.y)}class Ws{constructor(){this.members=[]}add(e){rr(this.members,e),e.scheduleRender()}remove(e){if(sr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ks(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:e,rotateX:t,rotateY:s}=n;e&&(r+=`rotate(${e}deg) `),t&&(r+=`rotateX(${t}deg) `),s&&(r+=`rotateY(${s}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return 1===o&&1===a||(r+=`scale(${o}, ${a})`),r||"none"}const Gs=(e,t)=>e.depth-t.depth;class Qs{constructor(){this.children=[],this.isDirty=!1}add(e){rr(this.children,e),this.isDirty=!0}remove(e){sr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Gs),this.isDirty=!1,this.children.forEach(e)}}const Xs=["","X","Y","Z"],Ys={visibility:"hidden"};let Js=0;const Zs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ei(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Js++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,Zs.totalNodes=Zs.resolvedTargetDeltas=Zs.recalculatedProjection=0,this.nodes.forEach(ri),this.nodes.forEach(ui),this.nodes.forEach(hi),this.nodes.forEach(si),e=Zs,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qs)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new ir),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:s,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||s)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=s=>{let{timestamp:i}=s;const o=i-n;o>=t&&(Ue(r),e(o-t))};return Ve.read(r,!0),()=>Ue(r)}(r,250),bs.hasAnimatedSinceResize&&(bs.hasAnimatedSinceResize=!1,this.nodes.forEach(ci))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&o&&(s||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||yi,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!qs(this.targetLayout,s)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...Jn(i,"layout"),onPlay:a,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||ci(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ue(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(di),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(oi);this.isUpdating||this.nodes.forEach(ai),this.isUpdating=!1,this.nodes.forEach(li),this.nodes.forEach(ti),this.nodes.forEach(ni),this.clearAllSnapshots();const e=performance.now();Be.delta=z(0,1e3/60,e-Be.timestamp),Be.timestamp=e,Be.isProcessing=!0,$e.update.process(Be),$e.preRender.process(Be),$e.render.process(Be),Be.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ii),this.sharedNodes.forEach(fi)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!zs(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||ts(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),bi((r=n).x),bi(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(cs(t.x,n.offset.x),cs(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Ms(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:i}=r;if(r!==this.root&&s&&i.layoutScroll){if(s.isRoot){Ms(t,e);const{scroll:n}=this.root;n&&(cs(t.x,-n.offset.x),cs(t.y,-n.offset.y))}cs(t.x,s.offset.x),cs(t.y,s.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Ms(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&fs(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),ts(e.latestValues)&&fs(n,e.latestValues)}return ts(this.latestValues)&&fs(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Ms(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!ts(e.latestValues))continue;es(e.latestValues)&&e.updateSnapshot();const r=Xr();Ms(r,e.measurePageBox()),Bs(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return ts(this.latestValues)&&Bs(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Be.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){if(this.resolvedRelativeTargetAt=Be.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},qr(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,$r(o.x,a.x,l.x),$r(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),as(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},qr(this.relativeTargetOrigin,this.target,e.target),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!es(this.parent.latestValues)&&!ns(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Be.timestamp&&(r=!1),r)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;Ms(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let i,o;t.x=t.y=1;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const s=i.instance;s&&s.style&&"contents"===s.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fs(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,as(e,o)),r&&ts(i.latestValues)&&fs(e,i.latestValues))}t.x=ls(t.x),t.y=ls(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;Br(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Ks(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Zs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(gi));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;pi(i.x,e.x,n),pi(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qr(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){mi(e.x,t.x,n.x,r),mi(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,o,n),h&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),Ms(h,this.relativeTarget)),a&&(this.animationValues=s,function(e,t,n,r,s,i){s?(e.opacity=Kt(0,void 0!==n.opacity?n.opacity:1,Rs(r)),e.opacityExit=Kt(void 0!==t.opacity?t.opacity:1,0,Ds(r))):i&&(e.opacity=Kt(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let o=0;o<Is;o++){const s=`border${Cs[o]}Radius`;let i=Ps(t,s),a=Ps(n,s);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||Ns(i)===Ns(a)?(e[s]=Math.max(Kt(As(i),As(a),r),0),(ee.test(a)||ee.test(i))&&(e[s]+="%")):e[s]=a)}(t.rotate||n.rotate)&&(e.rotate=Kt(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ue(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ve.update(()=>{bs.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=M(e)?e:lr(e);return r.start(er("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&xi(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Fr(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Fr(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Ms(t,n),fs(t,s),Br(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ws);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let s=0;s<Xs.length;s++){const t="rotate"+Xs[s];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const s in r)e.setStaticValue(s,r[s]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ys;const r={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=De(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=s?s(this.latestValues,""):"none",r;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=De(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!ts(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}const o=i.animationValues||i.latestValues;this.applyTransformsToTarget(),r.transform=Ks(this.projectionDeltaWithTransform,this.treeScale,o),s&&(r.transform=s(o,r.transform));const{x:a,y:l}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,i.animationValues?r.opacity=i===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=i===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const c in R){if(void 0===o[c])continue;const{correct:e,applyTo:t}=R[c],n="none"===r.transform?o[c]:e(o[c],i);if(t){const e=t.length;for(let s=0;s<e;s++)r[t[s]]=n}else r[c]=n}return this.options.layoutId&&(r.pointerEvents=i===this?De(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(oi),this.root.sharedNodes.clear()}}}function ti(e){e.updateLayout()}function ni(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;"size"===s?Yr(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],s=Fr(r);r.min=t[e].min,r.max=r.min+s}):xi(s,n.layoutBox,t)&&Yr(r=>{const s=i?n.measuredBox[r]:n.layoutBox[r],o=Fr(t[r]);s.max=s.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Br(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?Br(a,e.applyTransform(r,!0),n.measuredBox):Br(a,t,n.layoutBox);const l=!zs(o);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const o={x:{min:0,max:0},y:{min:0,max:0}};qr(o,n.layoutBox,s.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};qr(a,t,i.layoutBox),qs(o,a)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ri(e){Zs.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function si(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ii(e){e.clearSnapshot()}function oi(e){e.clearMeasurements()}function ai(e){e.isLayoutDirty=!1}function li(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ci(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ui(e){e.resolveTargetDelta()}function hi(e){e.calcProjection()}function di(e){e.resetRotation()}function fi(e){e.removeLeadSnapshot()}function pi(e,t,n){e.translate=Kt(t.translate,0,n),e.scale=Kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function mi(e,t,n,r){e.min=Kt(t.min,n.min,r),e.max=Kt(t.max,n.max,r)}function gi(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const yi={duration:.45,ease:[.4,0,.1,1]},vi=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),wi=vi("applewebkit/")&&!vi("chrome/")?Math.round:Me;function bi(e){e.min=wi(e.min),e.max=wi(e.max)}function xi(e,t,n){return"position"===e||"preserve-aspect"===e&&!Vr(Hs(t),Hs(n),.2)}const _i=ei({attachResizeListener:(e,t)=>He(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ei={current:void 0},Si=ei({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ei.current){const e=new _i({});e.mount(window),e.setOptions({layoutScroll:!0}),Ei.current=e}return Ei.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),ki={pan:{Feature:class extends nt{constructor(){super(...arguments),this.removePointerDownListener=Me}onPointerDown(e){this.session=new Pr(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ms(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:ws(e),onStart:ws(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Ve.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=Ge(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends nt{constructor(e){super(e),this.removeGroupControls=Me,this.removeListeners=Me,this.controls=new ys(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Me}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Si,MeasureLayout:ks}},Ti=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Ci(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;gt(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[r,s]=function(e){const t=Ti.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return nr(e)?parseFloat(e):e}return B(s)?Ci(s,t,n+1):s}const Ii=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ai=e=>Ii.has(e),Ni=e=>e===q||e===te,Pi=(e,t)=>parseFloat(e.split(", ")[t]),Ri=(e,t)=>(n,r)=>{let{transform:s}=r;if("none"===s||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return Pi(i[1],t);{const t=s.match(/^matrix\((.+)\)$/);return t?Pi(t[1],e):0}},Di=new Set(["x","y","z"]),Oi=D.filter(e=>!Di.has(e));const Li={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:Ri(4,13),y:Ri(5,14)};Li.translateX=Li.x,Li.translateY=Li.y;const Mi=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t={...t},r={...r};const s=Object.keys(t).filter(Ai);let i=[],o=!1;const a=[];if(s.forEach(s=>{const l=e.getValue(s);if(!e.hasValue(s))return;let c=n[s],u=hr(c);const h=t[s];let d;if(Pe(h)){const e=h.length,t=null===h[0]?1:0;c=h[t],u=hr(c);for(let n=t;n<e&&null!==h[n];n++)d?gt(hr(h[n])===d,"All keyframes must be of the same type"):(d=hr(h[n]),gt(d===u||Ni(u)&&Ni(d),"Keyframes must be of the same dimension as the current value"))}else d=hr(h);if(u!==d)if(Ni(u)&&Ni(d)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof h?t[s]=parseFloat(h):Array.isArray(h)&&d===te&&(t[s]=h.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===d||void 0===d?void 0:d.transform)&&(0===c||0===h)?0===c?l.set(d.transform(c)):t[s]=u.transform(h):(o||(i=function(e){const t=[];return Oi.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),o=!0),a.push(s),r[s]=void 0!==r[s]?r[s]:t[s],l.jump(h))}),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,s=((e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{a[e]=Li[e](r,i)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(a[n]),e[n]=Li[n](l,i)}),e})(t,e,a);return i.length&&i.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),l&&null!==n&&window.scrollTo({top:n}),{target:s,transitionEnd:r}}return{target:t,transitionEnd:r}};function ji(e,t,n,r){return(e=>Object.keys(e).some(Ai))(t)?Mi(e,t,n,r):{target:t,transitionEnd:r}}const Fi=(e,t,n,r)=>{const s=function(e,t,n){let{...r}=t;const s=e.current;if(!(s instanceof Element))return{target:r,transitionEnd:n};n&&(n={...n}),e.values.forEach(e=>{const t=e.get();if(!B(t))return;const n=Ci(t,s);n&&e.set(n)});for(const i in r){const e=r[i];if(!B(e))continue;const t=Ci(e,s);t&&(r[i]=t,n||(n={}),void 0===n[i]&&(n[i]=e))}return{target:r,transitionEnd:n}}(e,t,r);return ji(e,t=s.target,n,r=s.transitionEnd)},Vi={current:null},Ui={current:!1};const Bi=new WeakMap,$i=Object.keys(E),zi=$i.length,qi=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Hi=y.length;class Wi{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ve.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=v(n),this.isVariantNode=w(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const e=u[h];void 0!==a[h]&&M(e)&&(e.set(a[h],!1),tr(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,Bi.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Ui.current||function(){if(Ui.current=!0,l)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Vi.current=e.matches;e.addListener(t),t()}else Vi.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Vi.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Bi.delete(this.current),this.projection&&this.projection.unmount(),Ue(this.notifyUpdate),Ue(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=O.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Ve.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let s,i,{children:o,...a}=e;for(let l=0;l<zi;l++){const e=$i[l],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:o}=E[e];r&&(s=r),t(a)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),o&&(i=o))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:i,layoutScroll:o,layoutRoot:l}=a;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||i&&f(i),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:o,layoutRoot:l})}return i}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<qi.length;n++){const t=qi[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(M(i))e.addValue(s,i),tr(r)&&r.add(s);else if(M(o))e.addValue(s,lr(i,{owner:e})),tr(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const t=e.getValue(s);!t.hasAnimated&&t.set(i)}else{const t=e.getStaticValue(s);e.addValue(s,lr(void 0!==t?t:i,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Hi;t++){const n=y[t],r=this.props[n];(p(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=lr(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=Ae(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||M(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new ir),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}class Ki extends Wi{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:s,...i}=e,{transformValues:o}=t,a=function(e,t,n){const r={};for(const s in e){const e=gr(s,t);if(void 0!==e)r[s]=e;else{const e=n.getValue(s);e&&(r[s]=e.get())}}return r}(i,r||{},this);if(o&&(s&&(s=o(s)),i&&(i=o(i)),a&&(a=o(a))),n){!function(e,t,n){var r,s;const i=Object.keys(t).filter(t=>!e.hasValue(t)),o=i.length;if(o)for(let a=0;a<o;a++){const o=i[a],l=t[o];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(s=null!==(r=n[o])&&void 0!==r?r:e.readValue(o))&&void 0!==s?s:t[o]),void 0!==c&&null!==c&&("string"===typeof c&&(nr(c)||Xn(c))?c=parseFloat(c):!fr(c)&&ln.test(l)&&(c=Qn(o,l)),e.addValue(o,lr(c,{owner:e})),void 0===n[o]&&(n[o]=c),null!==c&&e.setBaseTarget(o,c))}}(this,i,a);const e=Fi(this,i,a,s);s=e.transitionEnd,i=e.target}return{transition:r,transitionEnd:s,...i}}}class Gi extends Ki{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(O.has(t)){const e=Gn(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),s=(U(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return ps(e,n)}build(e,t,n,r){ae(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Ce(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;M(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(e,t,n,r){Se(e,t,n,r)}}class Qi extends Ki{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(O.has(t)){const e=Gn(t);return e&&e.default||0}return t=ke.has(t)?t:h(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return Ie(e,t)}build(e,t,n,r){we(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){Te(e,t,0,r)}mount(e){this.isSVGTag=xe(e.tagName),super.mount(e)}}const Xi=(e,t)=>P(e)?new Qi(t,{enableHardwareAcceleration:!1}):new Gi(t,{enableHardwareAcceleration:!0}),Yi={...Ar,...dt,...ki,...{layout:{ProjectionNode:Si,MeasureLayout:ks}}},Ji=A((e,t)=>function(e,t,n,r){let{forwardMotionProps:s=!1}=t;return{...P(e)?ze:qe,preloadedFeatures:n,useRender:Ee(s),createVisualElement:r,Component:e}}(e,t,Yi,Xi));function Zi(){const e=(0,r.useRef)(!1);return c(()=>(e.current=!0,()=>{e.current=!1}),[]),e}class eo extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function to(e){let{children:t,isPresent:n}=e;const s=(0,r.useId)(),i=(0,r.useRef)(null),o=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)(()=>{const{width:e,height:t,top:r,left:a}=o.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=s;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            top: ${r}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}},[n]),r.createElement(eo,{isPresent:n,childRef:i,sizeRef:o},r.cloneElement(t,{ref:i}))}const no=e=>{let{children:t,initial:n,isPresent:s,onExitComplete:i,custom:o,presenceAffectsLayout:l,mode:c}=e;const u=Ne(ro),h=(0,r.useId)(),d=(0,r.useMemo)(()=>({id:h,initial:n,isPresent:s,custom:o,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;i&&i()},register:e=>(u.set(e,!1),()=>u.delete(e))}),l?void 0:[s]);return(0,r.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[s]),r.useEffect(()=>{!s&&!u.size&&i&&i()},[s]),"popLayout"===c&&(t=r.createElement(to,{isPresent:s},t)),r.createElement(a.Provider,{value:d},t)};function ro(){return new Map}const so=e=>e.key||"";const io=e=>{let{children:t,custom:n,initial:s=!0,onExitComplete:i,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:l="sync"}=e;gt(!o,"Replace exitBeforeEnter with mode='wait'");const u=(0,r.useContext)(S).forceRender||function(){const e=Zi(),[t,n]=(0,r.useState)(0),s=(0,r.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,r.useCallback)(()=>Ve.postRender(s),[s]),t]}()[0],h=Zi(),d=function(e){const t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}(t);let f=d;const p=(0,r.useRef)(new Map).current,m=(0,r.useRef)(f),g=(0,r.useRef)(new Map).current,y=(0,r.useRef)(!0);var v;if(c(()=>{y.current=!1,function(e,t){e.forEach(e=>{const n=so(e);t.set(n,e)})}(d,g),m.current=f}),v=()=>{y.current=!0,g.clear(),p.clear()},(0,r.useEffect)(()=>()=>v(),[]),y.current)return r.createElement(r.Fragment,null,f.map(e=>r.createElement(no,{key:so(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:a,mode:l},e)));f=[...f];const w=m.current.map(so),b=d.map(so),x=w.length;for(let r=0;r<x;r++){const e=w[r];-1!==b.indexOf(e)||p.has(e)||p.set(e,void 0)}return"wait"===l&&p.size&&(f=[]),p.forEach((e,t)=>{if(-1!==b.indexOf(t))return;const s=g.get(t);if(!s)return;const o=w.indexOf(t);let c=e;if(!c){const e=()=>{p.delete(t);const e=Array.from(g.keys()).filter(e=>!b.includes(e));if(e.forEach(e=>g.delete(e)),m.current=d.filter(n=>{const r=so(n);return r===t||e.includes(r)}),!p.size){if(!1===h.current)return;u(),i&&i()}};c=r.createElement(no,{key:so(s),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:a,mode:l},s),p.set(t,c)}f.splice(o,0,c)}),f=f.map(e=>{const t=e.key;return p.has(t)?e:r.createElement(no,{key:so(e),isPresent:!0,presenceAffectsLayout:a,mode:l},e)}),r.createElement(r.Fragment,null,p.size?f:f.map(e=>(0,r.cloneElement)(e)))};var oo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};var ao=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{color:i="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:l,children:c,...u}=n;return(0,r.createElement)("svg",{ref:s,...oo,width:o,height:o,stroke:i,strokeWidth:l?24*Number(a)/Number(o):a,className:`lucide lucide-${h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...u},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var h});return n.displayName=`${e}`,n};const lo=ao("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),co=ao("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),uo=ao("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ho=ao("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),fo=ao("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),po=ao("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),mo=ao("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),go=ao("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),yo=ao("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vo=ao("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),wo=ao("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),bo=ao("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),xo=ao("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),_o=ao("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Eo=ao("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);var So=n(579);const ko=e=>{let{user:t,onNavigate:n}=e;t&&Math.min((t.total_xp||0)/100*100,100);const r=t?Math.min((t.total_xp||0)%50,50):0;return(0,So.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,So.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-10",children:(0,So.jsxs)("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[(0,So.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,So.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,So.jsx)(lo,{className:"text-white w-6 h-6"})}),(0,So.jsx)("h1",{className:"text-xl font-bold text-blue-600",children:"CaseQuest"})]}),(0,So.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,So.jsxs)("div",{className:"flex items-center bg-orange-100 px-3 py-1 rounded-full",children:[(0,So.jsx)(bo,{className:"text-orange-500 w-4 h-4 animate-pulse"}),(0,So.jsx)("span",{className:"ml-2 font-semibold text-orange-800",children:(null===t||void 0===t?void 0:t.current_streak)||0})]}),(0,So.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,So.jsx)("span",{className:"text-sm font-bold text-gray-600",children:(null===t||void 0===t?void 0:t.current_level)||1})})]})]})}),(0,So.jsxs)("main",{className:"container mx-auto px-4 py-8 pb-20",children:[(0,So.jsxs)("div",{className:"mb-8 text-center",children:[(0,So.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Continue Learning"}),(0,So.jsxs)("div",{className:"inline-flex items-center bg-blue-100 px-4 py-1 rounded-full",children:[(0,So.jsx)("span",{className:"text-blue-700 font-medium",children:"Consulting Cases"}),(0,So.jsx)(xo,{className:"ml-2 text-blue-600 w-4 h-4"})]})]}),(0,So.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,So.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,So.jsx)("h3",{className:"font-semibold text-gray-700",children:"Daily Goal"}),(0,So.jsxs)("span",{className:"text-sm text-gray-500",children:[50," XP"]})]}),(0,So.jsxs)("div",{className:"relative w-20 h-20 mx-auto",children:[(0,So.jsxs)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 36 36",children:[(0,So.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#e5e7eb",strokeWidth:"3"}),(0,So.jsx)("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#3b82f6",strokeWidth:"3",strokeDasharray:"100, 100",strokeDashoffset:100-r/50*100,className:"transition-all duration-500"})]}),(0,So.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,So.jsxs)("span",{className:"text-lg font-bold text-gray-800",children:[r,"/",50]})})]})]}),(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,So.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,So.jsx)("h3",{className:"font-semibold text-gray-700",children:"Current Streak"}),(0,So.jsx)(bo,{className:"text-orange-500 w-5 h-5"})]}),(0,So.jsxs)("div",{className:"text-center",children:[(0,So.jsx)("span",{className:"text-3xl font-bold text-gray-800",children:(null===t||void 0===t?void 0:t.current_streak)||0}),(0,So.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"days in a row"})]})]}),(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white p-6 rounded-xl shadow-sm",children:[(0,So.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,So.jsx)("h3",{className:"font-semibold text-gray-700",children:"Level"}),(0,So.jsx)("span",{className:"text-sm text-gray-500",children:"Consultant"})]}),(0,So.jsxs)("div",{className:"flex items-center justify-center",children:[(0,So.jsx)("div",{className:"w-12 h-12 bg-purple-400 rounded-full flex items-center justify-center",children:(0,So.jsx)(go,{className:"text-white w-6 h-6"})}),(0,So.jsxs)("div",{className:"ml-4",children:[(0,So.jsxs)("span",{className:"block font-bold text-gray-800",children:["Level ",(null===t||void 0===t?void 0:t.current_level)||1]}),(0,So.jsxs)("span",{className:"text-xs text-gray-500",children:[(null===t||void 0===t?void 0:t.total_xp)||0," XP total"]})]})]})]})]}),(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-8",children:[(0,So.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Today's Modules"}),(0,So.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,So.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border-l-4 border-green-500",children:[(0,So.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,So.jsx)("h3",{className:"font-bold text-gray-800",children:"Consulting Mindset"}),(0,So.jsx)("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded",children:"New"})]}),(0,So.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Master structured problem solving"}),(0,So.jsxs)("div",{className:"flex justify-between items-center",children:[(0,So.jsxs)("div",{className:"flex space-x-1",children:[(0,So.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"})]}),(0,So.jsx)("button",{onClick:()=>n("learning"),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-full text-sm font-medium transition",children:"Start"})]})]}),(0,So.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border-l-4 border-blue-500",children:[(0,So.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,So.jsx)("h3",{className:"font-bold text-gray-800",children:"Profitability"}),(0,So.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded",children:"Review"})]}),(0,So.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Analyze business profitability"}),(0,So.jsxs)("div",{className:"flex justify-between items-center",children:[(0,So.jsxs)("div",{className:"flex space-x-1",children:[(0,So.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"})]}),(0,So.jsx)("button",{onClick:()=>n("learning"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-medium transition",children:"Practice"})]})]}),(0,So.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border-l-4 border-purple-500",children:[(0,So.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,So.jsx)("h3",{className:"font-bold text-gray-800",children:"Market Study"}),(0,So.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs px-2 py-1 rounded",children:"Hard"})]}),(0,So.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Master market analysis"}),(0,So.jsxs)("div",{className:"flex justify-between items-center",children:[(0,So.jsxs)("div",{className:"flex space-x-1",children:[(0,So.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),(0,So.jsx)("div",{className:"w-3 h-3 bg-gray-200 rounded-full"})]}),(0,So.jsx)("button",{onClick:()=>n("learning"),className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-full text-sm font-medium transition",children:"Continue"})]})]})]})]}),(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mb-8",children:[(0,So.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Practice"}),(0,So.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,So.jsxs)("button",{onClick:()=>n("cases"),className:"bg-white p-4 rounded-lg shadow-sm flex flex-col items-center justify-center h-24 hover:bg-gray-50 transition transform hover:-translate-y-1",children:[(0,So.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mb-2",children:(0,So.jsx)(wo,{className:"text-green-600 w-5 h-5"})}),(0,So.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Case Practice"})]}),(0,So.jsxs)("button",{onClick:()=>n("learning"),className:"bg-white p-4 rounded-lg shadow-sm flex flex-col items-center justify-center h-24 hover:bg-gray-50 transition transform hover:-translate-y-1",children:[(0,So.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mb-2",children:(0,So.jsx)(_o,{className:"text-blue-600 w-5 h-5"})}),(0,So.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Continue Path"})]}),(0,So.jsxs)("button",{onClick:()=>n("progress"),className:"bg-white p-4 rounded-lg shadow-sm flex flex-col items-center justify-center h-24 hover:bg-gray-50 transition transform hover:-translate-y-1",children:[(0,So.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center mb-2",children:(0,So.jsx)(co,{className:"text-yellow-600 w-5 h-5"})}),(0,So.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progress"})]}),(0,So.jsxs)("button",{className:"bg-white p-4 rounded-lg shadow-sm flex flex-col items-center justify-center h-24 hover:bg-gray-50 transition transform hover:-translate-y-1",children:[(0,So.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mb-2",children:(0,So.jsx)(Eo,{className:"text-purple-600 w-5 h-5"})}),(0,So.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Resources"})]})]})]})]}),(0,So.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:(0,So.jsx)("div",{className:"container mx-auto px-4",children:(0,So.jsxs)("div",{className:"flex justify-around py-3",children:[(0,So.jsxs)("button",{onClick:()=>n("dashboard"),className:"flex flex-col items-center text-blue-600",children:[(0,So.jsx)(lo,{className:"w-6 h-6"}),(0,So.jsx)("span",{className:"text-xs mt-1",children:"Home"})]}),(0,So.jsxs)("button",{onClick:()=>n("progress"),className:"flex flex-col items-center text-gray-500",children:[(0,So.jsx)(go,{className:"w-6 h-6"}),(0,So.jsx)("span",{className:"text-xs mt-1",children:"Progress"})]}),(0,So.jsxs)("button",{onClick:()=>n("learning"),className:"flex flex-col items-center text-gray-500",children:[(0,So.jsx)(uo,{className:"w-6 h-6"}),(0,So.jsx)("span",{className:"text-xs mt-1",children:"Learn"})]}),(0,So.jsxs)("button",{onClick:()=>n("cases"),className:"flex flex-col items-center text-gray-500",children:[(0,So.jsx)(fo,{className:"w-6 h-6"}),(0,So.jsx)("span",{className:"text-xs mt-1",children:"Cases"})]})]})})})]})},To=ao("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Co=ao("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Io=e=>{let{lessons:t,userProgress:n,onStartLesson:r}=e;const s=t.reduce((e,t)=>((e[t.unit]=e[t.unit]||[]).push(t),e),{});let i=0;return(0,So.jsxs)("div",{className:"max-w-3xl mx-auto p-4 sm:p-6 md:p-8 font-sans",children:[(0,So.jsxs)("div",{className:"text-center mb-12",children:[(0,So.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-800 tracking-tight",children:"Guided Mastery Path"}),(0,So.jsx)("p",{className:"mt-2 text-md sm:text-lg text-gray-500",children:"Complete lessons in order to unlock new challenges and skills."})]}),Object.entries(s).map(e=>{let[t,s]=e;return(0,So.jsxs)("div",{className:"mb-12",children:[(0,So.jsx)("h2",{className:"text-2xl font-bold text-gray-700 border-b pb-2 mb-6",children:t}),(0,So.jsx)("div",{className:"space-y-4",children:s.sort((e,t)=>e.order_index-t.order_index).map((e,t)=>{var s,o,a;i++;const l=null===n||void 0===n||null===(s=n.completed_lessons)||void 0===s?void 0:s.includes(e.id),c=(null===n||void 0===n||null===(o=n.completed_lessons)||void 0===o?void 0:o.length)===i-1,u=(null===n||void 0===n||null===(a=n.completed_lessons)||void 0===a?void 0:a.length)<i-1;let h;return h=l?(0,So.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:(0,So.jsx)(To,{size:18})}):c?(0,So.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500 text-white flex items-center justify-center",children:(0,So.jsx)(fo,{size:18})}):(0,So.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center",children:(0,So.jsx)(Co,{size:18})}),(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"flex items-center p-4 rounded-lg transition-all "+(c?"bg-white shadow-md":l?"bg-green-50":"bg-gray-100"),children:[(0,So.jsx)("div",{className:"mr-4",children:h}),(0,So.jsxs)("div",{className:"flex-grow",children:[(0,So.jsx)("h3",{className:"font-semibold "+(u?"text-gray-400":"text-gray-800"),children:e.title}),(0,So.jsxs)("p",{className:"text-sm "+(u?"text-gray-400":"text-gray-500"),children:[e.xp_reward," XP"]})]}),c&&(0,So.jsx)("button",{onClick:()=>r(e),className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Start"})]},e.id)})})]},t)})]})},Ao=ao("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),No=ao("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Po=ao("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ro=ao("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Do=e=>{let{lesson:t,onComplete:n}=e;const[s,i]=(0,r.useState)("LEARNING"),[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),u=t.quiz&&t.quiz.length>0?t.quiz[0]:null;(0,r.useEffect)(()=>{t.content||u?(i(t.content?"LEARNING":"QUIZ"),a(null),c(null)):n(0)},[t,u,n]);const h=()=>{n(t.xp_reward)};return(0,So.jsx)("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4 font-sans",children:(0,So.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,So.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl overflow-hidden",children:[(0,So.jsxs)("div",{className:"p-8",children:[(0,So.jsxs)("div",{className:"text-center mb-8",children:[(0,So.jsx)("h1",{className:"text-4xl font-bold text-gray-800",children:t.title}),(0,So.jsxs)("div",{className:"inline-flex items-center text-yellow-500 font-semibold bg-yellow-100 px-3 py-1 rounded-full mt-2",children:[(0,So.jsx)(Ao,{className:"w-5 h-5 mr-1"})," ",t.xp_reward," XP"]})]}),(0,So.jsxs)(io,{mode:"wait",children:["LEARNING"===s&&t.content&&(0,So.jsx)(Ji.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:(0,So.jsx)("p",{children:t.content})},"learning-view"),"QUIZ"===s&&u&&(0,So.jsxs)(Ji.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[(0,So.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-800 mb-6",children:u.question}),(0,So.jsx)("div",{className:"space-y-3",children:u.options.map((e,t)=>{const n=o===e;return(0,So.jsx)(Ji.button,{onClick:()=>(e=>{"incorrect"===l&&c(null),a(e)})(e),className:`w-full text-left p-5 rounded-lg border-2 text-lg transition-all duration-200 font-medium\n                            ${n?"border-blue-500 bg-blue-50 ring-2 ring-blue-500":"border-gray-300 bg-white hover:border-blue-400"}\n                            ${l?"cursor-not-allowed":""}`,disabled:"correct"===l,whileHover:{scale:l?1:1.02},whileTap:{scale:l?1:.98},children:e},t)})})]},"quiz-view")]})]}),(0,So.jsx)("div",{className:"h-32",children:(0,So.jsx)(io,{children:l&&(0,So.jsxs)(Ji.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"h-full p-6 flex items-center justify-between text-white font-bold text-xl "+("correct"===l?"bg-green-500":"bg-red-500"),children:[(0,So.jsxs)("div",{className:"flex items-center",children:["correct"===l?(0,So.jsx)(No,{className:"w-8 h-8 mr-3"}):(0,So.jsx)(Po,{className:"w-8 h-8 mr-3"}),"correct"===l?"Correct!":"Incorrect, try again."]}),"correct"===l&&(0,So.jsx)(Ji.button,{whileHover:{scale:1.1},onClick:h,className:"px-6 py-2 bg-white text-green-600 rounded-lg shadow-md font-bold",children:"Finish"})]},"feedback")})})]}),(0,So.jsxs)("div",{className:"mt-6",children:["LEARNING"===s&&!l&&(u?(0,So.jsxs)(Ji.button,{whileHover:{scale:1.05},onClick:()=>i("QUIZ"),className:"w-full flex items-center justify-center px-6 py-4 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-colors",children:["Continue ",(0,So.jsx)(Ro,{className:"w-5 h-5 ml-2"})]}):(0,So.jsx)(Ji.button,{whileHover:{scale:1.05},onClick:h,className:"w-full flex items-center justify-center px-6 py-4 bg-green-600 text-white font-bold rounded-lg shadow-lg hover:bg-green-700 transition-colors",children:"Finish"})),"QUIZ"===s&&!l&&(0,So.jsx)(Ji.button,{whileHover:{scale:1.05},onClick:()=>{o&&(o===u.correctAnswer?c("correct"):c("incorrect"))},disabled:!o,className:"w-full flex items-center justify-center px-6 py-4 bg-blue-600 text-white font-bold rounded-lg shadow-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Check"})]})]})})},Oo=ao("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]),Lo=e=>{let{user:t}=e;return t?(0,So.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl shadow-sm p-3 mb-6",children:(0,So.jsxs)("div",{className:"flex items-center justify-end space-x-8",children:[(0,So.jsxs)("div",{className:"flex items-center text-yellow-600",children:[(0,So.jsx)(Oo,{className:"h-6 w-6 mr-2"}),(0,So.jsx)("span",{className:"font-bold text-lg",children:null!=t.caseCoins?t.caseCoins:0})]}),(0,So.jsxs)("div",{className:"flex items-center text-orange-600",children:[(0,So.jsx)(bo,{className:"h-6 w-6 mr-2"}),(0,So.jsx)("span",{className:"font-bold text-lg",children:null!=t.current_streak?t.current_streak:0})]})]})}):null},Mo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},jo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,i||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Mo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==o||null==a)throw new Fo;const l=t<<2|i>>4;if(r.push(l),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Fo extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vo=function(e){return function(e){const t=Mo(e);return jo.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Uo=function(e){try{return jo.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Bo=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,$o=()=>{try{return Bo()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/simum-casequest",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Uo(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},zo=e=>{var t,n;return null===(n=null===(t=$o())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},qo=()=>{var e;return null===(e=$o())||void 0===e?void 0:e.config},Ho=e=>{var t;return null===(t=$o())||void 0===t?void 0:t[`_${e}`]};class Wo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ko(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Go(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Qo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xo.prototype.create)}}class Xo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(Yo,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new Qo(n,i,t)}}const Yo=/\{\$([^}]+)}/g;function Jo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Zo(n)&&Zo(i)){if(!Jo(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Zo(e){return null!==e&&"object"===typeof e}function ea(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ta(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function na(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ra{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=sa),void 0===r.error&&(r.error=sa),void 0===r.complete&&(r.complete=sa);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sa(){}function ia(e){return e&&e._delegate?e._delegate:e}class oa{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const aa="[DEFAULT]";class la{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Wo;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(QA){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===aa?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(QA){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa;return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ca{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new la(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ua=[];var ha;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ha||(ha={}));const da={debug:ha.DEBUG,verbose:ha.VERBOSE,info:ha.INFO,warn:ha.WARN,error:ha.ERROR,silent:ha.SILENT},fa=ha.INFO,pa={[ha.DEBUG]:"log",[ha.VERBOSE]:"log",[ha.INFO]:"info",[ha.WARN]:"warn",[ha.ERROR]:"error"},ma=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pa[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...i)};class ga{constructor(e){this.name=e,this._logLevel=fa,this._logHandler=ma,this._userLogHandler=null,ua.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ha))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?da[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ha.DEBUG,...t),this._logHandler(this,ha.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ha.VERBOSE,...t),this._logHandler(this,ha.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ha.INFO,...t),this._logHandler(this,ha.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ha.WARN,...t),this._logHandler(this,ha.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ha.ERROR,...t),this._logHandler(this,ha.ERROR,...t)}}let ya,va;const wa=new WeakMap,ba=new WeakMap,xa=new WeakMap,_a=new WeakMap,Ea=new WeakMap;let Sa={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ba.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xa.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ca(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ka(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(va||(va=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ia(this),n),Ca(wa.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ca(e.apply(Ia(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Ia(this),t,...r);return xa.set(i,t.sort?t.sort():[t]),Ca(i)}}function Ta(e){return"function"===typeof e?ka(e):(e instanceof IDBTransaction&&function(e){if(ba.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});ba.set(e,t)}(e),t=e,(ya||(ya=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Sa):e);var t}function Ca(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Ca(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&wa.set(t,e)}).catch(()=>{}),Ea.set(t,e),t}(e);if(_a.has(e))return _a.get(e);const t=Ta(e);return t!==e&&(_a.set(e,t),Ea.set(t,e)),t}const Ia=e=>Ea.get(e);const Aa=["get","getKey","getAll","getAllKeys","count"],Na=["put","add","delete","clear"],Pa=new Map;function Ra(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Pa.get(t))return Pa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Na.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Aa.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return Pa.set(t,i),i}Sa=(e=>({...e,get:(t,n,r)=>Ra(t,n)||e.get(t,n,r),has:(t,n)=>!!Ra(t,n)||e.has(t,n)}))(Sa);class Da{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Oa="@firebase/app",La="0.9.13",Ma=new ga("@firebase/app"),ja="@firebase/app-compat",Fa="@firebase/analytics-compat",Va="@firebase/analytics",Ua="@firebase/app-check-compat",Ba="@firebase/app-check",$a="@firebase/auth",za="@firebase/auth-compat",qa="@firebase/database",Ha="@firebase/database-compat",Wa="@firebase/functions",Ka="@firebase/functions-compat",Ga="@firebase/installations",Qa="@firebase/installations-compat",Xa="@firebase/messaging",Ya="@firebase/messaging-compat",Ja="@firebase/performance",Za="@firebase/performance-compat",el="@firebase/remote-config",tl="@firebase/remote-config-compat",nl="@firebase/storage",rl="@firebase/storage-compat",sl="@firebase/firestore",il="@firebase/firestore-compat",ol="firebase",al="[DEFAULT]",ll={[Oa]:"fire-core",[ja]:"fire-core-compat",[Va]:"fire-analytics",[Fa]:"fire-analytics-compat",[Ba]:"fire-app-check",[Ua]:"fire-app-check-compat",[$a]:"fire-auth",[za]:"fire-auth-compat",[qa]:"fire-rtdb",[Ha]:"fire-rtdb-compat",[Wa]:"fire-fn",[Ka]:"fire-fn-compat",[Ga]:"fire-iid",[Qa]:"fire-iid-compat",[Xa]:"fire-fcm",[Ya]:"fire-fcm-compat",[Ja]:"fire-perf",[Za]:"fire-perf-compat",[el]:"fire-rc",[tl]:"fire-rc-compat",[nl]:"fire-gcs",[rl]:"fire-gcs-compat",[sl]:"fire-fst",[il]:"fire-fst-compat","fire-js":"fire-js",[ol]:"fire-js-all"},cl=new Map,ul=new Map;function hl(e,t){try{e.container.addComponent(t)}catch(n){Ma.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function dl(e){const t=e.name;if(ul.has(t))return Ma.debug(`There were multiple attempts to register component ${t}.`),!1;ul.set(t,e);for(const n of cl.values())hl(n,e);return!0}function fl(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const pl=new Xo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ml{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pl.create("app-deleted",{appName:this._name})}}const gl="9.23.0";function yl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:al,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw pl.create("bad-app-name",{appName:String(s)});if(n||(n=qo()),!n)throw pl.create("no-options");const i=cl.get(s);if(i){if(Jo(n,i.options)&&Jo(r,i.config))return i;throw pl.create("duplicate-app",{appName:s})}const o=new ca(s);for(const l of ul.values())o.addComponent(l);const a=new ml(n,r,o);return cl.set(s,a),a}function vl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:al;const t=cl.get(e);if(!t&&e===al&&qo())return yl();if(!t)throw pl.create("no-app",{appName:e});return t}function wl(e,t,n){var r;let s=null!==(r=ll[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ma.warn(e.join(" "))}dl(new oa(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const bl="firebase-heartbeat-store";let xl=null;function _l(){return xl||(xl=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Ca(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Ca(o.result),e.oldVersion,e.newVersion,Ca(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(bl)}}).catch(e=>{throw pl.create("idb-open",{originalErrorMessage:e.message})})),xl}async function El(e,t){try{const n=(await _l()).transaction(bl,"readwrite"),r=n.objectStore(bl);await r.put(t,Sl(e)),await n.done}catch(n){if(n instanceof Qo)Ma.warn(n.message);else{const e=pl.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ma.warn(e.message)}}}function Sl(e){return`${e.name}!${e.options.appId}`}class kl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Cl(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Tl();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Tl(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Il(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Il(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Vo(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Tl(){return(new Date).toISOString().substring(0,10)}class Cl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Go()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await _l();return await t.transaction(bl).objectStore(bl).get(Sl(e))}catch(t){if(t instanceof Qo)Ma.warn(t.message);else{const e=pl.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ma.warn(e.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return El(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return El(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Il(e){return Vo(JSON.stringify({version:2,heartbeats:e})).length}var Al;Al="",dl(new oa("platform-logger",e=>new Da(e),"PRIVATE")),dl(new oa("heartbeat",e=>new kl(e),"PRIVATE")),wl(Oa,La,Al),wl(Oa,La,"esm2017"),wl("fire-js","");wl("firebase","9.23.0","app");function Nl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Pl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rl=Pl,Dl=new Xo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ol=new ga("@firebase/auth");function Ll(e){if(Ol.logLevel<=ha.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ol.error(`Auth (${gl}): ${e}`,...n)}}function Ml(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Vl(e,...n)}function jl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vl(e,...n)}function Fl(e,t,n){const r=Object.assign(Object.assign({},Rl()),{[t]:n});return new Xo("auth","Firebase",r).create(t,{appName:e.name})}function Vl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Dl.create(e,...n)}function Ul(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Vl(t,...r)}}function Bl(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ll(t),new Error(t)}function $l(e,t){e||Bl(t)}function zl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ql(){return"http:"===Hl()||"https:"===Hl()}function Hl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Wl(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ql()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Kl{constructor(e,t){this.shortDelay=e,this.longDelay=t,$l(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ko())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Wl()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gl(e,t){$l(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Ql{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Bl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Bl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Bl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xl={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Yl=new Kl(3e4,6e4);function Jl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Zl(e,t,n,r){return ec(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const o=ea(Object.assign({key:e.config.apiKey},i)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ql.fetch()(nc(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))})}async function ec(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xl),t);try{const t=new rc(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw sc(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sc(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw sc(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw sc(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Fl(e,a,o);Ml(e,a)}}catch(s){if(s instanceof Qo)throw s;Ml(e,"network-request-failed",{message:String(s)})}}async function tc(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Zl(e,t,n,r,s);return"mfaPendingCredential"in i&&Ml(e,"multi-factor-auth-required",{_serverResponse:i}),i}function nc(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?Gl(e.config,s):`${e.config.apiScheme}://${s}`}class rc{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(jl(this.auth,"network-request-failed")),Yl.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sc(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=jl(e,t,r);return s.customData._tokenResponse=n,s}function ic(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function oc(e){return 1e3*Number(e)}function ac(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ll("JWT malformed, contained fewer than 3 sections"),null;try{const e=Uo(n);return e?JSON.parse(e):(Ll("Failed to decode base64 JWT payload"),null)}catch(s){return Ll("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}async function lc(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Qo&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class cc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class uc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ic(this.lastLoginAt),this.creationTime=ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hc(e){var t;const n=e.auth,r=await e.getIdToken(),s=await lc(e,async function(e,t){return Zl(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Ul(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=Nl(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&i.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new uc(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class dc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ul(e.idToken,"internal-error"),Ul("undefined"!==typeof e.idToken,"internal-error"),Ul("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=ac(e);return Ul(t,"internal-error"),Ul("undefined"!==typeof t.exp,"internal-error"),Ul("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ul(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await ec(e,{},async()=>{const n=ea({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=nc(e,r,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ql.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new dc;return n&&(Ul("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Ul("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Ul("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dc,this.toJSON())}_performRefresh(){return Bl("not implemented")}}function fc(e,t){Ul("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class pc{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=Nl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uc(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await lc(this,this.stsTokenManager.getToken(this.auth,e));return Ul(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ia(e),r=await n.getIdToken(t),s=ac(r);Ul(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,o=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ic(oc(s.auth_time)),issuedAtTime:ic(oc(s.iat)),expirationTime:ic(oc(s.exp)),signInProvider:o||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ia(e);await hc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ul(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ul(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await hc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await lc(this,async function(e,t){return Zl(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:x,stsTokenManager:_}=t;Ul(v&&_,e,"internal-error");const E=dc.fromJSON(this.name,_);Ul("string"===typeof v,e,"internal-error"),fc(u,e.name),fc(h,e.name),Ul("boolean"===typeof w,e,"internal-error"),Ul("boolean"===typeof b,e,"internal-error"),fc(d,e.name),fc(f,e.name),fc(p,e.name),fc(m,e.name),fc(g,e.name),fc(y,e.name);const S=new pc({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new dc;r.updateFromServerResponse(t);const s=new pc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await hc(s),s}}const mc=new Map;function gc(e){$l(e instanceof Function,"Expected a class definition");let t=mc.get(e);return t?($l(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mc.set(e,t),t)}class yc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yc.type="NONE";const vc=yc;function wc(e,t,n){return`firebase:${e}:${t}:${n}`}class bc{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=wc(this.userKey,r.apiKey,s),this.fullPersistenceKey=wc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new bc(gc(vc),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||gc(vc);const i=wc(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(i);if(t){const n=pc._fromJSON(e,t);l!==s&&(o=n),s=l;break}}catch(QA){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(QA){}})),new bc(s,e,n)):new bc(s,e,n)}}function xc(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_c(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Cc(t))return"Blackberry";if(Ic(t))return"Webos";if(Ec(t))return"Safari";if((t.includes("chrome/")||Sc(t))&&!t.includes("edge/"))return"Chrome";if(Tc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function _c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/firefox\//i.test(e)}function Ec(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/crios\//i.test(e)}function kc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/iemobile/i.test(e)}function Tc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/android/i.test(e)}function Cc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/blackberry/i.test(e)}function Ic(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/webos/i.test(e)}function Ac(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nc(){return function(){const e=Ko();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko();return Ac(e)||Tc(e)||Ic(e)||Cc(e)||/windows phone/i.test(e)||kc(e)}function Rc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xc(Ko());break;case"Worker":t=`${xc(Ko())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${gl}/${r}`}async function Dc(e,t){return Zl(e,"GET","/v2/recaptchaConfig",Jl(e,t))}function Oc(e){return void 0!==e&&void 0!==e.enterprise}class Lc{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function Mc(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=jl("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function jc(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Fc{constructor(e){this.type="recaptcha-enterprise",this.auth=$c(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Oc(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Dc(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Lc(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Oc(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Mc("https://www.google.com/recaptcha/enterprise.js?render="+s).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Vc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Fc(e);let i;try{i=await s.verify(n)}catch(a){i=await s.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Uc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Bc{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zc(this),this.idTokenSubscription=new zc(this),this.beforeStateQueue=new Uc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dl,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gc(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await bc.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==i||!(null===o||void 0===o?void 0:o.user)||(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ul(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hc(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?ia(e):null;return t&&Ul(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ul(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gc(e))})}async initializeRecaptchaConfig(){const e=await Dc(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Lc(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Fc(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gc(e)||this._popupRedirectResolver;Ul(t,this,"argument-error"),this.redirectPersistenceManager=await bc.create(this,[gc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return Ul(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ul(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ol.logLevel<=ha.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ol.warn(`Auth (${gl}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function $c(e){return ia(e)}class zc{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ra(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ul(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qc(e,t,n){const r=$c(e);Ul(r._canInitEmulator,r,"emulator-config-failed"),Ul(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Hc(t),{host:o,port:a}=function(e){const t=Hc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Wc(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Wc(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Hc(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wc(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Kc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bl("not implemented")}_getIdTokenResponse(e){return Bl("not implemented")}_linkToIdToken(e,t){return Bl("not implemented")}_getReauthenticationResolver(e){return Bl("not implemented")}}async function Gc(e,t){return Zl(e,"POST","/v1/accounts:update",t)}async function Qc(e,t){return tc(e,"POST","/v1/accounts:signInWithPassword",Jl(e,t))}class Xc extends Kc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Xc(e,t,"password")}static _fromEmailAndCode(e,t){return new Xc(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Vc(e,n,"signInWithPassword");return Qc(e,t)}return Qc(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Vc(e,n,"signInWithPassword");return Qc(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return tc(e,"POST","/v1/accounts:signInWithEmailLink",Jl(e,t))}(e,{email:this._email,oobCode:this._password});default:Ml(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Gc(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return tc(e,"POST","/v1/accounts:signInWithEmailLink",Jl(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ml(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yc(e,t){return tc(e,"POST","/v1/accounts:signInWithIdp",Jl(e,t))}class Jc extends Kc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ml("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=Nl(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Jc(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Yc(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Yc(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yc(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ea(t)}return e}}const Zc={USER_NOT_FOUND:"user-not-found"};class eu extends Kc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return tc(e,"POST","/v1/accounts:signInWithPhoneNumber",Jl(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await tc(e,"POST","/v1/accounts:signInWithPhoneNumber",Jl(e,t));if(n.temporaryProof)throw sc(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return tc(e,"POST","/v1/accounts:signInWithPhoneNumber",Jl(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Zc)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new eu({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class tu{constructor(e){var t,n,r,s,i,o;const a=ta(na(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ul(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=a.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=ta(na(e)).link,n=t?ta(na(t)).deep_link_id:null,r=ta(na(e)).deep_link_id;return(r?ta(na(r)).link:null)||r||n||t||e}(e);try{return new tu(t)}catch(QA){return null}}}class nu{constructor(){this.providerId=nu.PROVIDER_ID}static credential(e,t){return Xc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=tu.parseLink(t);return Ul(n,"argument-error"),Xc._fromEmailAndCode(e,n.code,n.tenantId)}}nu.PROVIDER_ID="password",nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ru{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class su extends ru{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class iu extends su{constructor(){super("facebook.com")}static credential(e){return Jc._fromParams({providerId:iu.PROVIDER_ID,signInMethod:iu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iu.credentialFromTaggedObject(e)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return iu.credential(t.oauthAccessToken)}catch(QA){return null}}}iu.FACEBOOK_SIGN_IN_METHOD="facebook.com",iu.PROVIDER_ID="facebook.com";class ou extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jc._fromParams({providerId:ou.PROVIDER_ID,signInMethod:ou.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ou.credentialFromTaggedObject(e)}static credentialFromError(e){return ou.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ou.credential(n,r)}catch(QA){return null}}}ou.GOOGLE_SIGN_IN_METHOD="google.com",ou.PROVIDER_ID="google.com";class au extends su{constructor(){super("github.com")}static credential(e){return Jc._fromParams({providerId:au.PROVIDER_ID,signInMethod:au.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return au.credentialFromTaggedObject(e)}static credentialFromError(e){return au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return au.credential(t.oauthAccessToken)}catch(QA){return null}}}au.GITHUB_SIGN_IN_METHOD="github.com",au.PROVIDER_ID="github.com";class lu extends su{constructor(){super("twitter.com")}static credential(e,t){return Jc._fromParams({providerId:lu.PROVIDER_ID,signInMethod:lu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lu.credentialFromTaggedObject(e)}static credentialFromError(e){return lu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return lu.credential(n,r)}catch(QA){return null}}}async function cu(e,t){return tc(e,"POST","/v1/accounts:signUp",Jl(e,t))}lu.TWITTER_SIGN_IN_METHOD="twitter.com",lu.PROVIDER_ID="twitter.com";class uu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await pc._fromIdTokenResponse(e,n,r),i=hu(n);return new uu({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hu(n);return new uu({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class du extends Qo{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,du.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new du(e,t,n,r)}}function fu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw du._fromErrorAndOperation(e,n,t,r);throw n})}async function pu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await lc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return uu._forOperation(e,"link",r)}async function mu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const i=await lc(e,fu(r,s,t,e),n);Ul(i.idToken,r,"internal-error");const o=ac(i.idToken);Ul(o,r,"internal-error");const{sub:a}=o;return Ul(e.uid===a,r,"user-mismatch"),uu._forOperation(e,s,i)}catch(i){throw"auth/user-not-found"===(null===i||void 0===i?void 0:i.code)&&Ml(r,"user-mismatch"),i}}async function gu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await fu(e,r,t),i=await uu._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function yu(e,t){return gu($c(e),t)}new WeakMap;const vu="__sak";class wu{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vu,"1"),this.storage.removeItem(vu),Promise.resolve(!0)):Promise.resolve(!1)}catch(QA){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class bu extends wu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ko();return Ec(e)||Ac(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Pc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Nc()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bu.type="LOCAL";const xu=bu;class _u extends wu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_u.type="SESSION";const Eu=_u;class Su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Su(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ku(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Su.receivers=[];class Tu{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=ku("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Cu(){return window}function Iu(){return"undefined"!==typeof Cu().WorkerGlobalScope&&"function"===typeof Cu().importScripts}const Au="firebaseLocalStorageDb",Nu="firebaseLocalStorage",Pu="fbase_key";class Ru{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Du(e,t){return e.transaction([Nu],t?"readwrite":"readonly").objectStore(Nu)}function Ou(){const e=indexedDB.open(Au,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Nu,{keyPath:Pu})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Nu)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Au);return new Ru(e).toPromise()}(),t(await Ou()))})})}async function Lu(e,t,n){const r=Du(e,!0).put({[Pu]:t,value:n});return new Ru(r).toPromise()}function Mu(e,t){const n=Du(e,!0).delete(t);return new Ru(n).toPromise()}class ju{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ou()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Su._getInstance(Iu()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Tu(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(QA){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ou();return await Lu(e,vu,"1"),await Mu(e,vu),!0}catch(QA){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Lu(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Du(e,!1).get(t),r=await new Ru(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mu(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Du(e,!1).getAll();return new Ru(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ju.type="LOCAL";const Fu=ju;jc("rcb"),new Kl(3e4,6e4);const Vu="recaptcha";async function Uu(e,t,n){var r;const s=await n.verify();try{let i;if(Ul("string"===typeof s,e,"argument-error"),Ul(n.type===Vu,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ul("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Zl(e,"POST","/v2/accounts/mfaEnrollment:start",Jl(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Ul("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ul(n,e,"missing-multi-factor-info");const o=await function(e,t){return Zl(e,"POST","/v2/accounts/mfaSignIn:start",Jl(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Zl(e,"POST","/v1/accounts:sendVerificationCode",Jl(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class Bu{constructor(e){this.providerId=Bu.PROVIDER_ID,this.auth=$c(e)}verifyPhoneNumber(e,t){return Uu(this.auth,e,ia(t))}static credential(e,t){return eu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Bu.credentialFromTaggedObject(t)}static credentialFromError(e){return Bu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?eu._fromTokenResponse(n,r):null}}function $u(e,t){return t?gc(t):(Ul(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Bu.PROVIDER_ID="phone",Bu.PHONE_SIGN_IN_METHOD="phone";class zu extends Kc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qu(e){return gu(e.auth,new zu(e),e.bypassAuthState)}function Hu(e){const{auth:t,user:n}=e;return Ul(n,t,"internal-error"),mu(n,new zu(e),e.bypassAuthState)}async function Wu(e){const{auth:t,user:n}=e;return Ul(n,t,"internal-error"),pu(n,new zu(e),e.bypassAuthState)}class Ku{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qu;case"linkViaPopup":case"linkViaRedirect":return Wu;case"reauthViaPopup":case"reauthViaRedirect":return Hu;default:Ml(this.auth,"internal-error")}}resolve(e){$l(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$l(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gu=new Kl(2e3,1e4);class Qu extends Ku{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Qu.currentPopupAction&&Qu.currentPopupAction.cancel(),Qu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ul(e,this.auth,"internal-error"),e}async onExecution(){$l(1===this.filter.length,"Popup operations only handle one event");const e=ku();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(jl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(jl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jl(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Gu.get())};e()}}Qu.currentPopupAction=null;const Xu=new Map;class Yu extends Ku{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=eh(t),r=Zu(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ju(e,t){Xu.set(e._key(),t)}function Zu(e){return gc(e._redirectPersistence)}function eh(e){return wc("pendingRedirect",e.config.apiKey,e.name)}async function th(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=$c(e),s=$u(r,t),i=new Yu(r,s,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class nh{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sh(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!sh(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rh(e))}saveEventToCache(e){this.cachedEventUids.add(rh(e)),this.lastProcessedEventTime=Date.now()}}function rh(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function sh(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const ih=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oh=/^https?/;async function ah(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Zl(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(lh(n))return}catch(QA){}Ml(e,"unauthorized-domain")}function lh(e){const t=zl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!oh.test(n))return!1;if(ih.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const ch=new Kl(3e4,6e4);function uh(){const e=Cu().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let hh=null;function dh(e){return hh=hh||function(e){return new Promise((t,n)=>{var r,s,i;function o(){uh(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{uh(),n(jl(e,"network-request-failed"))},timeout:ch.get()})}if(null===(s=null===(r=Cu().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Cu().gapi)||void 0===i?void 0:i.load)){const t=jc("iframefcb");return Cu()[t]=()=>{gapi.load?o():n(jl(e,"network-request-failed"))},Mc(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw hh=null,e})}(e),hh}const fh=new Kl(5e3,15e3),ph={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gh(e){const t=e.config;Ul(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gl(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:gl},s=mh.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ea(r).slice(1)}`}const yh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vh{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},yh),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ko().toLowerCase();n&&(a=Sc(c)?"_blank":n),_c(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Ac(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ko())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new vh(null);const h=window.open(t||"",a,u);Ul(h,e,"popup-blocked");try{h.focus()}catch(d){}return new vh(h)}const bh="__/auth/handler",xh="emulator/auth/handler",_h=encodeURIComponent("fac");async function Eh(e,t,n,r,s,i){Ul(e.config.authDomain,e,"auth-domain-config-required"),Ul(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gl,eventId:s};if(t instanceof ru){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))o[e]=t}if(t instanceof su){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${_h}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${bh}`;return Gl(t,xh)}(e)}?${ea(a).slice(1)}${c}`}const Sh="webStorageSupport";const kh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Eu,this._completeRedirectFn=th,this._overrideRedirectResult=Ju}async _openPopup(e,t,n,r){var s;$l(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return wh(e,await Eh(e,t,n,zl(),r),ku())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Cu().location.href=e}(await Eh(e,t,n,zl(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):($l(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await dh(e),n=Cu().gapi;return Ul(n,e,"internal-error"),t.open({where:document.body,url:gh(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ph,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=jl(e,"network-request-failed"),i=Cu().setTimeout(()=>{r(s)},fh.get());function o(){Cu().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}(e),n=new nh(e);return t.register("authEvent",t=>{Ul(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sh,{type:Sh},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Sh];void 0!==s&&t(!!s),Ml(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ah(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pc()||Ec()||Ac()}};var Th="@firebase/auth",Ch="0.23.2";class Ih{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ul(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ah=Ho("authIdTokenMaxAge")||300;let Nh=null;var Ph;Ph="Browser",dl(new oa("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ul(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ph,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rc(Ph)},c=new Bc(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),dl(new oa("auth-internal",e=>(e=>new Ih(e))($c(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),wl(Th,Ch,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ph)),wl(Th,Ch,"esm2017");var Rh,Dh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Oh={},Lh=Lh||{},Mh=Dh||self;function jh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Fh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Vh="closure_uid_"+(1e9*Math.random()>>>0),Uh=0;function Bh(e,t,n){return e.call.apply(e.bind,arguments)}function $h(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zh(e,t,n){return(zh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bh:$h).apply(null,arguments)}function qh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Hh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function Wh(){this.s=this.s,this.o=this.o}Wh.prototype.s=!1,Wh.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Vh)&&e[Vh]||(e[Vh]=++Uh))},Wh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Kh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Gh(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qh(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(jh(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function Xh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Xh.prototype.h=function(){this.defaultPrevented=!0};var Yh=function(){if(!Mh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Mh.addEventListener("test",()=>{},t),Mh.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Jh(e){return/^[\s\xa0]*$/.test(e)}function Zh(){var e=Mh.navigator;return e&&(e=e.userAgent)?e:""}function ed(e){return-1!=Zh().indexOf(e)}function td(e){return td[" "](e),e}td[" "]=function(){};var nd,rd,sd=ed("Opera"),id=ed("Trident")||ed("MSIE"),od=ed("Edge"),ad=od||id,ld=ed("Gecko")&&!(-1!=Zh().toLowerCase().indexOf("webkit")&&!ed("Edge"))&&!(ed("Trident")||ed("MSIE"))&&!ed("Edge"),cd=-1!=Zh().toLowerCase().indexOf("webkit")&&!ed("Edge");function ud(){var e=Mh.document;return e?e.documentMode:void 0}e:{var hd="",dd=function(){var e=Zh();return ld?/rv:([^\);]+)(\)|;)/.exec(e):od?/Edge\/([\d\.]+)/.exec(e):id?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):cd?/WebKit\/(\S+)/.exec(e):sd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(dd&&(hd=dd?dd[1]:""),id){var fd=ud();if(null!=fd&&fd>parseFloat(hd)){nd=String(fd);break e}}nd=hd}if(Mh.document&&id){var pd=ud();rd=pd||(parseInt(nd,10)||void 0)}else rd=void 0;var md=rd;function gd(e,t){if(Xh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ld){e:{try{td(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:yd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gd.$.h.call(this)}}Hh(gd,Xh);var yd={2:"touch",3:"pen",4:"mouse"};gd.prototype.h=function(){gd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vd="closure_listenable_"+(1e6*Math.random()|0),wd=0;function bd(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++wd,this.fa=this.ia=!1}function xd(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _d(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ed(e){const t={};for(const n in e)t[n]=e[n];return t}const Sd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kd(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<Sd.length;t++)n=Sd[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Td(e){this.src=e,this.g={},this.h=0}function Cd(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Kh(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(xd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Id(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}Td.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Id(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new bd(t,this.src,i,!!r,s)).ia=n,e.push(t)),t};var Ad="closure_lm_"+(1e6*Math.random()|0),Nd={};function Pd(e,t,n,r,s){if(r&&r.once)return Dd(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Pd(e,t[i],n,r,s);return null}return n=Ud(n),e&&e[vd]?e.O(t,n,Fh(r)?!!r.capture:!!r,s):Rd(e,t,n,!1,r,s)}function Rd(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Fh(s)?!!s.capture:!!s,a=Fd(e);if(a||(e[Ad]=a=new Td(e)),(n=a.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=jd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yh||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Md(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Dd(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Dd(e,t[i],n,r,s);return null}return n=Ud(n),e&&e[vd]?e.P(t,n,Fh(r)?!!r.capture:!!r,s):Rd(e,t,n,!0,r,s)}function Od(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Od(e,t[i],n,r,s);else r=Fh(r)?!!r.capture:!!r,n=Ud(n),e&&e[vd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Id(i=e.g[t],n,r,s))&&(xd(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Fd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Id(t,n,r,s)),(n=-1<e?t[e]:null)&&Ld(n))}function Ld(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[vd])Cd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Md(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fd(t))?(Cd(n,e),0==n.h&&(n.src=null,t[Ad]=null)):xd(e)}}}function Md(e){return e in Nd?Nd[e]:Nd[e]="on"+e}function jd(e,t){if(e.fa)e=!0;else{t=new gd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ld(e),e=n.call(r,t)}return e}function Fd(e){return(e=e[Ad])instanceof Td?e:null}var Vd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ud(e){return"function"===typeof e?e:(e[Vd]||(e[Vd]=function(t){return e.handleEvent(t)}),e[Vd])}function Bd(){Wh.call(this),this.i=new Td(this),this.S=this,this.J=null}function $d(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Xh(t,e);else if(t instanceof Xh)t.target=t.target||e;else{var s=t;kd(t=new Xh(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=zd(o,r,!0,t)&&s}if(s=zd(o=t.g=e,r,!0,t)&&s,s=zd(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=zd(o=t.g=n[i],r,!1,t)&&s}function zd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Cd(e.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}Hh(Bd,Wh),Bd.prototype[vd]=!0,Bd.prototype.removeEventListener=function(e,t,n,r){Od(this,e,t,n,r)},Bd.prototype.N=function(){if(Bd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xd(n[r]);delete t.g[e],t.h--}}this.J=null},Bd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Bd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qd=Mh.JSON.stringify;function Hd(){var e=Jd;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Wd=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Kd,e=>e.reset());class Kd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gd(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Qd(e){Mh.setTimeout(()=>{throw e},0)}let Xd,Yd=!1,Jd=new class{constructor(){this.h=this.g=null}add(e,t){const n=Wd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Zd=()=>{const e=Mh.Promise.resolve(void 0);Xd=()=>{e.then(ef)}};var ef=()=>{for(var e;e=Hd();){try{e.h.call(e.g)}catch(n){Qd(n)}var t=Wd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yd=!1};function tf(e,t){Bd.call(this),this.h=e||1,this.g=t||Mh,this.j=zh(this.qb,this),this.l=Date.now()}function nf(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function rf(e,t,n){if("function"===typeof e)n&&(e=zh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Mh.setTimeout(e,t||0)}function sf(e){e.g=rf(()=>{e.g=null,e.i&&(e.i=!1,sf(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Hh(tf,Bd),(Rh=tf.prototype).ga=!1,Rh.T=null,Rh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$d(this,"tick"),this.ga&&(nf(this),this.start()))}},Rh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Rh.N=function(){tf.$.N.call(this),nf(this),delete this.g};class of extends Wh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sf(this)}N(){super.N(),this.g&&(Mh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function af(e){Wh.call(this),this.h=e,this.g={}}Hh(af,Wh);var lf=[];function cf(e,t,n,r){Array.isArray(n)||(n&&(lf[0]=n.toString()),n=lf);for(var s=0;s<n.length;s++){var i=Pd(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function uf(e){_d(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ld(e)},e),e.g={}}function hf(){this.g=!0}function df(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return qd(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}af.prototype.N=function(){af.$.N.call(this),uf(this)},af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hf.prototype.Ea=function(){this.g=!1},hf.prototype.info=function(){};var ff={},pf=null;function mf(){return pf=pf||new Bd}function gf(e){Xh.call(this,ff.Ta,e)}function yf(e){const t=mf();$d(t,new gf(t))}function vf(e,t){Xh.call(this,ff.STAT_EVENT,e),this.stat=t}function wf(e){const t=mf();$d(t,new vf(t,e))}function bf(e,t){Xh.call(this,ff.Ua,e),this.size=t}function xf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Mh.setTimeout(function(){e()},t)}ff.Ta="serverreachability",Hh(gf,Xh),ff.STAT_EVENT="statevent",Hh(vf,Xh),ff.Ua="timingevent",Hh(bf,Xh);var _f={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ef={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Sf(){}function kf(e){return e.h||(e.h=e.i())}function Tf(){}Sf.prototype.h=null;var Cf,If={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Af(){Xh.call(this,"d")}function Nf(){Xh.call(this,"c")}function Pf(){}function Rf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new af(this),this.P=Of,e=ad?125:void 0,this.V=new tf(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Df}function Df(){this.i=null,this.g="",this.h=!1}Hh(Af,Xh),Hh(Nf,Xh),Hh(Pf,Sf),Pf.prototype.g=function(){return new XMLHttpRequest},Pf.prototype.i=function(){return{}},Cf=new Pf;var Of=45e3,Lf={},Mf={};function jf(e,t,n){e.L=1,e.v=np(Yf(t)),e.s=n,e.S=!0,Ff(e,null)}function Ff(e,t){e.G=Date.now(),$f(e),e.A=Yf(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),mp(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Df,e.g=gm(e.l,n?t:null,!e.s),0<e.O&&(e.M=new of(zh(e.Pa,e,e.g),e.O)),cf(e.U,e.g,"readystatechange",e.nb),t=e.I?Ed(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),yf(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Vf(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Uf(e,t,n){let r,s=!0;for(;!e.J&&e.C<n.length;){if(r=Bf(e,n),r==Mf){4==t&&(e.o=4,wf(14),s=!1),df(e.j,e.m,null,"[Incomplete Response]");break}if(r==Lf){e.o=4,wf(15),df(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}df(e.j,e.m,r,null),Kf(e,r)}Vf(e)&&r!=Mf&&r!=Lf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wf(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lm(t),t.M=!0,wf(11))):(df(e.j,e.m,n,"[Invalid Chunked Response]"),Wf(e),Hf(e))}function Bf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Mf:(n=Number(t.substring(n,r)),isNaN(n)?Lf:(r+=1)+n>t.length?Mf:(t=t.slice(r,r+n),e.C=r+n,t))}function $f(e){e.Y=Date.now()+e.P,zf(e,e.P)}function zf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xf(zh(e.lb,e),t)}function qf(e){e.B&&(Mh.clearTimeout(e.B),e.B=null)}function Hf(e){0==e.l.H||e.J||hm(e.l,e)}function Wf(e){qf(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,nf(e.V),uf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Kf(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||_p(n.i,e)))if(!e.K&&_p(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;um(n),em(n)}am(n),wf(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=xf(zh(n.ib,n),6e3));if(1>=xp(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else fm(n,11)}else if((e.K||n.g==e)&&um(n),!Jh(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=c[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ep(i,i.h),i.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,tp(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=mm(r,r.J?r.pa:null,r.Y),o.K){Sp(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(qf(a),$f(a)),r.g=o}else om(r);0<n.j.length&&nm(n)}else"stop"!=c[0]&&"close"!=c[0]||fm(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?fm(n,7):Zp(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}yf()}catch(c){}}function Gf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(jh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(jh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(jh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}(Rh=Rf.prototype).setTimeout=function(e){this.P=e},Rh.nb=function(e){e=e.target;const t=this.M;t&&3==Kp(e)?t.l():this.Pa(e)},Rh.Pa=function(e){try{if(e==this.g)e:{const u=Kp(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||ad||this.g&&(this.h.h||this.g.ja()||Gp(this.g)))){this.J||4!=u||7==t||yf(),qf(this);var n=this.g.da();this.ca=n;t:if(Vf(this)){var r=Gp(this.g);e="";var s=r.length,i=4==Kp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Wf(this),Hf(this);var o="";break t}this.h.i=new Mh.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jh(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,wf(12),Wf(this),Hf(this);break e}df(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kf(this,n)}this.S?(Uf(this,u,o),ad&&this.i&&3==u&&(cf(this.U,this.V,"tick",this.mb),this.V.start())):(df(this.j,this.m,o,null),Kf(this,o)),4==u&&Wf(this),this.i&&!this.J&&(4==u?hm(this.l,this):(this.i=!1,$f(this)))}else(function(e){const t={};e=(e.g&&2<=Kp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Jh(e[r]))continue;var n=Gd(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,wf(12)):(this.o=0,wf(13)),Wf(this),Hf(this)}}}catch(u){}},Rh.mb=function(){if(this.g){var e=Kp(this.g),t=this.g.ja();this.C<t.length&&(qf(this),Uf(this,e,t),this.i&&4!=e&&$f(this))}},Rh.cancel=function(){this.J=!0,Wf(this)},Rh.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(yf(),wf(17)),Wf(this),this.o=2,Hf(this)):zf(this,this.Y-e)};var Qf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xf(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xf){this.h=e.h,Jf(this,e.j),this.s=e.s,this.g=e.g,Zf(this,e.m),this.l=e.l;var t=e.i,n=new hp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ep(this,n),this.o=e.o}else e&&(t=String(e).match(Qf))?(this.h=!1,Jf(this,t[1]||"",!0),this.s=rp(t[2]||""),this.g=rp(t[3]||"",!0),Zf(this,t[4]),this.l=rp(t[5]||"",!0),ep(this,t[6]||"",!0),this.o=rp(t[7]||"")):(this.h=!1,this.i=new hp(null,this.h))}function Yf(e){return new Xf(e)}function Jf(e,t,n){e.j=n?rp(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ep(e,t,n){t instanceof hp?(e.i=t,function(e,t){t&&!e.j&&(dp(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(fp(this,t),mp(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=sp(t,cp)),e.i=new hp(t,e.h))}function tp(e,t,n){e.i.set(t,n)}function np(e){return tp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rp(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ip),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ip(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(sp(t,op,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(sp(t,op,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(sp(n,"/"==n.charAt(0)?lp:ap,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",sp(n,up)),e.join("")};var op=/[#\/\?@]/g,ap=/[#\?:]/g,lp=/[#\?]/g,cp=/[#\?@]/g,up=/#/g;function hp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function dp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function fp(e,t){dp(e),t=gp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function pp(e,t){return dp(e),t=gp(e,t),e.g.has(t)}function mp(e,t,n){fp(e,t),0<n.length&&(e.i=null,e.g.set(gp(e,t),Gh(n)),e.h+=n.length)}function gp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Rh=hp.prototype).add=function(e,t){dp(this),this.i=null,e=gp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Rh.forEach=function(e,t){dp(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Rh.ta=function(){dp(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},Rh.Z=function(e){dp(this);let t=[];if("string"===typeof e)pp(this,e)&&(t=t.concat(this.g.get(gp(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Rh.set=function(e,t){return dp(this),this.i=null,pp(this,e=gp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Rh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Rh.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};var yp=class{constructor(e,t){this.g=e,this.map=t}};function vp(e){this.l=e||wp,Mh.PerformanceNavigationTiming?e=0<(e=Mh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Mh.g&&Mh.g.Ka&&Mh.g.Ka()&&Mh.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wp=10;function bp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function xp(e){return e.h?1:e.g?e.g.size:0}function _p(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ep(e,t){e.g?e.g.add(t):e.h=t}function Sp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function kp(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Gh(e.i)}vp.prototype.cancel=function(){if(this.i=kp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Tp,Cp=class{stringify(e){return Mh.JSON.stringify(e,void 0)}parse(e){return Mh.JSON.parse(e,void 0)}};function Ip(){this.g=new Cp}function Ap(e,t,n){const r=n||"";try{Gf(e,function(e,n){let s=e;Fh(e)&&(s=qd(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Np(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function Pp(e){this.l=e.fc||null,this.j=e.ob||!1}function Rp(e,t){Bd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Dp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hh(Pp,Sf),Pp.prototype.g=function(){return new Rp(this.l,this.j)},Pp.prototype.i=(Tp={},function(){return Tp}),Hh(Rp,Bd);var Dp=0;function Op(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Lp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mp(e)}function Mp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Rh=Rp.prototype).open=function(e,t){if(this.readyState!=Dp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mp(this)},Rh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Mh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Rh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lp(this)),this.readyState=Dp},Rh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mp(this)),this.g&&(this.readyState=3,Mp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Mh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Op(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Rh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Lp(this):Mp(this),3==this.readyState&&Op(this)}},Rh.Za=function(e){this.g&&(this.response=this.responseText=e,Lp(this))},Rh.Ya=function(e){this.g&&(this.response=e,Lp(this))},Rh.ka=function(){this.g&&Lp(this)},Rh.setRequestHeader=function(e,t){this.v.append(e,t)},Rh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Rh.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jp=Mh.JSON.parse;function Fp(e){Bd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Vp,this.L=this.M=!1}Hh(Fp,Bd);var Vp="",Up=/^https?$/i,Bp=["POST","PUT"];function $p(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,zp(e),Hp(e)}function zp(e){e.F||(e.F=!0,$d(e,"complete"),$d(e,"error"))}function qp(e){if(e.h&&"undefined"!=typeof Lh&&(!e.C[1]||4!=Kp(e)||2!=e.da()))if(e.v&&4==Kp(e))rf(e.La,0,e);else if($d(e,"readystatechange"),4==Kp(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var s=String(e.I).match(Qf)[1]||null;!s&&Mh.self&&Mh.self.location&&(s=Mh.self.location.protocol.slice(0,-1)),r=!Up.test(s?s.toLowerCase():"")}n=r}if(n)$d(e,"complete"),$d(e,"success");else{e.m=6;try{var i=2<Kp(e)?e.g.statusText:""}catch(o){i=""}e.j=i+" ["+e.da()+"]",zp(e)}}finally{Hp(e)}}}function Hp(e,t){if(e.g){Wp(e);const r=e.g,s=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||$d(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Wp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Mh.clearTimeout(e.A),e.A=null)}function Kp(e){return e.g?e.g.readyState:0}function Gp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Vp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Zm){return null}}function Qp(e){let t="";return _d(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Xp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Qp(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):tp(e,t,n))}function Yp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Jp(e){this.Ga=0,this.j=[],this.l=new hf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yp("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yp("baseRetryDelayMs",5e3,e),this.hb=Yp("retryDelaySeedMs",1e4,e),this.eb=Yp("forwardChannelMaxRetries",2,e),this.xa=Yp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new vp(e&&e.concurrentRequestLimit),this.Ja=new Ip,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zp(e){if(tm(e),3==e.H){var t=e.W++,n=Yf(e.I);if(tp(n,"SID",e.K),tp(n,"RID",t),tp(n,"TYPE","terminate"),sm(e,n),(t=new Rf(e,e.l,t)).L=2,t.v=np(Yf(n)),n=!1,Mh.navigator&&Mh.navigator.sendBeacon)try{n=Mh.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Mh.Image&&((new Image).src=t.v,n=!0),n||(t.g=gm(t.l,null),t.g.ha(t.v)),t.G=Date.now(),$f(t)}pm(e)}function em(e){e.g&&(lm(e),e.g.cancel(),e.g=null)}function tm(e){em(e),e.u&&(Mh.clearTimeout(e.u),e.u=null),um(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Mh.clearTimeout(e.m),e.m=null)}function nm(e){if(!bp(e.i)&&!e.m){e.m=!0;var t=e.Na;Xd||Zd(),Yd||(Xd(),Yd=!0),Jd.add(t,e),e.C=0}}function rm(e,t){var n;n=t?t.m:e.W++;const r=Yf(e.I);tp(r,"SID",e.K),tp(r,"RID",n),tp(r,"AID",e.V),sm(e,r),e.o&&e.s&&Xp(r,e.o,e.s),n=new Rf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=im(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ep(e.i,n),jf(n,r,t)}function sm(e,t){e.na&&_d(e.na,function(e,n){tp(t,n,e)}),e.h&&Gf({},function(e,n){tp(t,n,e)})}function im(e,t,n){n=Math.min(e.j.length,n);var r=e.h?zh(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const a=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{Ap(a,e,"req"+n+"_")}catch(ug){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function om(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Xd||Zd(),Yd||(Xd(),Yd=!0),Jd.add(t,e),e.A=0}}function am(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=xf(zh(e.Ma,e),dm(e,e.A)),e.A++,!0)}function lm(e){null!=e.B&&(Mh.clearTimeout(e.B),e.B=null)}function cm(e){e.g=new Rf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Yf(e.wa);tp(t,"RID","rpc"),tp(t,"SID",e.K),tp(t,"AID",e.V),tp(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&tp(t,"TO",e.qa),tp(t,"TYPE","xmlhttp"),sm(e,t),e.o&&e.s&&Xp(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=np(Yf(t)),n.s=null,n.S=!0,Ff(n,e)}function um(e){null!=e.v&&(Mh.clearTimeout(e.v),e.v=null)}function hm(e,t){var n=null;if(e.g==t){um(e),lm(e),e.g=null;var r=2}else{if(!_p(e.i,t))return;n=t.F,Sp(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;$d(r=mf(),new bf(r,n)),nm(e)}else om(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==r&&function(e,t){return!(xp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=xf(zh(e.Na,e,t),dm(e,e.C)),e.C++,!0))}(e,t)||2==r&&am(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:fm(e,5);break;case 4:fm(e,10);break;case 3:fm(e,6);break;default:fm(e,2)}}function dm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function fm(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=zh(e.pb,e);n||(n=new Xf("//www.google.com/images/cleardot.gif"),Mh.location&&"http"==Mh.location.protocol||Jf(n,"https"),np(n)),function(e,t){const n=new hf;if(Mh.Image){const r=new Image;r.onload=qh(Np,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qh(Np,n,r,"TestLoadImage: error",!1,t),r.onabort=qh(Np,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qh(Np,n,r,"TestLoadImage: timeout",!1,t),Mh.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else wf(2);e.H=0,e.h&&e.h.za(t),pm(e),tm(e)}function pm(e){if(e.H=0,e.ma=[],e.h){const t=kp(e.i);0==t.length&&0==e.j.length||(Qh(e.ma,t),Qh(e.ma,e.j),e.i.i.length=0,Gh(e.j),e.j.length=0),e.h.ya()}}function mm(e,t,n){var r=n instanceof Xf?Yf(n):new Xf(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Zf(r,r.m);else{var s=Mh.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Xf(null);r&&Jf(i,r),t&&(i.g=t),s&&Zf(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&tp(r,n,t),tp(r,"VER",e.ra),sm(e,r),r}function gm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Fp(new Pp({ob:!0})):new Fp(e.va)).Oa(e.J),t}function ym(){}function vm(){if(id&&!(10<=Number(md)))throw Error("Environmental error: no available transport.")}function wm(e,t){Bd.call(this),this.g=new Jp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Jh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Jh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _m(this)}function bm(e){Af.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xm(){Nf.call(this),this.status=1}function _m(e){this.g=e}function Em(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sm(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function km(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}(Rh=Fp.prototype).Oa=function(e){this.M=e},Rh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cf.g(),this.C=this.u?kf(this.u):kf(Cf),this.g.onreadystatechange=zh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void $p(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=Mh.FormData&&e instanceof Mh.FormData,!(0<=Kh(Bp,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wp(this),0<this.B&&((this.L=function(e){return id&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zh(this.ua,this)):this.A=rf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){$p(this,i)}},Rh.ua=function(){"undefined"!=typeof Lh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$d(this,"timeout"),this.abort(8))},Rh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$d(this,"complete"),$d(this,"abort"),Hp(this))},Rh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hp(this,!0)),Fp.$.N.call(this)},Rh.La=function(){this.s||(this.G||this.v||this.l?qp(this):this.kb())},Rh.kb=function(){qp(this)},Rh.isActive=function(){return!!this.g},Rh.da=function(){try{return 2<Kp(this)?this.g.status:-1}catch(Tp){return-1}},Rh.ja=function(){try{return this.g?this.g.responseText:""}catch(Tp){return""}},Rh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jp(t)}},Rh.Ia=function(){return this.m},Rh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Rh=Jp.prototype).ra=8,Rh.H=1,Rh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Rf(this,this.l,e);let i=this.s;if(this.U&&(i?(i=Ed(i),kd(i,this.U)):i=this.U),null!==this.o||this.O||(s.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=im(this,s,t),tp(n=Yf(this.I),"RID",e),tp(n,"CVER",22),this.F&&tp(n,"X-HTTP-Session-Id",this.F),sm(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Qp(i)))+"&"+t:this.o&&Xp(n,this.o,i)),Ep(this.i,s),this.bb&&tp(n,"TYPE","init"),this.P?(tp(n,"$req",t),tp(n,"SID","null"),s.aa=!0,jf(s,n,null)):jf(s,n,t),this.H=2}}else 3==this.H&&(e?rm(this,e):0==this.j.length||bp(this.i)||rm(this))},Rh.Ma=function(){if(this.u=null,cm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=xf(zh(this.jb,this),e)}},Rh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wf(10),em(this),cm(this))},Rh.ib=function(){null!=this.v&&(this.v=null,em(this),am(this),wf(19))},Rh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),wf(2)):(this.l.info("Failed to ping google.com"),wf(1))},Rh.isActive=function(){return!!this.h&&this.h.isActive(this)},(Rh=ym.prototype).Ba=function(){},Rh.Aa=function(){},Rh.za=function(){},Rh.ya=function(){},Rh.isActive=function(){return!0},Rh.Va=function(){},vm.prototype.g=function(e,t){return new wm(e,t)},Hh(wm,Bd),wm.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;wf(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=mm(e,null,e.Y),nm(e)},wm.prototype.close=function(){Zp(this.g)},wm.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=qd(e),e=n);t.j.push(new yp(t.fb++,e)),3==t.H&&nm(t)},wm.prototype.N=function(){this.g.h=null,delete this.j,Zp(this.g),delete this.g,wm.$.N.call(this)},Hh(bm,Af),Hh(xm,Nf),Hh(_m,ym),_m.prototype.Ba=function(){$d(this.g,"a")},_m.prototype.Aa=function(e){$d(this.g,new bm(e))},_m.prototype.za=function(e){$d(this.g,new xm)},_m.prototype.ya=function(){$d(this.g,"b")},Hh(Em,function(){this.blockSize=-1}),Em.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Em.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(0==s)for(;i<=n;)Sm(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){Sm(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){Sm(this,r),s=0;break}}this.h=s,this.i+=t},Em.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Tm={};function Cm(e){return-128<=e&&128>e?function(e,t){var n=Tm;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new km([0|e],0>e?-1:0)}):new km([0|e],0>e?-1:0)}function Im(e){if(isNaN(e)||!isFinite(e))return Nm;if(0>e)return Lm(Im(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Am;return new km(t,0)}var Am=4294967296,Nm=Cm(0),Pm=Cm(1),Rm=Cm(16777216);function Dm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Om(e){return-1==e.h}function Lm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new km(n,~e.h).add(Pm)}function Mm(e,t){return e.add(Lm(t))}function jm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Fm(e,t){this.g=e,this.h=t}function Vm(e,t){if(Dm(t))throw Error("division by zero");if(Dm(e))return new Fm(Nm,Nm);if(Om(e))return t=Vm(Lm(e),t),new Fm(Lm(t.g),Lm(t.h));if(Om(t))return t=Vm(e,Lm(t)),new Fm(Lm(t.g),t.h);if(30<e.g.length){if(Om(e)||Om(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Pm,r=t;0>=r.X(e);)n=Um(n),r=Um(r);var s=Bm(n,1),i=Bm(r,1);for(r=Bm(r,2),n=Bm(n,2);!Dm(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=Bm(r,1),n=Bm(n,1)}return t=Mm(e,s.R(t)),new Fm(s,t)}for(s=Nm;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(i=Im(n)).R(t);Om(o)||0<o.X(e);)o=(i=Im(n-=r)).R(t);Dm(i)&&(i=Pm),s=s.add(i),e=Mm(e,o)}return new Fm(s,e)}function Um(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new km(n,e.h)}function Bm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new km(s,e.h)}(Rh=km.prototype).ea=function(){if(Om(this))return-Lm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Am+r)*t,t*=Am}return e},Rh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Dm(this))return"0";if(Om(this))return"-"+Lm(this).toString(e);for(var t=Im(Math.pow(e,6)),n=this,r="";;){var s=Vm(n,t).g,i=((0<(n=Mm(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Dm(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},Rh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Rh.X=function(e){return Om(e=Mm(this,e))?-1:Dm(e)?0:1},Rh.abs=function(){return Om(this)?Lm(this):this},Rh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(65535&this.D(s))+(65535&e.D(s)),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new km(n,-2147483648&n[n.length-1]?-1:0)},Rh.R=function(e){if(Dm(this)||Dm(e))return Nm;if(Om(this))return Om(e)?Lm(this).R(Lm(e)):Lm(Lm(this).R(e));if(Om(e))return Lm(this.R(Lm(e)));if(0>this.X(Rm)&&0>e.X(Rm))return Im(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=65535&this.D(r),a=e.D(s)>>>16,l=65535&e.D(s);n[2*r+2*s]+=o*l,jm(n,2*r+2*s),n[2*r+2*s+1]+=i*l,jm(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,jm(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,jm(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new km(n,0)},Rh.gb=function(e){return Vm(this,e).h},Rh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new km(n,this.h&e.h)},Rh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new km(n,this.h|e.h)},Rh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new km(n,this.h^e.h)},vm.prototype.createWebChannel=vm.prototype.g,wm.prototype.send=wm.prototype.u,wm.prototype.open=wm.prototype.m,wm.prototype.close=wm.prototype.close,_f.NO_ERROR=0,_f.TIMEOUT=8,_f.HTTP_ERROR=6,Ef.COMPLETE="complete",Tf.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",Bd.prototype.listen=Bd.prototype.O,Fp.prototype.listenOnce=Fp.prototype.P,Fp.prototype.getLastError=Fp.prototype.Sa,Fp.prototype.getLastErrorCode=Fp.prototype.Ia,Fp.prototype.getStatus=Fp.prototype.da,Fp.prototype.getResponseJson=Fp.prototype.Wa,Fp.prototype.getResponseText=Fp.prototype.ja,Fp.prototype.send=Fp.prototype.ha,Fp.prototype.setWithCredentials=Fp.prototype.Oa,Em.prototype.digest=Em.prototype.l,Em.prototype.reset=Em.prototype.reset,Em.prototype.update=Em.prototype.j,km.prototype.add=km.prototype.add,km.prototype.multiply=km.prototype.R,km.prototype.modulo=km.prototype.gb,km.prototype.compare=km.prototype.X,km.prototype.toNumber=km.prototype.ea,km.prototype.toString=km.prototype.toString,km.prototype.getBits=km.prototype.D,km.fromNumber=Im,km.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Lm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Im(Math.pow(n,8)),s=Nm,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+o),n);8>o?(o=Im(Math.pow(n,o)),s=s.R(o).add(Im(a))):s=(s=s.R(r)).add(Im(a))}return s};var $m=Oh.createWebChannelTransport=function(){return new vm},zm=Oh.getStatEventTarget=function(){return mf()},qm=Oh.ErrorCode=_f,Hm=Oh.EventType=Ef,Wm=Oh.Event=ff,Km=Oh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gm=Oh.FetchXmlHttpFactory=Pp,Qm=Oh.WebChannel=Tf,Xm=Oh.XhrIo=Fp,Ym=Oh.Md5=Em,Jm=Oh.Integer=km;const Zm="@firebase/firestore";class eg{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}eg.UNAUTHENTICATED=new eg(null),eg.GOOGLE_CREDENTIALS=new eg("google-credentials-uid"),eg.FIRST_PARTY=new eg("first-party-uid"),eg.MOCK_USER=new eg("mock-user");let tg="9.23.0";const ng=new ga("@firebase/firestore");function rg(){return ng.logLevel}function sg(e){if(ng.logLevel<=ha.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ag);ng.debug(`Firestore (${tg}): ${e}`,...s)}}function ig(e){if(ng.logLevel<=ha.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ag);ng.error(`Firestore (${tg}): ${e}`,...s)}}function og(e){if(ng.logLevel<=ha.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(ag);ng.warn(`Firestore (${tg}): ${e}`,...s)}}function ag(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function lg(){const e=`FIRESTORE (${tg}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw ig(e),new Error(e)}function cg(e,t){e||lg()}function ug(e,t){return e}const hg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dg extends Qo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fg{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(eg.UNAUTHENTICATED))}shutdown(){}}class gg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yg{constructor(e){this.t=e,this.currentUser=eg.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new fg;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fg,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{sg("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(sg("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fg)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(sg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(cg("string"==typeof t.accessToken),new pg(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return cg(null===e||"string"==typeof e),new eg(e)}}class vg{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=eg.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class wg{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new vg(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(eg.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xg{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&sg("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,sg("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{sg("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):sg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(cg("string"==typeof e.token),this.T=e.token,new bg(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _g(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Eg{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=_g(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function Sg(e,t){return e<t?-1:e>t?1:0}function kg(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Tg{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new dg(hg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new dg(hg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new dg(hg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dg(hg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tg.fromMillis(Date.now())}static fromDate(e){return Tg.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Tg(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sg(this.nanoseconds,e.nanoseconds):Sg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Cg{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Cg(e)}static min(){return new Cg(new Tg(0,0))}static max(){return new Cg(new Tg(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ig{constructor(e,t,n){void 0===t?t=0:t>e.length&&lg(),void 0===n?n=e.length-t:n>e.length-t&&lg(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ig.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ig?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ag extends Ig{construct(e,t,n){return new Ag(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new dg(hg.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new Ag(e)}static emptyPath(){return new Ag([])}}const Ng=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pg extends Ig{construct(e,t,n){return new Pg(e,t,n)}static isValidIdentifier(e){return Ng.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pg.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pg(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new dg(hg.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new dg(hg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new dg(hg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new dg(hg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pg(t)}static emptyPath(){return new Pg([])}}class Rg{constructor(e){this.path=e}static fromPath(e){return new Rg(Ag.fromString(e))}static fromName(e){return new Rg(Ag.fromString(e).popFirst(5))}static empty(){return new Rg(Ag.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ag.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ag.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rg(new Ag(e.slice()))}}class Dg{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Dg.UNKNOWN_ID=-1;function Og(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Cg.fromTimestamp(1e9===r?new Tg(n+1,0):new Tg(n,r));return new Mg(s,Rg.empty(),t)}function Lg(e){return new Mg(e.readTime,e.key,-1)}class Mg{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Mg(Cg.min(),Rg.empty(),-1)}static max(){return new Mg(Cg.max(),Rg.empty(),-1)}}function jg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Rg.comparator(e.documentKey,t.documentKey),0!==n?n:Sg(e.largestBatchId,t.largestBatchId))}const Fg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ug(e){if(e.code!==hg.FAILED_PRECONDITION||e.message!==Fg)throw e;sg("LocalStore","Unexpectedly lost primary lease")}class Bg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bg((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bg?t:Bg.resolve(t)}catch(e){return Bg.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bg.reject(t)}static resolve(e){return new Bg((t,n)=>{t(e)})}static reject(e){return new Bg((t,n)=>{n(e)})}static waitFor(e){return new Bg((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Bg.resolve(!1);for(const n of e)t=t.next(e=>e?Bg.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Bg((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next(e=>{i[l]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Bg((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function $g(e){return"IndexedDbTransactionError"===e.name}class zg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function qg(e){return null==e}function Hg(e){return 0===e&&1/e==-1/0}function Wg(e){return"number"==typeof e&&Number.isInteger(e)&&!Hg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}zg.ct=-1;const Kg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Qg=Gg;function Xg(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yg(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Jg(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zg{constructor(e,t){this.comparator=e,this.root=t||ty.EMPTY}insert(e,t){return new Zg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ty.BLACK,null,null))}remove(e){return new Zg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ty.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ey(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ey(this.root,e,this.comparator,!1)}getReverseIterator(){return new ey(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ey(this.root,e,this.comparator,!0)}}class ey{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ty{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ty.RED,this.left=null!=r?r:ty.EMPTY,this.right=null!=s?s:ty.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ty(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ty.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ty.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ty.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ty.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lg();if(this.right.isRed())throw lg();const e=this.left.check();if(e!==this.right.check())throw lg();return e+(this.isRed()?0:1)}}ty.EMPTY=null,ty.RED=!0,ty.BLACK=!1,ty.EMPTY=new class{constructor(){this.size=0}get key(){throw lg()}get value(){throw lg()}get color(){throw lg()}get left(){throw lg()}get right(){throw lg()}copy(e,t,n,r,s){return this}insert(e,t,n){return new ty(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ny{constructor(e){this.comparator=e,this.data=new Zg(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ry(this.data.getIterator())}getIteratorFrom(e){return new ry(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ny))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ny(this.comparator);return t.data=e,t}}class ry{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class sy{constructor(e){this.fields=e,e.sort(Pg.comparator)}static empty(){return new sy([])}unionWith(e){let t=new ny(Pg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sy(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kg(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class iy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class oy{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new iy("Invalid base64 string: "+e):e}}(e);return new oy(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new oy(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oy.EMPTY_BYTE_STRING=new oy("");const ay=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ly(e){if(cg(!!e),"string"==typeof e){let t=0;const n=ay.exec(e);if(cg(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cy(e.seconds),nanos:cy(e.nanos)}}function cy(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uy(e){return"string"==typeof e?oy.fromBase64String(e):oy.fromUint8Array(e)}function hy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function dy(e){const t=e.mapValue.fields.__previous_value__;return hy(t)?dy(t):t}function fy(e){const t=ly(e.mapValue.fields.__local_write_time__.timestampValue);return new Tg(t.seconds,t.nanos)}class py{constructor(e,t,n,r,s,i,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class my{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new my("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof my&&e.projectId===this.projectId&&e.database===this.database}}const gy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hy(e)?4:Py(e)?9007199254740991:10:lg()}function vy(e,t){if(e===t)return!0;const n=yy(e);if(n!==yy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fy(e).isEqual(fy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ly(e.timestampValue),r=ly(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uy(e.bytesValue).isEqual(uy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cy(e.geoPointValue.latitude)===cy(t.geoPointValue.latitude)&&cy(e.geoPointValue.longitude)===cy(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cy(e.integerValue)===cy(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=cy(e.doubleValue),r=cy(t.doubleValue);return n===r?Hg(n)===Hg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return kg(e.arrayValue.values||[],t.arrayValue.values||[],vy);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xg(n)!==Xg(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!vy(n[s],r[s])))return!1;return!0}(e,t);default:return lg()}}function wy(e,t){return void 0!==(e.values||[]).find(e=>vy(e,t))}function by(e,t){if(e===t)return 0;const n=yy(e),r=yy(t);if(n!==r)return Sg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=cy(e.integerValue||e.doubleValue),r=cy(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return xy(e.timestampValue,t.timestampValue);case 4:return xy(fy(e),fy(t));case 5:return Sg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=uy(e),r=uy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Sg(n[s],r[s]);if(0!==e)return e}return Sg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sg(cy(e.latitude),cy(t.latitude));return 0!==n?n:Sg(cy(e.longitude),cy(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=by(n[s],r[s]);if(e)return e}return Sg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===gy.mapValue&&t===gy.mapValue)return 0;if(e===gy.mapValue)return 1;if(t===gy.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=Sg(r[o],i[o]);if(0!==e)return e;const t=by(n[r[o]],s[i[o]]);if(0!==t)return t}return Sg(r.length,i.length)}(e.mapValue,t.mapValue);default:throw lg()}}function xy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sg(e,t);const n=ly(e),r=ly(t),s=Sg(n.seconds,r.seconds);return 0!==s?s:Sg(n.nanos,r.nanos)}function _y(e){return Ey(e)}function Ey(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ly(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?uy(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Rg.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ey(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Ey(e.fields[s])}`;return n+"}"}(e.mapValue):lg();var t,n}function Sy(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ky(e){return!!e&&"integerValue"in e}function Ty(e){return!!e&&"arrayValue"in e}function Cy(e){return!!e&&"nullValue"in e}function Iy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ay(e){return!!e&&"mapValue"in e}function Ny(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yg(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ny(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ny(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Py(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ry{constructor(e){this.value=e}static empty(){return new Ry({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ay(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ny(t)}setAll(e){let t=Pg.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Ny(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Ay(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vy(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ay(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Yg(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ry(Ny(this.value))}}function Dy(e){const t=[];return Yg(e.fields,(e,n)=>{const r=new Pg([e]);if(Ay(n)){const e=Dy(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new sy(t)}class Oy{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Oy(e,0,Cg.min(),Cg.min(),Cg.min(),Ry.empty(),0)}static newFoundDocument(e,t,n,r){return new Oy(e,1,t,Cg.min(),n,r,0)}static newNoDocument(e,t){return new Oy(e,2,t,Cg.min(),Cg.min(),Ry.empty(),0)}static newUnknownDocument(e,t){return new Oy(e,3,t,Cg.min(),Cg.min(),Ry.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Cg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ry.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ry.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Oy&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oy(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ly{constructor(e,t){this.position=e,this.inclusive=t}}function My(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?Rg.comparator(Rg.fromName(o.referenceValue),n.key):by(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function jy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vy(e.position[n],t.position[n]))return!1;return!0}class Fy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Vy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Uy{}class By extends Uy{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Qy(e,t,n):"array-contains"===t?new Zy(e,n):"in"===t?new ev(e,n):"not-in"===t?new tv(e,n):"array-contains-any"===t?new nv(e,n):new By(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Xy(e,n):new Yy(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(by(t,this.value)):null!==t&&yy(this.value)===yy(t)&&this.matchesComparison(by(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lg()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $y extends Uy{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new $y(e,t)}matches(e){return zy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function zy(e){return"and"===e.op}function qy(e){return Hy(e)&&zy(e)}function Hy(e){for(const t of e.filters)if(t instanceof $y)return!1;return!0}function Wy(e){if(e instanceof By)return e.field.canonicalString()+e.op.toString()+_y(e.value);if(qy(e))return e.filters.map(e=>Wy(e)).join(",");{const t=e.filters.map(e=>Wy(e)).join(",");return`${e.op}(${t})`}}function Ky(e,t){return e instanceof By?function(e,t){return t instanceof By&&e.op===t.op&&e.field.isEqual(t.field)&&vy(e.value,t.value)}(e,t):e instanceof $y?function(e,t){return t instanceof $y&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ky(n,t.filters[r]),!0)}(e,t):void lg()}function Gy(e){return e instanceof By?function(e){return`${e.field.canonicalString()} ${e.op} ${_y(e.value)}`}(e):e instanceof $y?function(e){return e.op.toString()+" {"+e.getFilters().map(Gy).join(" ,")+"}"}(e):"Filter"}class Qy extends By{constructor(e,t,n){super(e,t,n),this.key=Rg.fromName(n.referenceValue)}matches(e){const t=Rg.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xy extends By{constructor(e,t){super(e,"in",t),this.keys=Jy("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Yy extends By{constructor(e,t){super(e,"not-in",t),this.keys=Jy("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Rg.fromName(e.referenceValue))}class Zy extends By{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ty(t)&&wy(t.arrayValue,this.value)}}class ev extends By{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wy(this.value.arrayValue,t)}}class tv extends By{constructor(e,t){super(e,"not-in",t)}matches(e){if(wy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wy(this.value.arrayValue,t)}}class nv extends By{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ty(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>wy(this.value.arrayValue,e))}}class rv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.dt=null}}function sv(e){return new rv(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function iv(e){const t=ug(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Wy(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),qg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>_y(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>_y(e)).join(",")),t.dt=e}return t.dt}function ov(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Vy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ky(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!jy(e.startAt,t.startAt)&&jy(e.endAt,t.endAt)}function av(e){return Rg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class lv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function cv(e,t,n,r,s,i,o,a){return new lv(e,t,n,r,s,i,o,a)}function uv(e){return new lv(e)}function hv(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function dv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function fv(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function pv(e){return null!==e.collectionGroup}function mv(e){const t=ug(e);if(null===t.wt){t.wt=[];const e=fv(t),n=dv(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Fy(e)),t.wt.push(new Fy(Pg.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Fy(Pg.keyField(),e))}}}return t.wt}function gv(e){const t=ug(e);if(!t._t)if("F"===t.limitType)t._t=sv(t.path,t.collectionGroup,mv(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of mv(t)){const t="desc"===s.dir?"asc":"desc";e.push(new Fy(s.field,t))}const n=t.endAt?new Ly(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ly(t.startAt.position,t.startAt.inclusive):null;t._t=sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function yv(e,t){t.getFirstInequalityField(),fv(e);const n=e.filters.concat([t]);return new lv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function vv(e,t,n){return new lv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wv(e,t){return ov(gv(e),gv(t))&&e.limitType===t.limitType}function bv(e){return`${iv(gv(e))}|lt:${e.limitType}`}function xv(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Gy(e)).join(", ")}]`),qg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>_y(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>_y(e)).join(",")),`Target(${t})`}(gv(e))}; limitType=${e.limitType})`}function _v(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of mv(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=My(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,mv(e),t))&&!(e.endAt&&!function(e,t,n){const r=My(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,mv(e),t))}(e,t)}function Ev(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Sv(e){return(t,n)=>{let r=!1;for(const s of mv(e)){const e=kv(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function kv(e,t,n){const r=e.field.isKeyField()?Rg.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?by(r,s):lg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return lg()}}class Tv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yg(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Jg(this.inner)}size(){return this.innerSize}}const Cv=new Zg(Rg.comparator);function Iv(){return Cv}const Av=new Zg(Rg.comparator);function Nv(){let e=Av;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Pv(e){let t=Av;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Rv(){return Ov()}function Dv(){return Ov()}function Ov(){return new Tv(e=>e.toString(),(e,t)=>e.isEqual(t))}const Lv=new Zg(Rg.comparator),Mv=new ny(Rg.comparator);function jv(){let e=Mv;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Fv=new ny(Sg);function Vv(){return Fv}function Uv(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hg(t)?"-0":t}}function Bv(e){return{integerValue:""+e}}function $v(e,t){return Wg(t)?Bv(t):Uv(e,t)}class zv{constructor(){this._=void 0}}function qv(e,t,n){return e instanceof Kv?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&hy(t)&&(t=dy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gv?Qv(e,t):e instanceof Xv?Yv(e,t):function(e,t){const n=Wv(e,t),r=Zv(n)+Zv(e.gt);return ky(n)&&ky(e.gt)?Bv(r):Uv(e.serializer,r)}(e,t)}function Hv(e,t,n){return e instanceof Gv?Qv(e,t):e instanceof Xv?Yv(e,t):n}function Wv(e,t){return e instanceof Jv?ky(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Kv extends zv{}class Gv extends zv{constructor(e){super(),this.elements=e}}function Qv(e,t){const n=ew(t);for(const r of e.elements)n.some(e=>vy(e,r))||n.push(r);return{arrayValue:{values:n}}}class Xv extends zv{constructor(e){super(),this.elements=e}}function Yv(e,t){let n=ew(t);for(const r of e.elements)n=n.filter(e=>!vy(e,r));return{arrayValue:{values:n}}}class Jv extends zv{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Zv(e){return cy(e.integerValue||e.doubleValue)}function ew(e){return Ty(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class tw{constructor(e,t){this.field=e,this.transform=t}}class nw{constructor(e,t){this.version=e,this.transformResults=t}}class rw{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rw}static exists(e){return new rw(void 0,e)}static updateTime(e){return new rw(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class iw{}function ow(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gw(e.key,rw.none()):new hw(e.key,e.data,rw.none());{const n=e.data,r=Ry.empty();let s=new ny(Pg.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new dw(e.key,r,new sy(s.toArray()),rw.none())}}function aw(e,t,n){e instanceof hw?function(e,t,n){const r=e.value.clone(),s=pw(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof dw?function(e,t,n){if(!sw(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=pw(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(fw(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function lw(e,t,n,r){return e instanceof hw?function(e,t,n,r){if(!sw(e.precondition,t))return n;const s=e.value.clone(),i=mw(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof dw?function(e,t,n,r){if(!sw(e.precondition,t))return n;const s=mw(e.fieldTransforms,r,t),i=t.data;return i.setAll(fw(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return sw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cw(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Wv(r.transform,e||null);null!=s&&(null===n&&(n=Ry.empty()),n.set(r.field,s))}return n||null}function uw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&kg(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gv&&t instanceof Gv||e instanceof Xv&&t instanceof Xv?kg(e.elements,t.elements,vy):e instanceof Jv&&t instanceof Jv?vy(e.gt,t.gt):e instanceof Kv&&t instanceof Kv}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hw extends iw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class dw extends iw{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fw(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function pw(e,t,n){const r=new Map;cg(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Hv(o,a,n[s]))}return r}function mw(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,qv(e,i,t))}return r}class gw extends iw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yw extends iw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vw{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&aw(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=lw(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=lw(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Dv();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=ow(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(Cg.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jv())}isEqual(e){return this.batchId===e.batchId&&kg(this.mutations,e.mutations,(e,t)=>uw(e,t))&&kg(this.baseMutations,e.baseMutations,(e,t)=>uw(e,t))}}class ww{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){cg(e.mutations.length===n.length);let r=Lv;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new ww(e,t,n,r)}}class bw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xw{constructor(e,t){this.count=e,this.unchangedNames=t}}var _w,Ew;function Sw(e){switch(e){default:return lg();case hg.CANCELLED:case hg.UNKNOWN:case hg.DEADLINE_EXCEEDED:case hg.RESOURCE_EXHAUSTED:case hg.INTERNAL:case hg.UNAVAILABLE:case hg.UNAUTHENTICATED:return!1;case hg.INVALID_ARGUMENT:case hg.NOT_FOUND:case hg.ALREADY_EXISTS:case hg.PERMISSION_DENIED:case hg.FAILED_PRECONDITION:case hg.ABORTED:case hg.OUT_OF_RANGE:case hg.UNIMPLEMENTED:case hg.DATA_LOSS:return!0}}function kw(e){if(void 0===e)return ig("GRPC error has no .code"),hg.UNKNOWN;switch(e){case _w.OK:return hg.OK;case _w.CANCELLED:return hg.CANCELLED;case _w.UNKNOWN:return hg.UNKNOWN;case _w.DEADLINE_EXCEEDED:return hg.DEADLINE_EXCEEDED;case _w.RESOURCE_EXHAUSTED:return hg.RESOURCE_EXHAUSTED;case _w.INTERNAL:return hg.INTERNAL;case _w.UNAVAILABLE:return hg.UNAVAILABLE;case _w.UNAUTHENTICATED:return hg.UNAUTHENTICATED;case _w.INVALID_ARGUMENT:return hg.INVALID_ARGUMENT;case _w.NOT_FOUND:return hg.NOT_FOUND;case _w.ALREADY_EXISTS:return hg.ALREADY_EXISTS;case _w.PERMISSION_DENIED:return hg.PERMISSION_DENIED;case _w.FAILED_PRECONDITION:return hg.FAILED_PRECONDITION;case _w.ABORTED:return hg.ABORTED;case _w.OUT_OF_RANGE:return hg.OUT_OF_RANGE;case _w.UNIMPLEMENTED:return hg.UNIMPLEMENTED;case _w.DATA_LOSS:return hg.DATA_LOSS;default:return lg()}}(Ew=_w||(_w={}))[Ew.OK=0]="OK",Ew[Ew.CANCELLED=1]="CANCELLED",Ew[Ew.UNKNOWN=2]="UNKNOWN",Ew[Ew.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ew[Ew.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ew[Ew.NOT_FOUND=5]="NOT_FOUND",Ew[Ew.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ew[Ew.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ew[Ew.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ew[Ew.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ew[Ew.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ew[Ew.ABORTED=10]="ABORTED",Ew[Ew.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ew[Ew.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ew[Ew.INTERNAL=13]="INTERNAL",Ew[Ew.UNAVAILABLE=14]="UNAVAILABLE",Ew[Ew.DATA_LOSS=15]="DATA_LOSS";class Tw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cw}static getOrCreateInstance(){return null===Cw&&(Cw=new Tw),Cw}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Cw=null;function Iw(){return new TextEncoder}const Aw=new Jm([4294967295,4294967295],0);function Nw(e){const t=Iw().encode(e),n=new Ym;return n.update(t),new Uint8Array(n.digest())}function Pw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Jm([n,r],0),new Jm([s,i],0)]}class Rw{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dw(`Invalid padding: ${t}`);if(n<0)throw new Dw(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Dw(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Dw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Jm.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Jm.fromNumber(n)));return 1===r.compare(Aw)&&(r=new Jm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Nw(e),[n,r]=Pw(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Rw(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Nw(e),[n,r]=Pw(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ow{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Lw.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ow(Cg.min(),r,new Zg(Sg),Iv(),jv())}}class Lw{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Lw(n,t,jv(),jv(),jv())}}class Mw{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class jw{constructor(e,t){this.targetId=e,this.Vt=t}}class Fw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oy.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Vw{constructor(){this.St=0,this.Dt=$w(),this.Ct=oy.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=jv(),t=jv(),n=jv();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:lg()}}),new Lw(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=$w()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Uw{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Iv(),this.zt=Bw(),this.Wt=new Zg(Sg)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:lg()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const i=s.target;if(av(i))if(0===r){const e=new Rg(i.path);this.Yt(n,e,Oy.newNoDocument(e,Cg.min()))}else cg(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Tw.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,i,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(i=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===i?void 0:i.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=n;let a,l;try{a=uy(s).toUint8Array()}catch(e){if(e instanceof iy)return og("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Rw(a,i,o)}catch(e){return og(e instanceof Dw?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const s=this.Gt.ue(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;t.vt(i)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const s=this.se(r);if(s){if(n.current&&av(s.target)){const t=new Rg(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Oy.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=jv();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Ow(e,t,this.Wt,this.jt,n);return this.jt=Iv(),this.zt=Bw(),this.Wt=new Zg(Sg),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Vw,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new ny(Sg),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||sg("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Vw),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Bw(){return new Zg(Rg.comparator)}function $w(){return new Zg(Rg.comparator)}const zw={asc:"ASCENDING",desc:"DESCENDING"},qw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hw={and:"AND",or:"OR"};class Ww{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kw(e,t){return e.useProto3Json||qg(t)?t:{value:t}}function Gw(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qw(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xw(e,t){return Gw(e,t.toTimestamp())}function Yw(e){return cg(!!e),Cg.fromTimestamp(function(e){const t=ly(e);return new Tg(t.seconds,t.nanos)}(e))}function Jw(e,t){return function(e){return new Ag(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Zw(e){const t=Ag.fromString(e);return cg(wb(t)),t}function eb(e,t){return Jw(e.databaseId,t.path)}function tb(e,t){const n=Zw(t);if(n.get(1)!==e.databaseId.projectId)throw new dg(hg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new dg(hg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rg(ib(n))}function nb(e,t){return Jw(e.databaseId,t)}function rb(e){const t=Zw(e);return 4===t.length?Ag.emptyPath():ib(t)}function sb(e){return new Ag(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ib(e){return cg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ob(e,t,n){return{name:eb(e,t),fields:n.value.mapValue.fields}}function ab(e,t){let n;if(t instanceof hw)n={update:ob(e,t.key,t.value)};else if(t instanceof gw)n={delete:eb(e,t.key)};else if(t instanceof dw)n={update:ob(e,t.key,t.data),updateMask:vb(t.fieldMask)};else{if(!(t instanceof yw))return lg();n={verify:eb(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Kv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xv)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Jv)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw lg()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xw(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:lg()}(e,t.precondition)),n}function lb(e,t){return{documents:[nb(e,t.path)]}}function cb(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=nb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=nb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return yb($y.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:mb(e.field),direction:db(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Kw(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ub(e){let t=rb(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){cg(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=hb(e);return t instanceof $y&&qy(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Fy(gb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,qg(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ly(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ly(n,t)}(n.endAt)),cv(t,s,o,i,a,"F",l,c)}function hb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=gb(e.unaryFilter.field);return By.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=gb(e.unaryFilter.field);return By.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=gb(e.unaryFilter.field);return By.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=gb(e.unaryFilter.field);return By.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lg()}}(e):void 0!==e.fieldFilter?function(e){return By.create(gb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lg()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return $y.create(e.compositeFilter.filters.map(e=>hb(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return lg()}}(e.compositeFilter.op))}(e):lg()}function db(e){return zw[e]}function fb(e){return qw[e]}function pb(e){return Hw[e]}function mb(e){return{fieldPath:e.canonicalString()}}function gb(e){return Pg.fromServerFormat(e.fieldPath)}function yb(e){return e instanceof By?function(e){if("=="===e.op){if(Iy(e.value))return{unaryFilter:{field:mb(e.field),op:"IS_NAN"}};if(Cy(e.value))return{unaryFilter:{field:mb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Iy(e.value))return{unaryFilter:{field:mb(e.field),op:"IS_NOT_NAN"}};if(Cy(e.value))return{unaryFilter:{field:mb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mb(e.field),op:fb(e.op),value:e.value}}}(e):e instanceof $y?function(e){const t=e.getFilters().map(e=>yb(e));return 1===t.length?t[0]:{compositeFilter:{op:pb(e.op),filters:t}}}(e):lg()}function vb(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function wb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class bb{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cg.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Cg.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:oy.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new bb(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bb(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class xb{constructor(e){this.fe=e}}function _b(e){const t=ub({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vv(t,t.limit,"L"):t}class Eb{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(cy(e.integerValue));else if("doubleValue"in e){const n=cy(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Hg(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(uy(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Py(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):lg()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Rg.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Eb.Ve=new Eb;class Sb{constructor(){this.rn=new kb}addToCollectionParentIndex(e,t){return this.rn.add(t),Bg.resolve()}getCollectionParents(e,t){return Bg.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Bg.resolve()}deleteFieldIndex(e,t){return Bg.resolve()}getDocumentsMatchingTarget(e,t){return Bg.resolve(null)}getIndexType(e,t){return Bg.resolve(0)}getFieldIndexes(e,t){return Bg.resolve([])}getNextCollectionGroupToUpdate(e){return Bg.resolve(null)}getMinOffset(e,t){return Bg.resolve(Mg.min())}getMinOffsetFromCollectionGroup(e,t){return Bg.resolve(Mg.min())}updateCollectionGroup(e,t,n){return Bg.resolve()}updateIndexEntries(e,t){return Bg.resolve()}}class kb{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ny(Ag.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ny(Ag.comparator)).toArray()}}new Uint8Array(0);class Tb{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Tb(e,Tb.DEFAULT_COLLECTION_PERCENTILE,Tb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Tb.DEFAULT_COLLECTION_PERCENTILE=10,Tb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tb.DEFAULT=new Tb(41943040,Tb.DEFAULT_COLLECTION_PERCENTILE,Tb.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tb.DISABLED=new Tb(-1,0,0);class Cb{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Cb(0)}static Mn(){return new Cb(-1)}}class Ib{constructor(){this.changes=new Tv(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oy.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ab{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Nb{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&lw(n.mutation,e,sy.empty(),Tg.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,jv()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jv();const r=Rv();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Nv();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Rv();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,jv()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Iv();const i=Ov(),o=Ov();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof dw)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),lw(o.mutation,t,o.mutation.getFieldMask(),Tg.now())):i.set(t.key,sy.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Ab(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Ov();let r=new Zg((e,t)=>e-t),s=jv();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||sy.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||jv()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Dv();l.forEach(e=>{if(!s.has(e)){const r=ow(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Bg.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return Rg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Bg.resolve(Rv());let o=-1,a=s;return i.next(t=>Bg.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Bg.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,jv())).next(e=>({batchId:o,changes:Pv(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Rg(t)).next(e=>{let t=Nv();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=Nv();return this.indexManager.getCollectionParents(e,r).next(i=>Bg.forEach(i,i=>{const o=function(e,t){return new lv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Oy.newInvalidDocument(r)))});let n=Nv();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&lw(i.mutation,s,sy.empty(),Tg.now()),_v(t,s)&&(n=n.insert(e,s))}),n})}}class Pb{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Bg.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Yw(n.createTime)}),Bg.resolve()}getNamedQuery(e,t){return Bg.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:_b(e.bundledQuery),readTime:Yw(e.readTime)}}(t)),Bg.resolve()}}class Rb{constructor(){this.overlays=new Zg(Rg.comparator),this.ls=new Map}getOverlay(e,t){return Bg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Rv();return Bg.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),Bg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),Bg.resolve()}getOverlaysForCollection(e,t,n){const r=Rv(),s=t.length+1,i=new Rg(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Zg((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Rv(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Rv(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Bg.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new bw(t,n));let s=this.ls.get(t);void 0===s&&(s=jv(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class Db{constructor(){this.fs=new ny(Ob.ds),this.ws=new ny(Ob._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Ob(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Ob(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new Rg(new Ag([])),n=new Ob(t,e),r=new Ob(t,e+1),s=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),s.push(e.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Rg(new Ag([])),n=new Ob(t,e),r=new Ob(t,e+1);let s=jv();return this.ws.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Ob(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ob{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Rg.comparator(e.key,t.key)||Sg(e.As,t.As)}static _s(e,t){return Sg(e.As,t.As)||Rg.comparator(e.key,t.key)}}class Lb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new ny(Ob.ds)}checkEmpty(e){return Bg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new vw(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Rs=this.Rs.add(new Ob(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Bg.resolve(i)}lookupMutationBatch(e,t){return Bg.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return Bg.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Bg.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Bg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ob(t,0),r=new Ob(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);s.push(t)}),Bg.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ny(Sg);return t.forEach(e=>{const t=new Ob(e,0),r=new Ob(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),Bg.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Rg.isDocumentKey(s)||(s=s.child(""));const i=new Ob(new Rg(s),0);let o=new ny(Sg);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},i),Bg.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){cg(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Bg.forEach(t.mutations,r=>{const s=new Ob(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Ob(t,0),r=this.Rs.firstAfterOrEqual(n);return Bg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bg.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Mb{constructor(e){this.Ds=e,this.docs=new Zg(Rg.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bg.resolve(n?n.document.mutableCopy():Oy.newInvalidDocument(t))}getEntries(e,t){let n=Iv();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Oy.newInvalidDocument(e))}),Bg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Iv();const i=t.path,o=new Rg(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||jg(Lg(o),n)<=0||(r.has(o.key)||_v(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Bg.resolve(s)}getAllFromCollectionGroup(e,t,n,r){lg()}Cs(e,t){return Bg.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new jb(this)}getSize(e){return Bg.resolve(this.size)}}class jb extends Ib{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),Bg.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Fb{constructor(e){this.persistence=e,this.xs=new Tv(e=>iv(e),ov),this.lastRemoteSnapshotVersion=Cg.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Db,this.targetCount=0,this.Ms=Cb.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),Bg.resolve()}getLastRemoteSnapshotVersion(e){return Bg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bg.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Bg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Bg.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Cb(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Bg.resolve()}updateTargetData(e,t){return this.Fn(t),Bg.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Bg.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Bg.waitFor(s).next(()=>r)}getTargetCount(e){return Bg.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Bg.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Bg.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Bg.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Bg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Bg.resolve(n)}containsKey(e,t){return Bg.resolve(this.ks.containsKey(t))}}class Vb{constructor(e,t){this.$s={},this.overlays={},this.Os=new zg(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Fb(this),this.indexManager=new Sb,this.remoteDocumentCache=function(e){return new Mb(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new xb(t),this.qs=new Pb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Lb(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){sg("MemoryPersistence","Starting transaction:",e);const r=new Ub(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return Bg.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class Ub extends Vg{constructor(e){super(),this.currentSequenceNumber=e}}class Bb{constructor(e){this.persistence=e,this.Qs=new Db,this.js=null}static zs(e){return new Bb(e)}get Ws(){if(this.js)return this.js;throw lg()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Bg.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Bg.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Bg.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bg.forEach(this.Ws,n=>{const r=Rg.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Cg.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return Bg.or([()=>Bg.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class $b{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=jv(),r=jv();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new $b(e,t.fromCache,n,r)}}class zb{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(hv(t))return Bg.resolve(null);let n=gv(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=vv(t,null,"F"),n=gv(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=jv(...r);return this.Ui.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,r);return this.zi(t,i,s,n.readTime)?this.Ki(e,vv(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,r){return hv(t)||r.isEqual(Cg.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(s=>{const i=this.ji(t,s);return this.zi(t,i,n,r)?this.Qi(e,t):(rg()<=ha.DEBUG&&sg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xv(t)),this.Wi(e,i,t,Og(r,-1)))})}ji(e,t){let n=new ny(Sv(e));return t.forEach((t,r)=>{_v(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return rg()<=ha.DEBUG&&sg("QueryEngine","Using full collection scan to execute query:",xv(t)),this.Ui.getDocumentsMatchingQuery(e,t,Mg.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class qb{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Zg(Sg),this.Yi=new Tv(e=>iv(e),ov),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nb(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Hb(e,t,n,r){return new qb(e,t,n,r)}async function Wb(e,t){const n=ug(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=jv();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:s,addedBatchIds:i}))})})}function Kb(e){const t=ug(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Gb(e,t,n){let r=jv(),s=jv();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Iv();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Cg.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):sg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{nr:r,sr:s}})}function Qb(e,t){const n=ug(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Xb(e,t){const n=ug(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(s=>s?(r=s,Bg.resolve(r)):n.Bs.allocateTargetId(e).next(s=>(r=new bb(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Yb(e,t,n){const r=ug(e),s=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!$g(e))throw e;sg("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function Jb(e,t,n){const r=ug(e);let s=Cg.min(),i=jv();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=ug(e),s=r.Yi.get(n);return void 0!==s?Bg.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,gv(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:Cg.min(),n?i:jv())).next(e=>(Zb(r,Ev(t),e),{documents:e,ir:i})))}function Zb(e,t,n){let r=e.Xi.get(t)||Cg.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class ex{constructor(){this.activeTargetIds=Vv()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tx{constructor(){this.Hr=new ex,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ex,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nx{Yr(e){}shutdown(){}}class rx{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){sg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){sg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sx=null;function ix(){return null===sx?sx=268435456+Math.round(2147483648*Math.random()):sx++,"0x"+sx.toString(16)}const ox={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ax{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const lx="WebChannelConnection";class cx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const i=ix(),o=this.To(e,t);sg("RestConnection",`Sending RPC '${e}' ${i}:`,o,n);const a={};return this.Eo(a,r,s),this.Ao(e,o,a,n).then(t=>(sg("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw og("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}vo(e,t,n,r,s,i){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=ox[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=ix();return new Promise((i,o)=>{const a=new Xm;a.setWithCredentials(!0),a.listenOnce(Hm.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case qm.NO_ERROR:const t=a.getResponseJson();sg(lx,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case qm.TIMEOUT:sg(lx,`RPC '${e}' ${s} timed out`),o(new dg(hg.DEADLINE_EXCEEDED,"Request time out"));break;case qm.HTTP_ERROR:const n=a.getStatus();if(sg(lx,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(hg).indexOf(t)>=0?t:hg.UNKNOWN}(t.status);o(new dg(e,t.message))}else o(new dg(hg.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new dg(hg.UNAVAILABLE,"Connection failed."));break;default:lg()}}finally{sg(lx,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);sg(lx,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=ix(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=$m(),o=zm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Gm({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=s.join("");sg(lx,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=i.createWebChannel(c,a);let h=!1,d=!1;const f=new ax({ro:t=>{d?sg(lx,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(sg(lx,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),sg(lx,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Qm.EventType.OPEN,()=>{d||sg(lx,`RPC '${e}' stream ${r} transport opened.`)}),p(u,Qm.EventType.CLOSE,()=>{d||(d=!0,sg(lx,`RPC '${e}' stream ${r} transport closed`),f.wo())}),p(u,Qm.EventType.ERROR,t=>{d||(d=!0,og(lx,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new dg(hg.UNAVAILABLE,"The operation could not be completed")))}),p(u,Qm.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];cg(!!s);const i=s,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){sg(lx,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=_w[e];if(void 0!==t)return kw(t)}(t),s=o.message;void 0===n&&(n=hg.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new dg(n,s)),u.close()}else sg(lx,`RPC '${e}' stream ${r} received:`,s),f._o(s)}}),p(o,Wm.STAT_EVENT,t=>{t.stat===Km.PROXY?sg(lx,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Km.NOPROXY&&sg(lx,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.fo()},0),f}}function ux(){return"undefined"!=typeof document?document:null}function hx(e){return new Ww(e,!0)}class dx{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&sg("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class fx{constructor(e,t,n,r,s,i,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new dx(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===hg.RESOURCE_EXHAUSTED?(ig(t.toString()),ig("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===hg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new dg(hg.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return sg("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(sg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class px extends fx{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:lg()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(cg(void 0===t||"string"==typeof t),oy.fromBase64String(t||"")):(cg(void 0===t||t instanceof Uint8Array),oy.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?hg.UNKNOWN:kw(e.code);return new dg(t,e.message||"")}(o);n=new Fw(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=tb(e,r.document.name),i=Yw(r.document.updateTime),o=r.document.createTime?Yw(r.document.createTime):Cg.min(),a=new Ry({mapValue:{fields:r.document.fields}}),l=Oy.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Mw(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=tb(e,r.document),i=r.readTime?Yw(r.readTime):Cg.min(),o=Oy.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mw([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=tb(e,r.document),i=r.removedTargetIds||[];n=new Mw([],i,s,null)}else{if(!("filter"in t))return lg();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new xw(r,s),o=e.targetId;n=new jw(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Cg.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Cg.min():t.readTime?Yw(t.readTime):Cg.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=sb(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=av(r)?{documents:lb(e,r)}:{query:cb(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Qw(e,t.resumeToken);const r=Kw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Cg.min())>0){n.readTime=Gw(e,t.snapshotVersion.toTimestamp());const r=Kw(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lg()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=sb(this.serializer),t.removeTarget=e,this.Wo(t)}}class mx extends fx{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(cg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(cg(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Yw(e.updateTime):Yw(t);return n.isEqual(Cg.min())&&(n=Yw(t)),new nw(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Yw(e.commitTime);return this.listener.cu(n,t)}return cg(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=sb(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ab(this.serializer,e))};this.Wo(t)}}class gx extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new dg(hg.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,i]=r;return this.connection.Io(e,t,n,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===hg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new dg(hg.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.vo(e,t,n,i,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===hg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new dg(hg.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class yx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ig(t),this.mu=!1):sg("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class vx{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Cx(this)&&(sg("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ug(e);t.vu.add(4),await bx(t),t.bu.set("Unknown"),t.vu.delete(4),await wx(t)}(this))})}),this.bu=new yx(n,r)}}async function wx(e){if(Cx(e))for(const t of e.Ru)await t(!0)}async function bx(e){for(const t of e.Ru)await t(!1)}function xx(e,t){const n=ug(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Tx(n)?kx(n):Hx(n).Ko()&&Ex(n,t))}function _x(e,t){const n=ug(e),r=Hx(n);n.Au.delete(t),r.Ko()&&Sx(n,t),0===n.Au.size&&(r.Ko()?r.jo():Cx(n)&&n.bu.set("Unknown"))}function Ex(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Cg.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hx(e).su(t)}function Sx(e,t){e.Vu.qt(t),Hx(e).iu(t)}function kx(e){e.Vu=new Uw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Hx(e).start(),e.bu.gu()}function Tx(e){return Cx(e)&&!Hx(e).Uo()&&e.Au.size>0}function Cx(e){return 0===ug(e).vu.size}function Ix(e){e.Vu=void 0}async function Ax(e){e.Au.forEach((t,n)=>{Ex(e,t)})}async function Nx(e,t){Ix(e),Tx(e)?(e.bu.Iu(t),kx(e)):e.bu.set("Unknown")}async function Px(e,t,n){if(e.bu.set("Online"),t instanceof Fw&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){sg("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rx(e,n)}else if(t instanceof Mw?e.Vu.Ht(t):t instanceof jw?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Cg.min()))try{const t=await Kb(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(oy.EMPTY_BYTE_STRING,r.snapshotVersion)),Sx(e,t);const s=new bb(r.target,t,n,r.sequenceNumber);Ex(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){sg("RemoteStore","Failed to raise snapshot:",t),await Rx(e,t)}}async function Rx(e,t,n){if(!$g(t))throw t;e.vu.add(1),await bx(e),e.bu.set("Offline"),n||(n=()=>Kb(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sg("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await wx(e)})}function Dx(e,t){return t().catch(n=>Rx(e,n,t))}async function Ox(e){const t=ug(e),n=Wx(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Lx(t);)try{const e=await Qb(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Mx(t,e)}catch(e){await Rx(t,e)}jx(t)&&Fx(t)}function Lx(e){return Cx(e)&&e.Eu.length<10}function Mx(e,t){e.Eu.push(t);const n=Wx(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function jx(e){return Cx(e)&&!Wx(e).Uo()&&e.Eu.length>0}function Fx(e){Wx(e).start()}async function Vx(e){Wx(e).hu()}async function Ux(e){const t=Wx(e);for(const n of e.Eu)t.uu(n.mutations)}async function Bx(e,t,n){const r=e.Eu.shift(),s=ww.from(r,t,n);await Dx(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Ox(e)}async function $x(e,t){t&&Wx(e).ou&&await async function(e,t){if(Sw(n=t.code)&&n!==hg.ABORTED){const n=e.Eu.shift();Wx(e).Qo(),await Dx(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ox(e)}var n}(e,t),jx(e)&&Fx(e)}async function zx(e,t){const n=ug(e);n.asyncQueue.verifyOperationInProgress(),sg("RemoteStore","RemoteStore received new credentials");const r=Cx(n);n.vu.add(3),await bx(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await wx(n)}async function qx(e,t){const n=ug(e);t?(n.vu.delete(2),await wx(n)):t||(n.vu.add(2),await bx(n),n.bu.set("Unknown"))}function Hx(e){return e.Su||(e.Su=function(e,t,n){const r=ug(e);return r.fu(),new px(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Ax.bind(null,e),ao:Nx.bind(null,e),nu:Px.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Tx(e)?kx(e):e.bu.set("Unknown")):(await e.Su.stop(),Ix(e))})),e.Su}function Wx(e){return e.Du||(e.Du=function(e,t,n){const r=ug(e);return r.fu(),new mx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Vx.bind(null,e),ao:$x.bind(null,e),au:Ux.bind(null,e),cu:Bx.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Ox(e)):(await e.Du.stop(),e.Eu.length>0&&(sg("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}class Kx{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new fg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Kx(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dg(hg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gx(e,t){if(ig("AsyncQueue",`${t}: ${e}`),$g(e))return new dg(hg.UNAVAILABLE,`${t}: ${e}`);throw e}class Qx{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Rg.comparator(t.key,n.key):(e,t)=>Rg.comparator(e.key,t.key),this.keyedMap=Nv(),this.sortedSet=new Zg(this.comparator)}static emptySet(e){return new Qx(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qx))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Qx;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Xx{constructor(){this.Cu=new Zg(Rg.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):lg():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Yx{constructor(e,t,n,r,s,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Yx(e,t,Qx.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Jx{constructor(){this.Nu=void 0,this.listeners=[]}}class Zx{constructor(){this.queries=new Tv(e=>bv(e),wv),this.onlineState="Unknown",this.ku=new Set}}async function e_(e,t){const n=ug(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Jx),s)try{i.Nu=await n.onListen(r)}catch(e){const n=Gx(e,`Initialization of query '${xv(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Mu(n.onlineState),i.Nu&&t.$u(i.Nu)&&s_(n)}async function t_(e,t){const n=ug(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function n_(e,t){const n=ug(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&s_(n)}function r_(e,t,n){const r=ug(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function s_(e){e.ku.forEach(e=>{e.next()})}class i_{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Yx(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Yx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class o_{constructor(e){this.key=e}}class a_{constructor(e){this.key=e}}class l_{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=jv(),this.mutatedKeys=jv(),this.tc=Sv(e),this.ec=new Qx(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Xx,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=_v(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:o,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lg()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==s.length||a?{snapshot:new Yx(this.query,e.ec,r,s,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Xx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=jv(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new a_(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new o_(n))}),t}hc(e){this.Yu=e.ir,this.Zu=jv();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Yx.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class c_{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class u_{constructor(e){this.key=e,this.fc=!1}}class h_{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new Tv(e=>bv(e),wv),this._c=new Map,this.mc=new Set,this.gc=new Zg(Rg.comparator),this.yc=new Map,this.Ic=new Db,this.Tc={},this.Ec=new Map,this.Ac=Cb.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function d_(e,t){const n=N_(e);let r,s;const i=n.wc.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const e=await Xb(n.localStore,gv(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await f_(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&xx(n.remoteStore,e)}return s}async function f_(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await Jb(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i);return S_(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const i=await Jb(e.localStore,t,!0),o=new l_(t,i.ir),a=o.sc(i.documents),l=Lw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=o.applyChanges(a,e.isPrimaryClient,l);S_(e,n,c.cc);const u=new c_(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function p_(e,t){const n=ug(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(e=>!wv(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Yb(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),_x(n.remoteStore,r.targetId),__(n,r.targetId)}).catch(Ug)):(__(n,r.targetId),await Yb(n.localStore,r.targetId,!0))}async function m_(e,t){const n=ug(e);try{const e=await function(e,t){const n=ug(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const o=[];t.targetChanges.forEach((i,a)=>{const l=s.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(oy.EMPTY_BYTE_STRING,Cg.min()).withLastLimboFreeSnapshotVersion(Cg.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&o.push(n.Bs.updateTargetData(e,c))});let a=Iv(),l=jv();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Gb(e,i,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(Cg.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Bg.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(cg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?cg(r.fc):e.removedDocuments.size>0&&(cg(r.fc),r.fc=!1))}),await C_(n,e,t)}catch(e){await Ug(e)}}function g_(e,t,n){const r=ug(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=ug(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)}),r&&s_(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function y_(e,t,n){const r=ug(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),i=s&&s.key;if(i){let e=new Zg(Rg.comparator);e=e.insert(i,Oy.newNoDocument(i,Cg.min()));const n=jv().add(i),s=new Ow(Cg.min(),new Map,new Zg(Sg),e,n);await m_(r,s),r.gc=r.gc.remove(i),r.yc.delete(t),T_(r)}else await Yb(r.localStore,t,!1).then(()=>__(r,t,n)).catch(Ug)}async function v_(e,t){const n=ug(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ug(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Bg.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);cg(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=jv();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);x_(n,r,null),b_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await C_(n,e)}catch(e){await Ug(e)}}async function w_(e,t,n){const r=ug(e);try{const e=await function(e,t){const n=ug(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(cg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);x_(r,t,n),b_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await C_(r,e)}catch(n){await Ug(n)}}function b_(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function x_(e,t,n){const r=ug(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function __(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||E_(e,t)})}function E_(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(_x(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),T_(e))}function S_(e,t,n){for(const r of n)r instanceof o_?(e.Ic.addReference(r.key,t),k_(e,r)):r instanceof a_?(sg("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||E_(e,r.key)):lg()}function k_(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(sg("SyncEngine","New document in limbo: "+n),e.mc.add(r),T_(e))}function T_(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Rg(Ag.fromString(t)),r=e.Ac.next();e.yc.set(r,new u_(n)),e.gc=e.gc.insert(n,r),xx(e.remoteStore,new bb(gv(uv(n.path)),r,"TargetPurposeLimboResolution",zg.ct))}}async function C_(e,t,n){const r=ug(e),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=$b.Li(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.dc.nu(s),await async function(e,t){const n=ug(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bg.forEach(t,t=>Bg.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bg.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!$g(e))throw e;sg("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,i))}async function I_(e,t){const n=ug(e);if(!n.currentUser.isEqual(t)){sg("SyncEngine","User change. New user:",t.toKey());const e=await Wb(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new dg(hg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await C_(n,e.er)}}function A_(e,t){const n=ug(e),r=n.yc.get(t);if(r&&r.fc)return jv().add(r.key);{let e=jv();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function N_(e){const t=ug(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=m_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=A_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=y_.bind(null,t),t.dc.nu=n_.bind(null,t.eventManager),t.dc.Pc=r_.bind(null,t.eventManager),t}function P_(e){const t=ug(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=v_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=w_.bind(null,t),t}class R_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hx(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Hb(this.persistence,new zb,e.initialUser,this.serializer)}createPersistence(e){return new Vb(Bb.zs,this.serializer)}createSharedClientState(e){return new tx}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class D_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>g_(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=I_.bind(null,this.syncEngine),await qx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zx}createDatastore(e){const t=hx(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new cx(r));var r;return function(e,t,n,r){return new gx(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>g_(this.syncEngine,e,0),i=rx.D()?new rx:new nx,new vx(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new h_(e,t,n,r,s,i);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ug(e);sg("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await bx(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class O_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ig("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class L_{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=eg.UNAUTHENTICATED,this.clientId=Eg.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{sg("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(sg("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dg(hg.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gx(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function M_(e,t){e.asyncQueue.verifyOperationInProgress(),sg("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Wb(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function j_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await V_(e);sg("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>zx(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>zx(t.remoteStore,n)),e._onlineComponents=t}function F_(e){return"FirebaseError"===e.name?e.code===hg.FAILED_PRECONDITION||e.code===hg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function V_(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sg("FirestoreClient","Using user provided OfflineComponentProvider");try{await M_(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!F_(n))throw n;og("Error using user provided cache. Falling back to memory cache: "+n),await M_(e,new R_)}}else sg("FirestoreClient","Using default OfflineComponentProvider"),await M_(e,new R_);return e._offlineComponents}async function U_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sg("FirestoreClient","Using user provided OnlineComponentProvider"),await j_(e,e._uninitializedComponentsProvider._online)):(sg("FirestoreClient","Using default OnlineComponentProvider"),await j_(e,new D_))),e._onlineComponents}function B_(e){return U_(e).then(e=>e.syncEngine)}async function $_(e){const t=await U_(e),n=t.eventManager;return n.onListen=d_.bind(null,t.syncEngine),n.onUnlisten=p_.bind(null,t.syncEngine),n}function z_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new fg;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new O_({next:i=>{t.enqueueAndForget(()=>t_(e,o));const a=i.docs.has(n);!a&&i.fromCache?s.reject(new dg(hg.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&r&&"server"===r.source?s.reject(new dg(hg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(i)},error:e=>s.reject(e)}),o=new i_(uv(n.path),i,{includeMetadataChanges:!0,Ku:!0});return e_(e,o)}(await $_(e),e.asyncQueue,t,n,r)),r.promise}function q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new fg;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new O_({next:n=>{t.enqueueAndForget(()=>t_(e,o)),n.fromCache&&"server"===r.source?s.reject(new dg(hg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new i_(n,i,{includeMetadataChanges:!0,Ku:!0});return e_(e,o)}(await $_(e),e.asyncQueue,t,n,r)),r.promise}function H_(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const W_=new Map;function K_(e,t,n){if(!n)throw new dg(hg.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function G_(e){if(!Rg.isDocumentKey(e))throw new dg(hg.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Q_(e){if(Rg.isDocumentKey(e))throw new dg(hg.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function X_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":lg()}function Y_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new dg(hg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=X_(e);throw new dg(hg.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function J_(e,t){if(t<=0)throw new dg(hg.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Z_{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new dg(hg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new dg(hg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new dg(hg.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H_(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new dg(hg.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new dg(hg.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new dg(hg.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class eE{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dg(hg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new dg(hg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new mg;switch(e.type){case"firstParty":return new wg(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new dg(hg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=W_.get(e);t&&(sg("ComponentProvider","Removing Datastore"),W_.delete(e),t.terminate())}(this),Promise.resolve()}}function tE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Y_(e,eE))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==o&&og("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=eg.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vo(JSON.stringify({alg:"none",type:"JWT"})),Vo(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new dg(hg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new eg(i)}e._authCredentials=new gg(new pg(t,n))}}class nE{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nE(this.firestore,e,this._key)}}class rE{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rE(this.firestore,e,this._query)}}class sE extends rE{constructor(e,t,n){super(e,t,uv(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nE(this.firestore,null,new Rg(e))}withConverter(e){return new sE(this.firestore,e,this._path)}}function iE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=ia(e),K_("collection","path",t),e instanceof eE){const n=Ag.fromString(t,...r);return Q_(n),new sE(e,null,n)}{if(!(e instanceof nE||e instanceof sE))throw new dg(hg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ag.fromString(t,...r));return Q_(n),new sE(e.firestore,null,n)}}function oE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=ia(e),1===arguments.length&&(t=Eg.A()),K_("doc","path",t),e instanceof eE){const n=Ag.fromString(t,...r);return G_(n),new nE(e,null,new Rg(n))}{if(!(e instanceof nE||e instanceof sE))throw new dg(hg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ag.fromString(t,...r));return G_(n),new nE(e.firestore,e instanceof sE?e.converter:null,new Rg(n))}}class aE{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new dx(this,"async_queue_retry"),this.Xc=()=>{const e=ux();e&&sg("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=ux();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ux();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new fg;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!$g(e))throw e;sg("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ig("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Kx.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&lg()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class lE extends eE{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new aE,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||uE(this),this._firestoreClient.terminate()}}function cE(e){return e._firestoreClient||uE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function uE(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new py(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,H_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new L_(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}class hE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hE(oy.fromBase64String(e))}catch(e){throw new dg(hg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hE(oy.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new dg(hg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pg(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fE{constructor(e){this._methodName=e}}class pE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new dg(hg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new dg(hg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sg(this._lat,e._lat)||Sg(this._long,e._long)}}const mE=/^__.*__$/;class gE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new dw(e,this.data,this.fieldMask,t,this.fieldTransforms):new hw(e,this.data,t,this.fieldTransforms)}}class yE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new dw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lg()}}class wE{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new wE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return LE(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(vE(this.ca)&&mE.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bE{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hx(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new wE({ca:e,methodName:t,ga:n,path:Pg.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xE(e){const t=e._freezeSettings(),n=hx(e._databaseId);return new bE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function _E(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(i.merge||i.mergeFields?2:0,t,n,s);PE("Data must be an object, but it was:",o,r);const a=AE(r,o);let l,c;if(i.merge)l=new sy(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=RE(t,r,n);if(!o.contains(s))throw new dg(hg.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);ME(e,s)||e.push(s)}l=new sy(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new gE(new Ry(a),l,c)}class EE extends fE{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof EE}}class SE extends fE{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Jv(e.serializer,$v(e.serializer,this.Ia));return new tw(e.path,t)}isEqual(e){return this===e}}function kE(e,t,n,r){const s=e.ya(1,t,n);PE("Data must be an object, but it was:",s,r);const i=[],o=Ry.empty();Yg(r,(e,r)=>{const a=OE(t,e,n);r=ia(r);const l=s.da(a);if(r instanceof EE)i.push(a);else{const e=IE(r,l);null!=e&&(i.push(a),o.set(a,e))}});const a=new sy(i);return new yE(o,a,s.fieldTransforms)}function TE(e,t,n,r,s,i){const o=e.ya(1,t,n),a=[RE(t,r,n)],l=[s];if(i.length%2!=0)throw new dg(hg.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(RE(t,i[d])),l.push(i[d+1]);const c=[],u=Ry.empty();for(let d=a.length-1;d>=0;--d)if(!ME(c,a[d])){const e=a[d];let t=l[d];t=ia(t);const n=o.da(e);if(t instanceof EE)c.push(e);else{const r=IE(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new sy(c);return new yE(u,h,o.fieldTransforms)}function CE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return IE(n,e.ya(r?4:3,t))}function IE(e,t){if(NE(e=ia(e)))return PE("Unsupported field value:",t,e),AE(e,t);if(e instanceof fE)return function(e,t){if(!vE(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=IE(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ia(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $v(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Tg.fromDate(e);return{timestampValue:Gw(t.serializer,n)}}if(e instanceof Tg){const n=new Tg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gw(t.serializer,n)}}if(e instanceof pE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hE)return{bytesValue:Qw(t.serializer,e._byteString)};if(e instanceof nE){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Jw(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${X_(e)}`)}(e,t)}function AE(e,t){const n={};return Jg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yg(e,(e,r)=>{const s=IE(r,t.ha(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function NE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tg||e instanceof pE||e instanceof hE||e instanceof nE||e instanceof fE)}function PE(e,t,n){if(!NE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=X_(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function RE(e,t,n){if((t=ia(t))instanceof dE)return t._internalPath;if("string"==typeof t)return OE(e,t);throw LE("Field path arguments must be of type string or ",e,!1,void 0,n)}const DE=new RegExp("[~\\*/\\[\\]]");function OE(e,t,n){if(t.search(DE)>=0)throw LE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dE(...t.split("."))._internalPath}catch(r){throw LE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function LE(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new dg(hg.INVALID_ARGUMENT,a+e+l)}function ME(e,t){return e.some(e=>e.isEqual(t))}class jE{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new FE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VE("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class FE extends jE{data(){return super.data()}}function VE(e,t){return"string"==typeof t?OE(e,t):t instanceof dE?t._internalPath:t._delegate._internalPath}function UE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new dg(hg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class BE{}class $E extends BE{}class zE extends $E{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zE(e,t,n)}_apply(e){const t=this._parse(e);return QE(e._query,t),new rE(e.firestore,e.converter,yv(e._query,t))}_parse(e){const t=xE(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new dg(hg.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){GE(o,i);const t=[];for(const n of o)t.push(KE(r,e,n));a={arrayValue:{values:t}}}else a=KE(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||GE(o,i),a=CE(n,"where",o,"in"===i||"not-in"===i);return By.create(s,i,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class qE extends BE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new qE(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:$y.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)QE(n,s),n=yv(n,s)}(e._query,t),new rE(e.firestore,e.converter,yv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class HE extends $E{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new HE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new dg(hg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new dg(hg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Fy(t,n);return function(e,t){if(null===dv(e)){const n=fv(e);null!==n&&XE(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new rE(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new lv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class WE extends $E{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new WE(e,t,n)}_apply(e){return new rE(e.firestore,e.converter,vv(e._query,this._limit,this._limitType))}}function KE(e,t,n){if("string"==typeof(n=ia(n))){if(""===n)throw new dg(hg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pv(t)&&-1!==n.indexOf("/"))throw new dg(hg.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ag.fromString(n));if(!Rg.isDocumentKey(r))throw new dg(hg.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sy(e,new Rg(r))}if(n instanceof nE)return Sy(e,n._key);throw new dg(hg.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X_(n)}.`)}function GE(e,t){if(!Array.isArray(e)||0===e.length)throw new dg(hg.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function QE(e,t){if(t.isInequality()){const n=fv(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new dg(hg.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const s=dv(e);null!==s&&XE(e,r,s)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new dg(hg.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new dg(hg.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function XE(e,t,n){if(!n.isEqual(t))throw new dg(hg.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class YE{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cy(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lg()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Yg(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new pE(cy(e.latitude),cy(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fy(e));default:return null}}convertTimestamp(e){const t=ly(e);return new Tg(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ag.fromString(e);cg(wb(n));const r=new my(n.get(1),n.get(3)),s=new Rg(n.popFirst(5));return r.isEqual(t)||ig(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function JE(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ZE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eS extends jE{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new tS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(VE("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class tS extends eS{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class nS{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ZE(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new tS(this._firestore,this._userDataWriter,n.key,n,new ZE(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dg(hg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new tS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ZE(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new tS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ZE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:rS(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function rS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lg()}}function sS(e){e=Y_(e,nE);const t=Y_(e.firestore,lE);return z_(cE(t),e._key).then(n=>uS(t,e,n))}class iS extends YE{constructor(e){super(),this.firestore=e}convertBytes(e){return new hE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nE(this.firestore,null,t)}}function oS(e){e=Y_(e,rE);const t=Y_(e.firestore,lE),n=cE(t),r=new iS(t);return UE(e._query),q_(n,e._query).then(n=>new nS(t,r,e,n))}function aS(e,t,n){e=Y_(e,nE);const r=Y_(e.firestore,lE),s=JE(e.converter,t,n);return cS(r,[_E(xE(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,rw.none())])}function lS(e,t,n){e=Y_(e,nE);const r=Y_(e.firestore,lE),s=xE(r);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return i="string"==typeof(t=ia(t))||t instanceof dE?TE(s,"updateDoc",e._key,t,n,a):kE(s,"updateDoc",e._key,t),cS(r,[i.toMutation(e._key,rw.exists(!0))])}function cS(e,t){return function(e,t){const n=new fg;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=P_(e);try{const e=await function(e,t){const n=ug(e),r=Tg.now(),s=t.reduce((e,t)=>e.add(t.key),jv());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Iv(),l=jv();return n.Zi.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=cw(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new dw(e.key,t,Dy(t.value.mapValue),rw.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Pv(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Zg(Sg)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await C_(r,e.changes),await Ox(r.remoteStore)}catch(e){const t=Gx(e,"Failed to persist write");n.reject(t)}}(await B_(e),t,n)),n.promise}(cE(e),t)}function uS(e,t,n){const r=n.docs.get(t._key),s=new iS(e);return new eS(e,s,t._key,r,new ZE(n.hasPendingWrites,n.fromCache),t.converter)}function hS(e){return new SE("increment",e)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tg=e}(gl),dl(new oa("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),o=new lE(new yg(e.getProvider("auth-internal")),new xg(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new dg(hg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new my(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),wl(Zm,"3.13.0",e),wl(Zm,"3.13.0","esm2017")}();const dS=yl({apiKey:"AIzaSyBCNdT3rmoZlQLHC5hrnedlI4lcK9A62BQ",authDomain:"casequest-62b9b.firebaseapp.com",projectId:"casequest-62b9b",storageBucket:"casequest-62b9b.firebasestorage.app",messagingSenderId:"329872421373",appId:"1:329872421373:web:828b8c247e79e1233d2994",measurementId:"G-ED7SRYX2XK"}),fS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vl();const t=fl(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=fl(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Jo(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ml(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:kh,persistence:[Fu,xu,Eu]}),r=Ho("authTokenSyncURL");if(r){const e=(s=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ah)return;const r=null===t||void 0===t?void 0:t.token;Nh!==r&&(Nh=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){ia(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){ia(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var s;const i=zo("auth");return i&&qc(n,`http://${i}`),n}(dS),pS=function(e,t){const n="string"==typeof e?e:t||"(default)",r=fl("object"==typeof e?e:vl(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=zo(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&tE(r,...e)}return r}(dS),mS=ao("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]),gS=ao("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),yS={Snowflake:(0,So.jsx)(mS,{className:"h-10 w-10 text-blue-400 mb-4"}),Default:(0,So.jsx)(gS,{className:"h-10 w-10 text-gray-400 mb-4"})},vS=e=>{var t;let{user:n,onPurchase:s}=e;const[i,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{const e=(await oS(iE(pS,"store_items"))).docs.map(e=>({id:e.id,...e.data()}));o(e)}catch(e){u("Failed to load store items. Please try again later."),console.error("Error fetching store items:",e)}finally{l(!1)}})()},[]),(0,So.jsxs)("div",{className:"p-4",children:[(0,So.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,So.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Store"}),(0,So.jsxs)("div",{className:"flex items-center text-lg font-semibold bg-yellow-100 text-yellow-800 rounded-full px-4 py-2",children:[(0,So.jsx)(Oo,{className:"h-6 w-6 mr-2"}),(0,So.jsxs)("span",{children:[null!==(t=null===n||void 0===n?void 0:n.caseCoins)&&void 0!==t?t:0," Coins"]})]})]}),a&&(0,So.jsx)("div",{children:"Loading items..."}),c&&(0,So.jsx)("div",{className:"text-red-600",children:c}),(0,So.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>(0,So.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 flex flex-col items-center text-center",children:[yS[e.icon]||yS.Default,(0,So.jsx)("h2",{className:"text-xl font-bold mb-2",children:e.name}),(0,So.jsx)("p",{className:"text-gray-600 mb-4 flex-grow",children:e.description}),(0,So.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,So.jsx)(Oo,{className:"h-5 w-5 mr-1 text-yellow-600"}),(0,So.jsx)("span",{className:"text-lg font-semibold",children:e.cost})]}),(0,So.jsx)("button",{onClick:()=>s(e),disabled:n.caseCoins<e.cost,className:"w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed hover:bg-blue-700",children:"Buy"})]},e.id))})]})},wS=e=>{let{currentUser:t}=e;const[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{const t=function(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof BE&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof qE).length,n=e.filter(e=>e instanceof zE).length;if(t>1||t>0&&n>0)throw new dg(hg.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(iE(pS,"users"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=VE("orderBy",e);return HE._create(n,t)}("total_xp","desc"),(J_("limit",e=20),WE._create("limit",e,"F"))),n=(await oS(t)).docs.map(e=>({id:e.id,...e.data()}));s(n)}catch(t){l("Failed to load leaderboard. Please try again later."),console.error("Error fetching leaderboard:",t)}finally{o(!1)}var e})()},[]),(0,So.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,So.jsxs)("div",{className:"flex items-center mb-6",children:[(0,So.jsx)(go,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,So.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Top Consultants"})]}),i&&(0,So.jsx)("div",{children:"Loading leaderboard..."}),a&&(0,So.jsx)("div",{className:"text-red-600 text-center py-4",children:a}),(0,So.jsx)("ul",{className:"space-y-3",children:n.map((e,n)=>(0,So.jsxs)("li",{className:"flex items-center p-4 rounded-lg transition-colors "+((null===t||void 0===t?void 0:t.uid)===e.id?"bg-blue-100 border-l-4 border-blue-500":"bg-gray-50"),children:[(0,So.jsx)("span",{className:"font-bold text-lg text-gray-600 w-8",children:n+1}),(0,So.jsx)("div",{className:"flex-grow font-semibold text-gray-800",children:e.email?e.email.split("@")[0]:"Anonymous"}),(0,So.jsxs)("div",{className:"font-bold text-blue-600 text-lg",children:[e.total_xp," XP"]})]},e.id))})]})},bS=ao("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]),xS=ao("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),_S=ao("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ES=ao("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),SS=ao("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),kS="RFC3986",TS={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},CS=(Object.prototype.hasOwnProperty,Array.isArray),IS=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();const AS=1024;function NS(e,t){if(CS(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const PS=Object.prototype.hasOwnProperty,RS={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},DS=Array.isArray,OS=Array.prototype.push,LS=function(e,t){OS.apply(e,DS(t)?t:[t])},MS=Date.prototype.toISOString,jS={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,s)=>{if(0===e.length)return e;let i=e;if("symbol"===typeof e?i=Symbol.prototype.toString.call(e):"string"!==typeof e&&(i=String(e)),"iso-8859-1"===n)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let o="";for(let a=0;a<i.length;a+=AS){const e=i.length>=AS?i.slice(a,a+AS):i,t=[];for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===s&&(40===r||41===r)?t[t.length]=e.charAt(n):r<128?t[t.length]=IS[r]:r<2048?t[t.length]=IS[192|r>>6]+IS[128|63&r]:r<55296||r>=57344?t[t.length]=IS[224|r>>12]+IS[128|r>>6&63]+IS[128|63&r]:(n+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t[t.length]=IS[240|r>>18]+IS[128|r>>12&63]+IS[128|r>>6&63]+IS[128|63&r])}o+=t.join("")}return o},encodeValuesOnly:!1,format:kS,formatter:TS[kS],indices:!1,serializeDate:e=>MS.call(e),skipNulls:!1,strictNullHandling:!1};const FS={};function VS(e,t,n,r,s,i,o,a,l,c,u,h,d,f,p,m,g,y){let v=e,w=y,b=0,x=!1;for(;void 0!==(w=w.get(FS))&&!x;){const t=w.get(e);if(b+=1,"undefined"!==typeof t){if(t===b)throw new RangeError("Cyclic object value");x=!0}"undefined"===typeof w.get(FS)&&(b=0)}if("function"===typeof c?v=c(t,v):v instanceof Date?v=d?.(v):"comma"===n&&DS(v)&&(v=NS(v,function(e){return e instanceof Date?d?.(e):e})),null===v){if(i)return l&&!m?l(t,jS.encoder,g,"key",f):t;v=""}if(function(e){return"string"===typeof e||"number"===typeof e||"boolean"===typeof e||"symbol"===typeof e||"bigint"===typeof e}(v)||function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}(v)){if(l){const e=m?t:l(t,jS.encoder,g,"key",f);return[p?.(e)+"="+p?.(l(v,jS.encoder,g,"value",f))]}return[p?.(t)+"="+p?.(String(v))]}const _=[];if("undefined"===typeof v)return _;let E;if("comma"===n&&DS(v))m&&l&&(v=NS(v,l)),E=[{value:v.length>0?v.join(",")||null:void 0}];else if(DS(c))E=c;else{const e=Object.keys(v);E=u?e.sort(u):e}const S=a?String(t).replace(/\./g,"%2E"):String(t),k=r&&DS(v)&&1===v.length?S+"[]":S;if(s&&DS(v)&&0===v.length)return k+"[]";for(let T=0;T<E.length;++T){const t=E[T],w="object"===typeof t&&"undefined"!==typeof t.value?t.value:v[t];if(o&&null===w)continue;const x=h&&a?t.replace(/\./g,"%2E"):t,S=DS(v)?"function"===typeof n?n(k,x):k:k+(h?"."+x:"["+x+"]");y.set(e,b);const C=new WeakMap;C.set(FS,y),LS(_,VS(w,S,n,r,s,i,o,a,"comma"===n&&m&&DS(v)?null:l,c,u,h,d,f,p,m,g,C))}return _}function US(e){let t=e;const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jS;if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.encodeDotInKeys&&"boolean"!==typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||jS.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=kS;if("undefined"!==typeof e.format){if(!PS.call(TS,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=TS[n];let s,i=jS.filter;if(("function"===typeof e.filter||DS(e.filter))&&(i=e.filter),s=e.arrayFormat&&e.arrayFormat in RS?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":jS.arrayFormat,"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o="undefined"===typeof e.allowDots?!0===!!e.encodeDotInKeys||jS.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:jS.addQueryPrefix,allowDots:o,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:jS.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:jS.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:"undefined"===typeof e.delimiter?jS.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:jS.encode,encodeDotInKeys:"boolean"===typeof e.encodeDotInKeys?e.encodeDotInKeys:jS.encodeDotInKeys,encoder:"function"===typeof e.encoder?e.encoder:jS.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:jS.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:jS.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:jS.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:jS.strictNullHandling}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});let r,s;"function"===typeof n.filter?(s=n.filter,t=s("",t)):DS(n.filter)&&(s=n.filter,r=s);const i=[];if("object"!==typeof t||null===t)return"";const o=RS[n.arrayFormat],a="comma"===o&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const l=new WeakMap;for(let h=0;h<r.length;++h){const e=r[h];n.skipNulls&&null===t[e]||LS(i,VS(t[e],e,o,a,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}const c=i.join(n.delimiter);let u=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?u+="utf8=%26%2310003%3B&":u+="utf8=%E2%9C%93&"),c.length>0?u+c:""}const BS="4.104.0";let $S,zS,qS,HS,WS,KS,GS,QS,XS,YS=!1,JS=null,ZS=null,ek=null,tk=null;class nk{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const rk=()=>{$S||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(YS)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if($S)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${$S}'\``);YS=t.auto,$S=e.kind,zS=e.fetch,JS=e.Request,ZS=e.Response,ek=e.Headers,qS=e.FormData,tk=e.Blob,HS=e.File,WS=e.ReadableStream,KS=e.getMultipartRequestOptions,GS=e.getDefaultAgent,QS=e.fileFromPath,XS=e.isFsReadStream}(function(){let{manuallyImported:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,i;try{n=fetch,r=Request,s=Response,i=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:i,FormData:"undefined"!==typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!==typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!==typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!==typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new nk(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0})};rk();class sk extends Error{}class ik extends sk{constructor(e,t,n,r){super(`${ik.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"],this.error=t;const s=t;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,t,n){const r=t?.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new ak({message:n,cause:aT(t)});const s=t?.error;return 400===e?new ck(e,s,n,r):401===e?new uk(e,s,n,r):403===e?new hk(e,s,n,r):404===e?new dk(e,s,n,r):409===e?new fk(e,s,n,r):422===e?new pk(e,s,n,r):429===e?new mk(e,s,n,r):e>=500?new gk(e,s,n,r):new ik(e,s,n,r)}}class ok extends ik{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0)}}class ak extends ik{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class lk extends ak{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:e??"Request timed out."})}}class ck extends ik{}class uk extends ik{}class hk extends ik{}class dk extends ik{}class fk extends ik{}class pk extends ik{}class mk extends ik{}class gk extends ik{}class yk extends sk{constructor(){super("Could not parse response content as the length limit was reached")}}class vk extends sk{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var wk,bk=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},xk=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class _k{constructor(){wk.set(this,void 0),this.buffer=new Uint8Array,bk(this,wk,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?(new TextEncoder).encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let s;for(;null!=(s=Ek(this.buffer,xk(this,wk,"f")));){if(s.carriage&&null==xk(this,wk,"f")){bk(this,wk,s.index,"f");continue}if(null!=xk(this,wk,"f")&&(s.index!==xk(this,wk,"f")+1||s.carriage)){r.push(this.decodeText(this.buffer.slice(0,xk(this,wk,"f")-1))),this.buffer=this.buffer.slice(xk(this,wk,"f")),bk(this,wk,null,"f");continue}const e=null!==xk(this,wk,"f")?s.preceding-1:s.preceding,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(s.index),bk(this,wk,null,"f")}return r}decodeText(e){if(null==e)return"";if("string"===typeof e)return e;if("undefined"!==typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new sk(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!==typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new sk(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new sk("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function Ek(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Sk(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}function kk(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}wk=new WeakMap,_k.NEWLINE_CHARS=new Set(["\n","\r"]),_k.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Tk{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new Tk(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new sk("Attempted to iterate over a response with no body");const n=new Ck,r=new _k,s=kk(e.body);for await(const i of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"===typeof n?(new TextEncoder).encode(n):n;let r,s=new Uint8Array(t.length+e.length);for(s.set(t),s.set(e,t.length),t=s;-1!==(r=Sk(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(s))for(const e of r.decode(i)){const t=n.decode(e);t&&(yield t)}for(const i of r.flush()){const e=n.decode(i);e&&(yield e)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event||n.event.startsWith("response.")||n.event.startsWith("transcript.")){let t;try{t=JSON.parse(n.data)}catch(s){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),s}if(t&&t.error)throw new ik(void 0,t.error,void 0,Gk(e.headers));yield t}else{let e;try{e=JSON.parse(n.data)}catch(s){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),s}if("error"==n.event)throw new ik(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(s){if(s instanceof Error&&"AbortError"===s.name)return;throw s}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;return new Tk(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new _k,n=kk(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(s){if(s instanceof Error&&"AbortError"===s.name)return;throw s}finally{r||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Tk(()=>r(e),this.controller),new Tk(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new WS({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:s}=await t.next();if(s)return e.close();const i=n.encode(JSON.stringify(r)+"\n");e.enqueue(i)}catch(r){e.error(r)}},async cancel(){await(t.return?.())}})}}class Ck{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}const Ik=e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob,Ak=e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&Nk(e),Nk=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer,Pk=e=>Ak(e)||Ik(e)||XS(e);async function Rk(e,t,n){if(e=await e,Ak(e))return e;if(Ik(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=Nk(r)?[await r.arrayBuffer()]:[r];return new HS(s,t,n)}const r=await async function(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Nk(e))t.push(await e.arrayBuffer());else{if(!Ok(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return Dk(e.name)||Dk(e.filename)||Dk(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=r[0]?.type;"string"===typeof e&&(n={...n,type:e})}return new HS(r,t,n)}const Dk=e=>"string"===typeof e?e:"undefined"!==typeof Buffer&&e instanceof Buffer?String(e):void 0,Ok=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Lk=e=>e&&"object"===typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],Mk=async e=>{const t=await jk(e.body);return KS(t,e)},jk=async e=>{const t=new qS;return await Promise.all(Object.entries(e||{}).map(e=>{let[n,r]=e;return Fk(t,n,r)})),t},Fk=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(Pk(n)){const r=await Rk(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>Fk(e,t+"[]",n)));else{if("object"!==typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(n=>{let[r,s]=n;return Fk(e,`${t}[${r}]`,s)}))}}};var Vk,Uk=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Bk=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};async function $k(e){const{response:t}=e;if(e.options.stream)return fT("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Tk.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type"),r=n?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const e=await t.json();return fT("response",t.status,t.url,t.headers,e),zk(e,t)}const s=await t.text();return fT("response",t.status,t.url,t.headers,s),s}function zk(e,t){return!e||"object"!==typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}rk();class qk extends Promise{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$k;super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new qk(this.responsePromise,async t=>zk(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Hk{constructor(e){let{baseURL:t,maxRetries:n=2,timeout:r=6e5,httpAgent:s,fetch:i}=e;this.baseURL=t,this.maxRetries=oT("maxRetries",n),this.timeout=oT("timeout",r),this.httpAgent=s,this.fetch=i??zS}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...tT(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${pT()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{const r=n&&Nk(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"===typeof e){if("undefined"!==typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!==typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){let{retryCount:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={...e},{method:r,path:s,query:i,headers:o={}}=n,a=ArrayBuffer.isView(n.body)||n.__binaryRequest&&"string"===typeof n.body?n.body:Lk(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,l=this.calculateContentLength(a),c=this.buildURL(s,i);"timeout"in n&&oT("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const u=n.httpAgent??this.httpAgent??GS(c),h=n.timeout+1e3;"number"===typeof u?.options?.timeout&&h>(u.options.timeout??0)&&(u.options.timeout=h),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:r,...a&&{body:a},headers:this.buildHeaders({options:n,headers:o,contentLength:l,retryCount:t}),...u&&{agent:u},signal:n.signal??null},url:c,timeout:n.timeout}}buildHeaders(e){let{options:t,headers:n,contentLength:r,retryCount:s}=e;const i={};r&&(i["content-length"]=r);const o=this.defaultHeaders(t);return hT(i,o),hT(i,n),Lk(t.body)&&"node"!==$S&&delete i["content-type"],void 0===mT(o,"x-stainless-retry-count")&&void 0===mT(n,"x-stainless-retry-count")&&(i["x-stainless-retry-count"]=String(s)),void 0===mT(o,"x-stainless-timeout")&&void 0===mT(n,"x-stainless-timeout")&&t.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(t.timeout/1e3))),this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return ik.generate(e,t,n,r)}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new qk(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,r=n.maxRetries??this.maxRetries;null==t&&(t=r),await this.prepareOptions(n);const{req:s,url:i,timeout:o}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(s,{url:i,options:n}),fT("request",i,n,s.headers),n.signal?.aborted)throw new ok;const a=new AbortController,l=await this.fetchWithTimeout(i,s,o,a).catch(aT);if(l instanceof Error){if(n.signal?.aborted)throw new ok;if(t)return this.retryRequest(n,t);if("AbortError"===l.name)throw new lk;throw new ak({cause:l})}const c=Gk(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){return fT(`response (error; ${`retrying, ${t} attempts remaining`})`,l.status,i,c),this.retryRequest(n,t,c)}const e=await l.text().catch(e=>aT(e).message),r=nT(e),s=r?void 0:e;fT(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,i,c,s);throw this.makeStatusError(l.status,r,s,c)}return{response:l,options:n,controller:a}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Kk(this,n,e)}buildURL(e,t){const n=sT(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return cT(r)||(t={...r,...t}),"object"===typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(e=>{let[t,n]=e;return"undefined"!==typeof n}).map(e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(null===n)return`${encodeURIComponent(t)}=`;throw new sk(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:s,...i}=t||{};s&&s.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),n),a={signal:r.signal,...i};return a.method&&(a.method=a.method.toUpperCase()),this.fetch.call(void 0,e,a).finally(()=>{clearTimeout(o)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let r;const s=n?.["retry-after-ms"];if(s){const e=parseFloat(s);Number.isNaN(e)||(r=e)}const i=n?.["retry-after"];if(i&&!r){const e=parseFloat(i);r=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await iT(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${BS}`}}class Wk{constructor(e,t,n,r){Vk.set(this,void 0),Uk(this,Vk,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new sk("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"===typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await Bk(this,Vk,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Vk=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Kk extends qk{constructor(e,t,n){super(t,async t=>new n(e,t.response,await $k(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const Gk=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),Qk={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Xk=e=>"object"===typeof e&&null!==e&&!cT(e)&&Object.keys(e).every(e=>uT(Qk,e)),Yk=()=>{if("undefined"!==typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":BS,"X-Stainless-OS":Zk(Deno.build.os),"X-Stainless-Arch":Jk(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":BS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":BS,"X-Stainless-OS":Zk(process.platform),"X-Stainless-Arch":Jk(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":BS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":BS,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const Jk=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Zk=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let eT;const tT=()=>eT??(eT=Yk()),nT=e=>{try{return JSON.parse(e)}catch(t){return}},rT=/^[a-z][a-z0-9+.-]*:/i,sT=e=>rT.test(e),iT=e=>new Promise(t=>setTimeout(t,e)),oT=(e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new sk(`${e} must be an integer`);if(t<0)throw new sk(`${e} must be a positive integer`);return t},aT=e=>{if(e instanceof Error)return e;if("object"===typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},lT=e=>"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"/simum-casequest",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.[e]?.trim()??void 0:"undefined"!==typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function cT(e){if(!e)return!0;for(const t in e)return!1;return!0}function uT(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function hT(e,t){for(const n in t){if(!uT(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];null===s?delete e[r]:void 0!==s&&(e[r]=s)}}const dT=new Set(["authorization","api-key"]);function fT(e){if("undefined"!==typeof process&&"true"==={NODE_ENV:"production",PUBLIC_URL:"/simum-casequest",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}?.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const n in e.headers)dT.has(n.toLowerCase())&&(t.headers[n]="REDACTED");return t}let t=null;for(const n in e)dT.has(n.toLowerCase())&&(t??(t={...e}),t[n]="REDACTED");return t??e});console.log(`OpenAI:DEBUG:${e}`,...s)}}const pT=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),mT=(e,t)=>{const n=t.toLowerCase();if((e=>"function"===typeof e?.get)(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(const s of[t,n,t.toUpperCase(),r]){const t=e.get(s);if(t)return t}}for(const[r,s]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};function gT(e){return null!=e&&"object"===typeof e&&!Array.isArray(e)}class yT{constructor(e){this._client=e}}class vT extends yT{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class wT extends yT{list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,ST,{query:t,...n})}}class bT extends Wk{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class xT extends Wk{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class _T extends yT{constructor(){super(...arguments),this.messages=new wT(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/chat/completions",ET,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}}class ET extends xT{}class ST extends xT{}_T.ChatCompletionsPage=ET,_T.Messages=wT;class kT extends yT{constructor(){super(...arguments),this.completions=new _T(this._client)}}kT.Completions=_T,kT.ChatCompletionsPage=ET;class TT extends yT{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&fT("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?s:(fT("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!==typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}})(t)}),e)))}}class CT extends yT{create(e,t){return this._client.post("/files",Mk({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/files",IT,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e){let{pollInterval:t=5e3,maxWait:n=18e5}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new Set(["processed","error","deleted"]),s=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await iT(t),i=await this.retrieve(e),Date.now()-s>n)throw new lk({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}}class IT extends xT{}CT.FileObjectsPage=IT;class AT extends yT{createVariation(e,t){return this._client.post("/images/variations",Mk({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Mk({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class NT extends yT{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class PT extends yT{create(e,t){return this._client.post("/audio/transcriptions",Mk({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class RT extends yT{create(e,t){return this._client.post("/audio/translations",Mk({body:e,...t,__metadata:{model:e.model}}))}}class DT extends yT{constructor(){super(...arguments),this.transcriptions=new PT(this._client),this.translations=new RT(this._client),this.speech=new NT(this._client)}}DT.Transcriptions=PT,DT.Translations=RT,DT.Speech=NT;class OT extends yT{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class LT extends yT{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",MT,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class MT extends bT{}LT.ModelsPage=MT;class jT extends yT{}class FT extends yT{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class VT extends yT{constructor(){super(...arguments),this.graders=new FT(this._client)}}VT.Graders=FT;class UT extends yT{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,BT,{body:t,method:"post",...n})}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}class BT extends bT{}UT.PermissionCreateResponsesPage=BT;class $T extends yT{constructor(){super(...arguments),this.permissions=new UT(this._client)}}$T.Permissions=UT,$T.PermissionCreateResponsesPage=BT;class zT extends yT{list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,qT,{query:t,...n})}}class qT extends xT{}zT.FineTuningJobCheckpointsPage=qT;class HT extends yT{constructor(){super(...arguments),this.checkpoints=new zT(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",WT,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,KT,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class WT extends xT{}class KT extends xT{}HT.FineTuningJobsPage=WT,HT.FineTuningJobEventsPage=KT,HT.Checkpoints=zT,HT.FineTuningJobCheckpointsPage=qT;class GT extends yT{constructor(){super(...arguments),this.methods=new jT(this._client),this.jobs=new HT(this._client),this.checkpoints=new $T(this._client),this.alpha=new VT(this._client)}}GT.Methods=jT,GT.Jobs=HT,GT.FineTuningJobsPage=WT,GT.FineTuningJobEventsPage=KT,GT.Checkpoints=$T,GT.Alpha=VT;class QT extends yT{}class XT extends yT{constructor(){super(...arguments),this.graderModels=new QT(this._client)}}XT.GraderModels=QT;class YT extends yT{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,JT,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const s=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=s.data;switch(i.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=s.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await iT(e);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,ZT,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class JT extends xT{}class ZT extends bT{}YT.VectorStoreFilesPage=JT,YT.FileContentResponsesPage=ZT;class eC extends yT{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Xk(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,JT,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(s.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await iT(e);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,t,n){let{files:r,fileIds:s=[]}=t;if(null==r||0==r.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=n?.maxConcurrency??5,o=Math.min(i,r.length),a=this._client,l=r.values(),c=[...s];const u=Array(o).fill(l).map(async function(e){for(let t of e){const e=await a.files.create({file:t,purpose:"assistants"},n);c.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)"fulfilled"===s.status&&r.push(s.value);return r})(u),await this.createAndPoll(e,{file_ids:c})}}class tC extends yT{constructor(){super(...arguments),this.files=new YT(this._client),this.fileBatches=new eC(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/vector_stores",nC,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,rC,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class nC extends xT{}class rC extends bT{}tC.VectorStoresPage=nC,tC.VectorStoreSearchResponsesPage=rC,tC.Files=YT,tC.VectorStoreFilesPage=JT,tC.FileContentResponsesPage=ZT,tC.FileBatches=eC;class sC extends yT{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/assistants",iC,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class iC extends xT{}function oC(e){return"function"===typeof e.parse}sC.AssistantsPage=iC;const aC=e=>"assistant"===e?.role,lC=e=>"function"===e?.role,cC=e=>"tool"===e?.role;var uC,hC,dC,fC,pC,mC,gC,yC,vC,wC,bC,xC,_C,EC=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},SC=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class kC{constructor(){uC.add(this),this.controller=new AbortController,hC.set(this,void 0),dC.set(this,()=>{}),fC.set(this,()=>{}),pC.set(this,void 0),mC.set(this,()=>{}),gC.set(this,()=>{}),yC.set(this,{}),vC.set(this,!1),wC.set(this,!1),bC.set(this,!1),xC.set(this,!1),EC(this,hC,new Promise((e,t)=>{EC(this,dC,e,"f"),EC(this,fC,t,"f")}),"f"),EC(this,pC,new Promise((e,t)=>{EC(this,mC,e,"f"),EC(this,gC,t,"f")}),"f"),SC(this,hC,"f").catch(()=>{}),SC(this,pC,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},SC(this,uC,"m",_C).bind(this))},0)}_connected(){this.ended||(SC(this,dC,"f").call(this),this._emit("connect"))}get ended(){return SC(this,vC,"f")}get errored(){return SC(this,wC,"f")}get aborted(){return SC(this,bC,"f")}abort(){this.controller.abort()}on(e,t){return(SC(this,yC,"f")[e]||(SC(this,yC,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=SC(this,yC,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(SC(this,yC,"f")[e]||(SC(this,yC,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{EC(this,xC,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){EC(this,xC,!0,"f"),await SC(this,pC,"f")}_emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(SC(this,vC,"f"))return;"end"===e&&(EC(this,vC,!0,"f"),SC(this,mC,"f").call(this));const s=SC(this,yC,"f")[e];if(s&&(SC(this,yC,"f")[e]=s.filter(e=>!e.once),s.forEach(e=>{let{listener:t}=e;return t(...n)})),"abort"===e){const e=n[0];return SC(this,xC,"f")||s?.length||Promise.reject(e),SC(this,fC,"f").call(this,e),SC(this,gC,"f").call(this,e),void this._emit("end")}if("error"===e){const e=n[0];SC(this,xC,"f")||s?.length||Promise.reject(e),SC(this,fC,"f").call(this,e),SC(this,gC,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function TC(e){return"auto-parseable-response-format"===e?.$brand}function CC(e){return"auto-parseable-tool"===e?.$brand}function IC(e,t){const n=e.choices.map(e=>{if("length"===e.finish_reason)throw new yk;if("content_filter"===e.finish_reason)throw new vk;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:CC(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?AC(t,e.message.content):null}}});return{...e,choices:n}}function AC(e,t){if("json_schema"!==e.response_format?.type)return null;if("json_schema"===e.response_format?.type){if("$parseRaw"in e.response_format){return e.response_format.$parseRaw(t)}return JSON.parse(t)}return null}function NC(e,t){if(!e)return!1;const n=e.tools?.find(e=>e.function?.name===t.function.name);return CC(n)||n?.function.strict||!1}function PC(e){return!!TC(e.response_format)||(e.tools?.some(e=>CC(e)||"function"===e.type&&!0===e.function.strict)??!1)}hC=new WeakMap,dC=new WeakMap,fC=new WeakMap,pC=new WeakMap,mC=new WeakMap,gC=new WeakMap,yC=new WeakMap,vC=new WeakMap,wC=new WeakMap,bC=new WeakMap,xC=new WeakMap,uC=new WeakSet,_C=function(e){if(EC(this,wC,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new ok),e instanceof ok)return EC(this,bC,!0,"f"),this._emit("abort",e);if(e instanceof sk)return this._emit("error",e);if(e instanceof Error){const t=new sk(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new sk(String(e)))};var RC,DC,OC,LC,MC,jC,FC,VC,UC=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const BC=10;class $C extends kC{constructor(){super(...arguments),RC.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(lC(e)||cC(e))&&e.content)this._emit("functionCallResult",e.content);else if(aC(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(aC(e)&&e.tool_calls)for(const n of e.tool_calls)"function"===n.type&&this._emit("functionCall",n.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new sk("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),UC(this,RC,"m",DC).call(this)}async finalMessage(){return await this.done(),UC(this,RC,"m",OC).call(this)}async finalFunctionCall(){return await this.done(),UC(this,RC,"m",LC).call(this)}async finalFunctionCallResult(){return await this.done(),UC(this,RC,"m",MC).call(this)}async totalUsage(){return await this.done(),UC(this,RC,"m",jC).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=UC(this,RC,"m",OC).call(this);t&&this._emit("finalMessage",t);const n=UC(this,RC,"m",DC).call(this);n&&this._emit("finalContent",n);const r=UC(this,RC,"m",LC).call(this);r&&this._emit("finalFunctionCall",r);const s=UC(this,RC,"m",MC).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",UC(this,RC,"m",jC).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),UC(this,RC,"m",FC).call(this,t);const s=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(IC(s,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:s="auto",stream:i,...o}=t,a="string"!==typeof s&&s?.name,{maxChatCompletions:l=BC}=n||{},c={};for(const d of t.functions)c[d.name||d.function.name]=d;const u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const d of t.messages)this._addMessage(d,!1);for(let d=0;d<l;++d){const t=await this._createChatCompletion(e,{...o,function_call:s,functions:u,messages:[...this.messages]},n),i=t.choices[0]?.message;if(!i)throw new sk("missing message in ChatCompletion response");if(!i.function_call)return;const{name:l,arguments:d}=i.function_call,f=c[l];if(!f){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:l,content:e});continue}if(a&&a!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:r,name:l,content:e});continue}let p;try{p=oC(f)?await f.parse(d):d}catch(h){this._addMessage({role:r,name:l,content:h instanceof Error?h.message:String(h)});continue}const m=await f.function(p,this),g=UC(this,RC,"m",VC).call(this,m);if(this._addMessage({role:r,name:l,content:g}),a)return}}async _runTools(e,t,n){const r="tool",{tool_choice:s="auto",stream:i,...o}=t,a="string"!==typeof s&&s?.function?.name,{maxChatCompletions:l=BC}=n||{},c=t.tools.map(e=>{if(CC(e)){if(!e.$callback)throw new sk("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(const f of c)"function"===f.type&&(u[f.function.name||f.function.function.name]=f.function);const h="tools"in t?c.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<l;++f){const t=await this._createChatCompletion(e,{...o,tool_choice:s,tools:h,messages:[...this.messages]},n),i=t.choices[0]?.message;if(!i)throw new sk("missing message in ChatCompletion response");if(!i.tool_calls?.length)return;for(const e of i.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:s}=e.function,i=u[n];if(!i){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(a&&a!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let o;try{o=oC(i)?await i.parse(s):s}catch(d){const e=d instanceof Error?d.message:String(d);this._addMessage({role:r,tool_call_id:t,content:e});continue}const l=await i.function(o,this),c=UC(this,RC,"m",VC).call(this,l);if(this._addMessage({role:r,tool_call_id:t,content:c}),a)return}}}}RC=new WeakSet,DC=function(){return UC(this,RC,"m",OC).call(this).content??null},OC=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(aC(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new sk("stream ended without producing a ChatCompletionMessage with role=assistant")},LC=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(aC(t)&&t?.function_call)return t.function_call;if(aC(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},MC=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(lC(t)&&null!=t.content)return t.content;if(cC(t)&&null!=t.content&&"string"===typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},jC=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},FC=function(e){if(null!=e.n&&e.n>1)throw new sk("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},VC=function(e){return"string"===typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class zC extends $C{static runFunctions(e,t,n){const r=new zC,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new zC,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}_addMessage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super._addMessage(e,t),aC(e)&&e.content&&this._emit("content",e.content)}}const qC={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511};class HC extends Error{}class WC extends Error{}const KC=(e,t)=>{const n=e.length;let r=0;const s=e=>{throw new HC(`${e} at position ${r}`)},i=e=>{throw new WC(`${e} at position ${r}`)},o=()=>(h(),r>=n&&s("Unexpected end of input"),'"'===e[r]?a():"{"===e[r]?l():"["===e[r]?c():"null"===e.substring(r,r+4)||qC.NULL&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||qC.BOOL&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||qC.BOOL&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||qC.INFINITY&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||qC.MINUS_INFINITY&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||qC.NAN&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),a=()=>{const o=r;let a=!1;for(r++;r<n&&('"'!==e[r]||a&&"\\"===e[r-1]);)a="\\"===e[r]&&!a,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(o,++r-Number(a)))}catch(l){i(String(l))}else if(qC.STR&t)try{return JSON.parse(e.substring(o,r-Number(a))+'"')}catch(l){return JSON.parse(e.substring(o,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{r++,h();const i={};try{for(;"}"!==e[r];){if(h(),r>=n&&qC.OBJ&t)return i;const s=a();h(),r++;try{const e=o();Object.defineProperty(i,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(l){if(qC.OBJ&t)return i;throw l}h(),","===e[r]&&r++}}catch(l){if(qC.OBJ&t)return i;s("Expected '}' at end of object")}return r++,i},c=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(o()),h(),","===e[r]&&r++}catch(i){if(qC.ARR&t)return n;s("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&qC.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(a){if(qC.NUM&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(a){}i(String(a))}}const o=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||qC.NUM&t||s("Unterminated number literal");try{return JSON.parse(e.substring(o,r))}catch(a){"-"===e.substring(o,r)&&qC.NUM&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(o,e.lastIndexOf("e")))}catch(a){i(String(a))}}},h=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return o()},GC=e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qC.ALL;if("string"!==typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return KC(e.trim(),t)}(e,qC.ALL^qC.NUM);var QC,XC,YC,JC,ZC,eI,tI,nI,rI,sI,iI,oI,aI=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},lI=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class cI extends $C{constructor(e){super(),QC.add(this),XC.set(this,void 0),YC.set(this,void 0),JC.set(this,void 0),aI(this,XC,e,"f"),aI(this,YC,[],"f")}get currentChatCompletionSnapshot(){return lI(this,JC,"f")}static fromReadableStream(e){const t=new cI(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new cI(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),lI(this,QC,"m",ZC).call(this);const s=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const i of s)lI(this,QC,"m",tI).call(this,i);if(s.controller.signal?.aborted)throw new ok;return this._addChatCompletion(lI(this,QC,"m",sI).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),lI(this,QC,"m",ZC).call(this),this._connected();const r=Tk.fromReadableStream(e,this.controller);let s;for await(const i of r)s&&s!==i.id&&this._addChatCompletion(lI(this,QC,"m",sI).call(this)),lI(this,QC,"m",tI).call(this,i),s=i.id;if(r.controller.signal?.aborted)throw new ok;return this._addChatCompletion(lI(this,QC,"m",sI).call(this))}[(XC=new WeakMap,YC=new WeakMap,JC=new WeakMap,QC=new WeakSet,ZC=function(){this.ended||aI(this,JC,void 0,"f")},eI=function(e){let t=lI(this,YC,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},lI(this,YC,"f")[e.index]=t,t)},tI=function(e){if(this.ended)return;const t=lI(this,QC,"m",oI).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=lI(this,QC,"m",eI).call(this,e);e.finish_reason&&(lI(this,QC,"m",rI).call(this,e),null!=r.current_tool_call_index&&lI(this,QC,"m",nI).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(lI(this,QC,"m",rI).call(this,e),null!=r.current_tool_call_index&&lI(this,QC,"m",nI).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):dI(n?.type))}}},nI=function(e,t){if(lI(this,QC,"m",eI).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=lI(this,XC,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:CC(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},rI=function(e){const t=lI(this,QC,"m",eI).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=lI(this,QC,"m",iI).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},sI=function(){if(this.ended)throw new sk("stream has ended, this shouldn't happen");const e=lI(this,JC,"f");if(!e)throw new sk("request ended without sending any chunks");return aI(this,JC,void 0,"f"),aI(this,YC,[],"f"),function(e,t){const{id:n,choices:r,created:s,model:i,system_fingerprint:o,...a}=e,l={...a,id:n,choices:r.map(t=>{let{message:n,finish_reason:r,index:s,logprobs:i,...o}=t;if(!r)throw new sk(`missing finish_reason for choice ${s}`);const{content:a=null,function_call:l,tool_calls:c,...u}=n,h=n.role;if(!h)throw new sk(`missing role for choice ${s}`);if(l){const{arguments:e,name:t}=l;if(null==e)throw new sk(`missing function_call.arguments for choice ${s}`);if(!t)throw new sk(`missing function_call.name for choice ${s}`);return{...o,message:{content:a,function_call:{arguments:e,name:t},role:h,refusal:n.refusal??null},finish_reason:r,index:s,logprobs:i}}return c?{...o,index:s,finish_reason:r,logprobs:i,message:{...u,role:h,content:a,refusal:n.refusal??null,tool_calls:c.map((t,n)=>{const{function:r,type:i,id:o,...a}=t,{arguments:l,name:c,...u}=r||{};if(null==o)throw new sk(`missing choices[${s}].tool_calls[${n}].id\n${uI(e)}`);if(null==i)throw new sk(`missing choices[${s}].tool_calls[${n}].type\n${uI(e)}`);if(null==c)throw new sk(`missing choices[${s}].tool_calls[${n}].function.name\n${uI(e)}`);if(null==l)throw new sk(`missing choices[${s}].tool_calls[${n}].function.arguments\n${uI(e)}`);return{...a,id:o,type:i,function:{...u,name:c,arguments:l}}})}}:{...o,message:{...u,content:a,role:h,refusal:n.refusal??null},finish_reason:r,index:s,logprobs:i}}),created:s,model:i,object:"chat.completion",...o?{system_fingerprint:o}:{}};return function(e,t){return t&&PC(t)?IC(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(l,t)}(e,lI(this,XC,"f"))},iI=function(){const e=lI(this,XC,"f")?.response_format;return TC(e)?e:null},oI=function(e){var t,n,r,s;let i=lI(this,JC,"f");const{choices:o,...a}=e;i?Object.assign(i,a):i=aI(this,JC,{...a,choices:[]},"f");for(const{delta:l,finish_reason:c,index:u,logprobs:h=null,...d}of e.choices){let e=i.choices[u];if(e||(e=i.choices[u]={finish_reason:c,index:u,message:{},logprobs:h,...d}),h)if(e.logprobs){const{content:r,refusal:s,...i}=h;hI(i),Object.assign(e.logprobs,i),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),s&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},h);if(c&&(e.finish_reason=c,lI(this,XC,"f")&&PC(lI(this,XC,"f")))){if("length"===c)throw new yk;if("content_filter"===c)throw new vk}if(Object.assign(e,d),!l)continue;const{content:o,refusal:a,function_call:f,role:p,tool_calls:m,...g}=l;if(hI(g),Object.assign(e.message,g),a&&(e.message.refusal=(e.message.refusal||"")+a),p&&(e.message.role=p),f&&(e.message.function_call?(f.name&&(e.message.function_call.name=f.name),f.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=f.arguments)):e.message.function_call=f),o&&(e.message.content=(e.message.content||"")+o,!e.message.refusal&&lI(this,QC,"m",iI).call(this)&&(e.message.parsed=GC(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:i,...o}of m){const a=(s=e.message.tool_calls)[t]??(s[t]={});Object.assign(a,o),n&&(a.id=n),r&&(a.type=r),i&&(a.function??(a.function={name:i.name??"",arguments:""})),i?.name&&(a.function.name=i.name),i?.arguments&&(a.function.arguments+=i.arguments,NC(lI(this,XC,"f"),a)&&(a.function.parsed_arguments=GC(a.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Tk(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function uI(e){return JSON.stringify(e)}function hI(e){}function dI(e){}class fI extends cI{static fromReadableStream(e){const t=new fI(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new fI(null),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new fI(t),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}}class pI extends yT{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new sk(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new sk(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>IC(t,e))}runFunctions(e,t){return e.stream?fI.runFunctions(this._client,e,t):zC.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?fI.runTools(this._client,e,t):zC.runTools(this._client,e,t)}stream(e,t){return cI.createChatCompletion(this._client,e,t)}}class mI extends yT{constructor(){super(...arguments),this.completions=new pI(this._client)}}!function(e){e.Completions=pI}(mI||(mI={}));class gI extends yT{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class yI extends yT{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class vI extends yT{constructor(){super(...arguments),this.sessions=new gI(this._client),this.transcriptionSessions=new yI(this._client)}}vI.Sessions=gI,vI.TranscriptionSessions=yI;var wI,bI,xI,_I,EI,SI,kI,TI,CI,II,AI,NI,PI,RI,DI,OI,LI,MI,jI,FI,VI,UI,BI=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},$I=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};class zI extends kC{constructor(){super(...arguments),wI.add(this),bI.set(this,[]),xI.set(this,{}),_I.set(this,{}),EI.set(this,void 0),SI.set(this,void 0),kI.set(this,void 0),TI.set(this,void 0),CI.set(this,void 0),II.set(this,void 0),AI.set(this,void 0),NI.set(this,void 0),PI.set(this,void 0)}[(bI=new WeakMap,xI=new WeakMap,_I=new WeakMap,EI=new WeakMap,SI=new WeakMap,kI=new WeakMap,TI=new WeakMap,CI=new WeakMap,II=new WeakMap,AI=new WeakMap,NI=new WeakMap,PI=new WeakMap,wI=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new zI;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Tk.fromReadableStream(e,this.controller);for await(const s of r)BI(this,wI,"m",RI).call(this,s);if(r.controller.signal?.aborted)throw new ok;return this._addRun(BI(this,wI,"m",DI).call(this))}toReadableStream(){return new Tk(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,s){const i=new zI;return i._run(()=>i._runToolAssistantStream(e,t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,n,r,s){const i=s?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},a=await e.submitToolOutputs(t,n,o,{...s,signal:this.controller.signal});this._connected();for await(const l of a)BI(this,wI,"m",RI).call(this,l);if(a.controller.signal?.aborted)throw new ok;return this._addRun(BI(this,wI,"m",DI).call(this))}static createThreadAssistantStream(e,t,n){const r=new zI;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const s=new zI;return s._run(()=>s._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return BI(this,AI,"f")}currentRun(){return BI(this,NI,"f")}currentMessageSnapshot(){return BI(this,EI,"f")}currentRunStepSnapshot(){return BI(this,PI,"f")}async finalRunSteps(){return await this.done(),Object.values(BI(this,xI,"f"))}async finalMessages(){return await this.done(),Object.values(BI(this,_I,"f"))}async finalRun(){if(await this.done(),!BI(this,SI,"f"))throw Error("Final run was not received.");return BI(this,SI,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const s={...t,stream:!0},i=await e.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(const o of i)BI(this,wI,"m",RI).call(this,o);if(i.controller.signal?.aborted)throw new ok;return this._addRun(BI(this,wI,"m",DI).call(this))}async _createAssistantStream(e,t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const a of o)BI(this,wI,"m",RI).call(this,a);if(o.controller.signal?.aborted)throw new ok;return this._addRun(BI(this,wI,"m",DI).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!==t&&void 0!==t)if("index"!==n&&"type"!==n){if("string"===typeof t&&"string"===typeof r)t+=r;else if("number"===typeof t&&"number"===typeof r)t+=r;else{if(!gT(t)||!gT(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"===typeof e||"number"===typeof e)){t.push(...r);continue}for(const e of r){if(!gT(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!==typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,s){return await this._createToolAssistantStream(n,e,t,r,s)}}RI=function(e){if(!this.ended)switch($I(this,AI,e,"f"),BI(this,wI,"m",MI).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":BI(this,wI,"m",UI).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":BI(this,wI,"m",LI).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":BI(this,wI,"m",OI).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},DI=function(){if(this.ended)throw new sk("stream has ended, this shouldn't happen");if(!BI(this,SI,"f"))throw Error("Final run has not been received");return BI(this,SI,"f")},OI=function(e){const[t,n]=BI(this,wI,"m",FI).call(this,e,BI(this,EI,"f"));$I(this,EI,t,"f"),BI(this,_I,"f")[t.id]=t;for(const r of n){const e=t.content[r.index];"text"==e?.type&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=BI(this,kI,"f")){if(BI(this,TI,"f"))switch(BI(this,TI,"f").type){case"text":this._emit("textDone",BI(this,TI,"f").text,BI(this,EI,"f"));break;case"image_file":this._emit("imageFileDone",BI(this,TI,"f").image_file,BI(this,EI,"f"))}$I(this,kI,n.index,"f")}$I(this,TI,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==BI(this,kI,"f")){const t=e.data.content[BI(this,kI,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,BI(this,EI,"f"));break;case"text":this._emit("textDone",t.text,BI(this,EI,"f"))}}BI(this,EI,"f")&&this._emit("messageDone",e.data),$I(this,EI,void 0,"f")}},LI=function(e){const t=BI(this,wI,"m",jI).call(this,e);switch($I(this,PI,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==BI(this,CI,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(BI(this,II,"f")&&this._emit("toolCallDone",BI(this,II,"f")),$I(this,CI,e.index,"f"),$I(this,II,t.step_details.tool_calls[e.index],"f"),BI(this,II,"f")&&this._emit("toolCallCreated",BI(this,II,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":$I(this,PI,void 0,"f");"tool_calls"==e.data.step_details.type&&BI(this,II,"f")&&(this._emit("toolCallDone",BI(this,II,"f")),$I(this,II,void 0,"f")),this._emit("runStepDone",e.data,t)}},MI=function(e){BI(this,bI,"f").push(e),this._emit("event",e)},jI=function(e){switch(e.event){case"thread.run.step.created":return BI(this,xI,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=BI(this,xI,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=zI.accumulateDelta(t,n.delta);BI(this,xI,"f")[e.data.id]=r}return BI(this,xI,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":BI(this,xI,"f")[e.data.id]=e.data}if(BI(this,xI,"f")[e.data.id])return BI(this,xI,"f")[e.data.id];throw new Error("No snapshot available")},FI=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=BI(this,wI,"m",VI).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},VI=function(e,t){return zI.accumulateDelta(t,e)},UI=function(e){switch($I(this,NI,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":$I(this,SI,e.data,"f"),BI(this,II,"f")&&(this._emit("toolCallDone",BI(this,II,"f")),$I(this,II,void 0,"f"))}};class qI extends yT{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,HI,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class HI extends xT{}qI.MessagesPage=HI;class WI extends yT{retrieve(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0;return Xk(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Xk(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,KI,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class KI extends xT{}WI.RunStepsPage=KI;class GI extends yT{constructor(){super(...arguments),this.steps=new WI(this._client)}create(e,t,n){const{include:r,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,QI,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return zI.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await iT(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return zI.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const s=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,n,r){return zI.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class QI extends xT{}GI.RunsPage=QI,GI.Steps=WI,GI.RunStepsPage=KI;class XI extends yT{constructor(){super(...arguments),this.runs=new GI(this._client),this.messages=new qI(this._client)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return zI.createThreadAssistantStream(e,this._client.beta.threads,t)}}XI.Runs=GI,XI.RunsPage=QI,XI.Messages=qI,XI.MessagesPage=HI;class YI extends yT{constructor(){super(...arguments),this.realtime=new vI(this._client),this.chat=new mI(this._client),this.assistants=new sC(this._client),this.threads=new XI(this._client)}}YI.Realtime=vI,YI.Assistants=sC,YI.AssistantsPage=iC,YI.Threads=XI;class JI extends yT{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/batches",ZI,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class ZI extends xT{}JI.BatchesPage=ZI;class eA extends yT{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,Mk({body:t,...n}))}}class tA extends yT{constructor(){super(...arguments),this.parts=new eA(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}function nA(e,t){return t&&function(e){if(TC(e.text?.format))return!0;return!1}(t)?rA(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}function rA(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:aA(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:sA(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||lA(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function sA(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const n=e.text?.format;return n.$parseRaw(t)}return JSON.parse(t)}function iA(e){return"auto-parseable-tool"===e?.$brand}function oA(e,t){return e.find(e=>"function"===e.type&&e.name===t)}function aA(e,t){const n=oA(e.tools??[],t.name);return{...t,...t,parsed_arguments:iA(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function lA(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}tA.Parts=eA;class cA extends yT{list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,EA,{query:t,...n})}}var uA,hA,dA,fA,pA,mA,gA,yA,vA,wA=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},bA=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class xA extends kC{constructor(e){super(),uA.add(this),hA.set(this,void 0),dA.set(this,void 0),fA.set(this,void 0),wA(this,hA,e,"f")}static createResponse(e,t,n){const r=new xA(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const r=n?.signal;let s;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),bA(this,uA,"m",pA).call(this);let i=null;"response_id"in t?(s=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),i=t.starting_after??null):s=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const o of s)bA(this,uA,"m",mA).call(this,o,i);if(s.controller.signal?.aborted)throw new ok;return bA(this,uA,"m",gA).call(this)}[(hA=new WeakMap,dA=new WeakMap,fA=new WeakMap,uA=new WeakSet,pA=function(){this.ended||wA(this,dA,void 0,"f")},mA=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},r=bA(this,uA,"m",yA).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=r.output[e.output_index];if(!t)throw new sk(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new sk(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new sk(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=r.output[e.output_index];if(!t)throw new sk(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},gA=function(){if(this.ended)throw new sk("stream has ended, this shouldn't happen");const e=bA(this,dA,"f");if(!e)throw new sk("request ended without sending any events");wA(this,dA,void 0,"f");const t=function(e,t){return nA(e,t)}(e,bA(this,hA,"f"));return wA(this,fA,t,"f"),t},yA=function(e){let t=bA(this,dA,"f");if(!t){if("response.created"!==e.type)throw new sk(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=wA(this,dA,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new sk(`missing output at index ${e.output_index}`);"message"===n.type&&n.content.push(e.part);break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new sk(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new sk(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new sk(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new sk(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.completed":wA(this,dA,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=bA(this,fA,"f");if(!e)throw new sk("stream ended without producing a ChatCompletion");return e}}class _A extends yT{constructor(){super(...arguments),this.inputItems=new cA(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&lA(e),e))}retrieve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>rA(t,e))}stream(e,t){return xA.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class EA extends xT{}_A.InputItems=cA;class SA extends yT{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return Xk(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,kA,{query:n,...r})}}class kA extends xT{}SA.OutputItemListResponsesPage=kA;class TA extends yT{constructor(){super(...arguments),this.outputItems=new SA(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,CA,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class CA extends xT{}TA.RunListResponsesPage=CA,TA.OutputItems=SA,TA.OutputItemListResponsesPage=kA;class IA extends yT{constructor(){super(...arguments),this.runs=new TA(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/evals",AA,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class AA extends xT{}IA.EvalListResponsesPage=AA,IA.Runs=TA,IA.RunListResponsesPage=CA;class NA extends yT{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}}class PA extends yT{constructor(){super(...arguments),this.content=new NA(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,Mk({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return Xk(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,RA,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class RA extends xT{}PA.FileListResponsesPage=RA,PA.Content=NA;class DA extends yT{constructor(){super(...arguments),this.files=new PA(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Xk(e)?this.list({},e):this._client.getAPIList("/containers",OA,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class OA extends xT{}DA.ContainerListResponsesPage=OA,DA.Files=PA,DA.FileListResponsesPage=RA;class LA extends Hk{constructor(){let{baseURL:e=lT("OPENAI_BASE_URL"),apiKey:t=lT("OPENAI_API_KEY"),organization:n=lT("OPENAI_ORG_ID")??null,project:r=lT("OPENAI_PROJECT_ID")??null,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===t)throw new sk("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:n,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new sk("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new vT(this),this.chat=new kT(this),this.embeddings=new TT(this),this.files=new CT(this),this.images=new AT(this),this.audio=new DT(this),this.moderations=new OT(this),this.models=new LT(this),this.fineTuning=new GT(this),this.graders=new XT(this),this.vectorStores=new tC(this),this.beta=new YI(this),this.batches=new JI(this),this.uploads=new tA(this),this.responses=new _A(this),this.evals=new IA(this),this.containers=new DA(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return US(e,{arrayFormat:"brackets"})}}vA=LA,LA.OpenAI=vA,LA.DEFAULT_TIMEOUT=6e5,LA.OpenAIError=sk,LA.APIError=ik,LA.APIConnectionError=ak,LA.APIConnectionTimeoutError=lk,LA.APIUserAbortError=ok,LA.NotFoundError=dk,LA.ConflictError=fk,LA.RateLimitError=mk,LA.BadRequestError=ck,LA.AuthenticationError=uk,LA.InternalServerError=gk,LA.PermissionDeniedError=hk,LA.UnprocessableEntityError=pk,LA.toFile=Rk,LA.fileFromPath=QS,LA.Completions=vT,LA.Chat=kT,LA.ChatCompletionsPage=ET,LA.Embeddings=TT,LA.Files=CT,LA.FileObjectsPage=IT,LA.Images=AT,LA.Audio=DT,LA.Moderations=OT,LA.Models=LT,LA.ModelsPage=MT,LA.FineTuning=GT,LA.Graders=XT,LA.VectorStores=tC,LA.VectorStoresPage=nC,LA.VectorStoreSearchResponsesPage=rC,LA.Beta=YI,LA.Batches=JI,LA.BatchesPage=ZI,LA.Uploads=tA,LA.Responses=_A,LA.Evals=IA,LA.EvalListResponsesPage=AA,LA.Containers=DA,LA.ContainerListResponsesPage=OA;new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]);const MA={NODE_ENV:"production",PUBLIC_URL:"/simum-casequest",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_OPENAI_API_KEY,jA=MA?new LA({apiKey:MA,dangerouslyAllowBrowser:!0}):null;const FA=new class{constructor(){this.recognition=null,this.synthesis=window.speechSynthesis,this.isListening=!1,this.initSpeechRecognition()}initSpeechRecognition(){if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.recognition.continuous=!1,this.recognition.interimResults=!1,this.recognition.lang="en-US"}}startListening(e,t){this.recognition?(this.isListening=!0,this.recognition.onresult=t=>{const n=t.results[0][0].transcript;e(n),this.isListening=!1},this.recognition.onerror=e=>{t(e.error),this.isListening=!1},this.recognition.onend=()=>{this.isListening=!1},this.recognition.start()):t("Speech recognition not supported")}stopListening(){this.recognition&&this.isListening&&(this.recognition.stop(),this.isListening=!1)}speak(e,t){if(!this.synthesis)return;this.synthesis.cancel();const n=new SpeechSynthesisUtterance(e);n.rate=.9,n.pitch=1,n.volume=1,t&&(n.onend=t),this.synthesis.speak(n)}stopSpeaking(){this.synthesis&&this.synthesis.cancel()}},VA=e=>{let{caseType:t="market-sizing",onComplete:n}=e;const[s,i]=(0,r.useState)([]),[o,a]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[d,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e={role:"assistant",content:`Hi! I'm your AI case interviewer. Today we'll work on a ${t.replace("-"," ")} case. Are you ready to begin? Feel free to speak or type your responses.`};i([e]),p&&FA.speak(e.content)},[t,p]),(0,r.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[s]);const y=async e=>{if(!e.trim())return;const n={role:"user",content:e},r=[...s,n];i(r),a(""),f(!0);try{const e=await async function(e){if(!jA)return"AI features are currently unavailable. This is a demo mode - please describe your approach to this market sizing case.";const t=`You are an experienced McKinsey case interviewer conducting a ${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"market-sizing"} case interview. \n  \n  Guidelines:\n  - Ask one question at a time\n  - Provide hints when the candidate struggles\n  - Give constructive feedback\n  - Keep responses concise (2-3 sentences max)\n  - Guide the candidate through the case structure\n  - Be encouraging but challenging\n  \n  Current case: Help the candidate solve a market sizing problem step by step.`;try{return(await jA.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:t},...e],max_tokens:150,temperature:.7})).choices[0].message.content}catch(n){return console.error("AI service error:",n),"I'm having trouble connecting right now. Let's continue with the case - what's your initial approach?"}}(r,t),n={role:"assistant",content:e};i(e=>[...e,n]),p&&(h(!0),FA.speak(e,()=>h(!1)))}catch(o){console.error("Error getting AI response:",o)}finally{f(!1)}};return(0,So.jsxs)("div",{className:"flex flex-col h-screen bg-gray-50",children:[(0,So.jsxs)("div",{className:"bg-white shadow-sm p-4 flex justify-between items-center",children:[(0,So.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,So.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,So.jsx)(ho,{className:"text-white w-6 h-6"})}),(0,So.jsxs)("div",{children:[(0,So.jsx)("h1",{className:"font-semibold text-gray-900",children:"AI Case Interview"}),(0,So.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:t.replace("-"," ")})]})]}),(0,So.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,So.jsx)("button",{onClick:()=>{m(!p),u&&(FA.stopSpeaking(),h(!1))},className:"p-2 rounded-full "+(p?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"),children:p?(0,So.jsx)(bS,{className:"w-5 h-5"}):(0,So.jsx)(xS,{className:"w-5 h-5"})}),n&&(0,So.jsx)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm",children:"End Session"})]})]}),(0,So.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,So.jsx)(io,{children:s.map((e,t)=>(0,So.jsx)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:(0,So.jsxs)("div",{className:"flex items-start space-x-2 max-w-xs lg:max-w-md "+("user"===e.role?"flex-row-reverse space-x-reverse":""),children:[(0,So.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+("user"===e.role?"bg-blue-600":"bg-gray-600"),children:"user"===e.role?(0,So.jsx)(_S,{className:"text-white w-4 h-4"}):(0,So.jsx)(ho,{className:"text-white w-4 h-4"})}),(0,So.jsx)("div",{className:"px-4 py-2 rounded-lg "+("user"===e.role?"bg-blue-600 text-white":"bg-white text-gray-900 shadow-sm"),children:(0,So.jsx)("p",{className:"text-sm",children:e.content})})]})},t))}),d&&(0,So.jsx)(Ji.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:(0,So.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,So.jsx)("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center",children:(0,So.jsx)(ho,{className:"text-white w-4 h-4"})}),(0,So.jsx)("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm",children:(0,So.jsxs)("div",{className:"flex space-x-1",children:[(0,So.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,So.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,So.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),(0,So.jsx)("div",{ref:g})]}),(0,So.jsxs)("div",{className:"bg-white border-t p-4",children:[(0,So.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,So.jsx)("div",{className:"flex-1 relative",children:(0,So.jsx)("input",{type:"text",value:o,onChange:e=>a(e.target.value),onKeyPress:e=>"Enter"===e.key&&y(o),placeholder:"Type your response or use voice...",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l||d})}),(0,So.jsx)("button",{onClick:l?()=>{c(!1),FA.stopListening()}:()=>{c(!0),FA.startListening(e=>{c(!1),y(e)},e=>{c(!1),console.error("Voice recognition error:",e)})},disabled:d,className:"p-2 rounded-full "+(l?"bg-red-100 text-red-600 animate-pulse":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:l?(0,So.jsx)(ES,{className:"w-5 h-5"}):(0,So.jsx)(wo,{className:"w-5 h-5"})}),(0,So.jsx)("button",{onClick:()=>y(o),disabled:!o.trim()||d,className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50",children:(0,So.jsx)(SS,{className:"w-5 h-5"})})]}),u&&(0,So.jsxs)("div",{className:"mt-2 flex items-center justify-center text-sm text-gray-500",children:[(0,So.jsx)(bS,{className:"w-4 h-4 mr-1 animate-pulse"}),"AI is speaking..."]})]})]})},UA=(0,r.createContext)(),BA=e=>{let{onLogin:t}=e;const[n,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)("");return(0,So.jsx)("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4",children:(0,So.jsxs)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-8 w-full max-w-md",children:[(0,So.jsx)("div",{className:"text-center mb-8",children:(0,So.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CaseQuest"})}),(0,So.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),d("");try{if(n)await function(e,t,n){return yu(ia(e),nu.credential(t,n))}(fS,i,a);else{const e=await async function(e,t,n){var r;const s=$c(e),i={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Vc(s,i,"signUpPassword");o=cu(s,e)}else o=cu(s,i).catch(async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Vc(s,i,"signUpPassword");return cu(s,e)}return Promise.reject(e)});const a=await o.catch(e=>Promise.reject(e)),l=await uu._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}(fS,i,a);await aS(oE(pS,"users",e.user.uid),{total_xp:0,current_streak:0,longest_streak:0,current_level:1,last_active_date:null,completed_lessons:[],skill_level:"beginner",caseCoins:0,inventory:{},email:e.user.email})}t()}catch(h){d(h.message)}finally{u(!1)}},className:"space-y-4",children:[(0,So.jsx)("input",{type:"email",placeholder:"Email",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border rounded-lg",required:!0}),(0,So.jsx)("input",{type:"password",placeholder:"Password",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border rounded-lg",required:!0}),h&&(0,So.jsx)("div",{className:"text-red-600 text-sm text-center",children:h}),(0,So.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 rounded-lg",children:c?"Loading...":n?"Sign In":"Sign Up"})]}),(0,So.jsx)("button",{onClick:()=>s(!n),className:"text-blue-600 mt-6",children:n?"Don't have an account? Sign up":"Already have an account? Sign in"})]})})},$A=e=>{var t;let{currentPage:n,setCurrentPage:s,user:i,onLogout:o}=e;const[a,l]=(0,r.useState)(!1),c=[{id:"dashboard",label:"Home",icon:lo},{id:"home",label:"Dashboard",icon:co},{id:"learning",label:"Learning Path",icon:uo},{id:"ai-interview",label:"AI Interview",icon:ho},{id:"cases",label:"Case Simulator",icon:fo},{id:"progress",label:"Progress",icon:po},{id:"store",label:"Store",icon:mo},{id:"leaderboard",label:"Leaderboard",icon:go}];return(0,So.jsxs)(So.Fragment,{children:[(0,So.jsx)("button",{onClick:()=>l(!a),className:"lg:hidden fixed top-4 left-4 z-50",children:a?(0,So.jsx)(yo,{}):(0,So.jsx)(vo,{})}),(0,So.jsx)("div",{className:`fixed lg:static inset-y-0 left-0 z-40 w-64 bg-white shadow-lg transform ${a?"translate-x-0":"-translate-x-full"} lg:translate-x-0 transition-transform`,children:(0,So.jsxs)("div",{className:"flex flex-col h-full",children:[(0,So.jsx)("div",{className:"p-6 border-b",children:(0,So.jsx)("h1",{className:"text-xl font-bold",children:"CaseQuest"})}),(0,So.jsx)("nav",{className:"flex-1 p-4",children:(0,So.jsx)("ul",{children:c.map(e=>(0,So.jsx)("li",{children:(0,So.jsxs)("button",{onClick:()=>{s(e.id),l(!1)},className:"w-full flex items-center p-3 rounded-lg "+(n===e.id?"bg-blue-50 text-blue-600":"hover:bg-gray-50"),children:[(0,So.jsx)(e.icon,{className:"h-5 w-5 mr-3"})," ",e.label]})},e.id))})}),(0,So.jsxs)("div",{className:"p-4 border-t",children:[(0,So.jsx)("p",{children:(null===i||void 0===i||null===(t=i.email)||void 0===t?void 0:t.split("@")[0])||"User"}),(0,So.jsx)("button",{onClick:o,children:"Sign Out"})]})]})}),a&&(0,So.jsx)("div",{onClick:()=>l(!1),className:"lg:hidden fixed inset-0 bg-black opacity-50 z-30"})]})},zA=e=>{var t;let{user:n}=e;return(0,So.jsx)("div",{children:(0,So.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",(null===n||void 0===n||null===(t=n.email)||void 0===t?void 0:t.split("@")[0])||"Consultant","! \ud83d\udc4b"]})})},qA=e=>{let{user:t,lessons:n,onStartLesson:r}=e;return(0,So.jsxs)("div",{children:[(0,So.jsxs)("div",{className:"mb-8",children:[(0,So.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Guided Mastery Path"}),(0,So.jsx)("p",{className:"text-gray-600",children:"Complete lessons in order to unlock new challenges and skills."})]}),(0,So.jsx)(Io,{lessons:n,userProgress:t,onStartLesson:r})]})},HA=e=>{let{onStartInterview:t}=e;return(0,So.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,So.jsxs)("div",{className:"mb-8",children:[(0,So.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"AI Case Interview"}),(0,So.jsx)("p",{className:"text-gray-600",children:"Practice with our AI interviewer. Choose a case type to begin:"})]}),(0,So.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:"market-sizing",name:"Market Sizing",description:"Estimate market size and potential"},{id:"profitability",name:"Profitability",description:"Analyze profit drivers and optimization"},{id:"market-entry",name:"Market Entry",description:"Strategic market entry decisions"},{id:"operations",name:"Operations",description:"Operational efficiency and process improvement"}].map(e=>(0,So.jsxs)(Ji.div,{whileHover:{scale:1.02},className:"bg-white rounded-lg shadow-sm border p-6 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(e.id),children:[(0,So.jsxs)("div",{className:"flex items-center mb-4",children:[(0,So.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mr-4",children:(0,So.jsx)(ho,{className:"w-6 h-6 text-blue-600"})}),(0,So.jsxs)("div",{children:[(0,So.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,So.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]}),(0,So.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,So.jsx)(wo,{className:"w-4 h-4 mr-2"}),(0,So.jsx)("span",{className:"text-sm",children:"Voice & Text Enabled"})]})]},e.id))})]})},WA=e=>{let{cases:t}=e;return(0,So.jsx)("div",{children:"Case Simulator"})},KA=e=>{let{user:t,lessons:n}=e;return(0,So.jsx)("div",{children:"Progress"})},GA=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[a,l]=(0,r.useState)("dashboard"),[c,u]=(0,r.useState)([]),[h,d]=(0,r.useState)([]),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return ia(e).onAuthStateChanged(t,n,r)}(fS,async e=>{if(e){t(e);try{const t=await sS(oE(pS,"users",e.uid));if(t.exists())s({...t.data(),uid:e.uid});else{await aS(oE(pS,"users",e.uid),{total_xp:0,current_streak:0,longest_streak:0,current_level:1,last_active_date:null,completed_lessons:[],skill_level:"beginner",caseCoins:0,inventory:{},email:e.email});const t=await sS(oE(pS,"users",e.uid));s({...t.data(),uid:e.uid})}const n=await oS(iE(pS,"lessons"));u(n.docs.map(e=>({...e.data(),id:e.id})));const r=await oS(iE(pS,"cases"));d(r.docs.map(e=>({...e.data(),id:e.id})))}catch(n){console.error("Error fetching data:",n)}}else t(null),s(null);o(!1)});return()=>e()},[]);const y=()=>{},v=e=>{p(e)},w=async e=>{if(!n||n.caseCoins<e.cost)return void console.log("Cannot purchase item");const t=oE(pS,"users",fS.currentUser.uid);try{const r=n.caseCoins-e.cost,i={...n.inventory};i[e.itemId]=(i[e.itemId]||0)+1,await lS(t,{caseCoins:hS(-e.cost),inventory:i}),s(e=>({...e,caseCoins:r,inventory:i})),alert(`${e.name} purchased successfully!`)}catch(r){console.error("Error purchasing item:",r),alert("Failed to purchase item.")}},b=async e=>{if(!n||!f)return;const t=oE(pS,"users",fS.currentUser.uid),r=new Date;r.setHours(0,0,0,0);const i=r.toISOString().split("T")[0],o=new Date;o.setDate(o.getDate()-1),o.setHours(0,0,0,0);const a=o.toISOString().split("T")[0];let{last_active_date:l,current_streak:c=0,longest_streak:u=0,inventory:h={}}=n,d=c;const m={completed_lessons:[...new Set([...n.completed_lessons||[],f.id])],total_xp:hS(e),caseCoins:hS(5),last_active_date:i};let g=!1;l!==i&&(l===a?d=c+1:h.streak_freeze&&h.streak_freeze>0?(m["inventory.streak_freeze"]=hS(-1),g=!0):d=1),m.current_streak=d,m.longest_streak=Math.max(d,u);try{await lS(t,m);const r=(n.total_xp||0)+e,i={...h};g&&(i.streak_freeze=(i.streak_freeze||1)-1),s(e=>({...e,...m,total_xp:r,caseCoins:e.caseCoins+5,current_level:Math.floor(r/100)+1,inventory:i,current_streak:d,longest_streak:m.longest_streak})),p(null)}catch(y){console.error("Error completing lesson:",y)}},x=()=>{switch(a){case"dashboard":default:return(0,So.jsx)(ko,{user:n,onNavigate:l});case"home":return(0,So.jsx)(zA,{user:n});case"learning":return(0,So.jsx)(qA,{user:n,lessons:c,onStartLesson:v});case"ai-interview":return(0,So.jsx)(HA,{onStartInterview:g});case"cases":return(0,So.jsx)(WA,{cases:h});case"progress":return(0,So.jsx)(KA,{user:n,lessons:c});case"store":return(0,So.jsx)(vS,{user:n,onPurchase:w});case"leaderboard":return(0,So.jsx)(wS,{currentUser:n})}};return i?(0,So.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?m?(0,So.jsx)(io,{mode:"wait",children:(0,So.jsx)(Ji.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:(0,So.jsx)(VA,{caseType:m,onComplete:()=>g(null)})},"ai-interview")}):f?(0,So.jsx)(io,{mode:"wait",children:(0,So.jsx)(Ji.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},children:(0,So.jsx)(Do,{lesson:f,onComplete:b})},"lesson-screen")}):(0,So.jsx)(UA.Provider,{value:{user:n,updateUser:e=>s(e)},children:(0,So.jsx)("div",{className:"min-h-screen gradient-bg",children:"dashboard"===a?(0,So.jsx)(io,{mode:"wait",children:(0,So.jsx)(Ji.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:x()},a)}):(0,So.jsxs)("div",{className:"flex",children:[(0,So.jsx)($A,{currentPage:a,setCurrentPage:l,user:n,onLogout:async()=>{await function(e){return ia(e).signOut()}(fS),l("dashboard"),p(null),g(null)}}),(0,So.jsxs)("main",{className:"flex-1 p-8",children:[(0,So.jsx)(Lo,{user:n}),(0,So.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,So.jsx)(io,{mode:"wait",children:(0,So.jsx)(Ji.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:x()},a)})})]})]})})}):(0,So.jsx)(BA,{onLogin:y})};s.createRoot(document.getElementById("root")).render((0,So.jsx)(r.StrictMode,{children:(0,So.jsx)(GA,{})}))})();
//# sourceMappingURL=main.8de42e70.js.map